"use strict";function _possibleConstructorReturn(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function __guard__(value,transform){return void 0!==value&&null!==value?transform(value):void 0}function __guardMethod__(obj,methodName,transform){return void 0!==obj&&null!==obj&&"function"==typeof obj[methodName]?transform(obj,methodName):void 0}function unregisterServiceWorkers(){"https:"===location.protocol&&navigator.serviceWorker.getRegistrations().then(function(registrations){for(var index=0;index<registrations.length;index++)registrations[index].unregister({immediate:!0})})}function fixMediaManager(){var $el=$('div[data-control="media-manager"] .control-scrollpad');$el.height($el.parent().height())}function fixSidebar(){$("#layout-sidenav").height(Math.max($("#layout-body").innerHeight(),$(window).height()-$("#layout-mainmenu").height()))}!function($){$.fn.touchwipe=function(settings){var config={min_move_x:20,min_move_y:20,wipeLeft:function(){},wipeRight:function(){},wipeUp:function(){},wipeDown:function(){},preventDefaultEvents:!0};return settings&&$.extend(config,settings),this.each(function(){function cancelTouch(){this.removeEventListener("touchmove",onTouchMove),startX=null,isMoving=!1}function onTouchMove(e){if(config.preventDefaultEvents&&e.preventDefault(),isMoving){var x=e.touches[0].pageX,y=e.touches[0].pageY,dx=startX-x,dy=startY-y;Math.abs(dx)>=config.min_move_x?(cancelTouch(),dx>0?config.wipeLeft():config.wipeRight()):Math.abs(dy)>=config.min_move_y&&(cancelTouch(),dy>0?config.wipeDown():config.wipeUp())}}function onTouchStart(e){1==e.touches.length&&(startX=e.touches[0].pageX,startY=e.touches[0].pageY,isMoving=!0,this.addEventListener("touchmove",onTouchMove,!1))}var startX,startY,isMoving=!1;"ontouchstart"in document.documentElement&&this.addEventListener("touchstart",onTouchStart,!1)}),this}}(jQuery),function($){function ellipsisOnElement(containerElement,settings){var containerData=containerElement.data("jqae");containerData||(containerData={});var wrapperElement=containerData.wrapperElement;wrapperElement||(wrapperElement=containerElement.wrapInner("<div/>").find(">div"),wrapperElement.css({margin:0,padding:0,border:0}));var wrapperElementData=wrapperElement.data("jqae");wrapperElementData||(wrapperElementData={});var wrapperOriginalContent=wrapperElementData.originalContent;wrapperOriginalContent?wrapperElement=wrapperElementData.originalContent.clone(!0).data("jqae",{originalContent:wrapperOriginalContent}).replaceAll(wrapperElement):wrapperElement.data("jqae",{originalContent:wrapperElement.clone(!0)}),containerElement.data("jqae",{wrapperElement:wrapperElement,containerWidth:containerElement.width(),containerHeight:containerElement.height()});var containerElementHeight=containerElement.height(),wrapperOffset=(parseInt(containerElement.css("padding-top"),10)||0)+(parseInt(containerElement.css("border-top-width"),10)||0)-(wrapperElement.offset().top-containerElement.offset().top),deferAppendEllipsis=!1,selectedElements=wrapperElement;settings.selector&&(selectedElements=$(wrapperElement.find(settings.selector).get().reverse())),selectedElements.each(function(){var selectedElement=$(this),originalText=selectedElement.text(),ellipsisApplied=!1;if(wrapperElement.innerHeight()-selectedElement.innerHeight()>containerElementHeight+wrapperOffset)selectedElement.remove();else if(removeLastEmptyElements(selectedElement),selectedElement.contents().length){for(deferAppendEllipsis&&(getLastTextNode(selectedElement).get(0).nodeValue+=settings.ellipsis,deferAppendEllipsis=!1);wrapperElement.innerHeight()>containerElementHeight+wrapperOffset;){if(!(ellipsisApplied=ellipsisOnLastTextNode(selectedElement))){deferAppendEllipsis=!0,selectedElement.remove();break}if(removeLastEmptyElements(selectedElement),!selectedElement.contents().length){deferAppendEllipsis=!0,selectedElement.remove();break}getLastTextNode(selectedElement).get(0).nodeValue+=settings.ellipsis}"onEllipsis"==settings.setTitle&&ellipsisApplied||"always"==settings.setTitle?selectedElement.attr("title",originalText):"never"!=settings.setTitle&&selectedElement.removeAttr("title")}})}function ellipsisOnLastTextNode(element){var lastTextNode=getLastTextNode(element);if(lastTextNode.length){var text=lastTextNode.get(0).nodeValue,pos=text.lastIndexOf(" ");return pos>-1?(text=$.trim(text.substring(0,pos)),lastTextNode.get(0).nodeValue=text):lastTextNode.get(0).nodeValue="",!0}return!1}function getLastTextNode(element){if(element.contents().length){var contents=element.contents(),lastNode=contents.eq(contents.length-1);return lastNode.filter(textNodeFilter).length?lastNode:getLastTextNode(lastNode)}element.append("");var contents=element.contents();return contents.eq(contents.length-1)}function removeLastEmptyElements(element){if(element.contents().length){var contents=element.contents(),lastNode=contents.eq(contents.length-1);if(lastNode.filter(textNodeFilter).length){var text=lastNode.get(0).nodeValue;return""==(text=$.trim(text))&&(lastNode.remove(),!0)}for(;removeLastEmptyElements(lastNode););return!lastNode.contents().length&&(lastNode.remove(),!0)}return!1}function textNodeFilter(){return 3===this.nodeType}function addToLiveUpdater(targetSelector,settings){liveUpdatingTargetSelectors[targetSelector]=settings,liveUpdaterIntervalId||(liveUpdaterIntervalId=window.setInterval(function(){doLiveUpdater()},200))}function removeFromLiveUpdater(targetSelector){liveUpdatingTargetSelectors[targetSelector]&&(delete liveUpdatingTargetSelectors[targetSelector],liveUpdatingTargetSelectors.length||liveUpdaterIntervalId&&(window.clearInterval(liveUpdaterIntervalId),liveUpdaterIntervalId=void 0))}function doLiveUpdater(){if(!liveUpdaterRunning){liveUpdaterRunning=!0;for(var targetSelector in liveUpdatingTargetSelectors)$(targetSelector).each(function(){var containerElement,containerData;containerElement=$(this),containerData=containerElement.data("jqae"),containerData.containerWidth==containerElement.width()&&containerData.containerHeight==containerElement.height()||ellipsisOnElement(containerElement,liveUpdatingTargetSelectors[targetSelector])});liveUpdaterRunning=!1}}var liveUpdaterIntervalId,liveUpdatingTargetSelectors={},liveUpdaterRunning=!1,defaultSettings={ellipsis:"...",setTitle:"never",live:!1};$.fn.ellipsis=function(selector,options){var subjectElements,settings;return subjectElements=$(this),"string"!=typeof selector&&(options=selector,selector=void 0),settings=$.extend({},defaultSettings,options),settings.selector=selector,subjectElements.each(function(){ellipsisOnElement($(this),settings)}),settings.live?addToLiveUpdater(subjectElements.selector,settings):removeFromLiveUpdater(subjectElements.selector),this}}(jQuery),function($){$.waterfall=function(){var steps=[],dfrd=$.Deferred(),pointer=0;return $.each(arguments,function(i,a){steps.push(function(){var d,args=[].slice.apply(arguments);"function"==typeof a?(d=a.apply(null,args))&&d.promise||(d=$.Deferred()[!1===d?"reject":"resolve"](d)):d=a&&a.promise?a:$.Deferred()[!1===a?"reject":"resolve"](a),d.fail(function(){dfrd.reject.apply(dfrd,[].slice.apply(arguments))}).done(function(data){pointer++,args.push(data),pointer==steps.length?dfrd.resolve.apply(dfrd,args):steps[pointer].apply(null,args)})})}),steps.length?steps[0]():dfrd.resolve(),dfrd}}(jQuery),function(factory){"function"==typeof define&&define.amd?define(["jquery"],factory):factory("object"==typeof exports?require("jquery"):jQuery)}(function($){function encode(s){return config.raw?s:encodeURIComponent(s)}function decode(s){return config.raw?s:decodeURIComponent(s)}function stringifyCookieValue(value){return encode(config.json?JSON.stringify(value):String(value))}function parseCookieValue(s){0===s.indexOf('"')&&(s=s.slice(1,-1).replace(/\\"/g,'"').replace(/\\\\/g,"\\"));try{return s=decodeURIComponent(s.replace(pluses," ")),config.json?JSON.parse(s):s}catch(e){}}function read(s,converter){var value=config.raw?s:parseCookieValue(s);return $.isFunction(converter)?converter(value):value}var pluses=/\+/g,config=$.cookie=function(key,value,options){if(arguments.length>1&&!$.isFunction(value)){if(options=$.extend({},config.defaults,options),"number"==typeof options.expires){var days=options.expires,t=options.expires=new Date;t.setTime(+t+864e5*days)}return document.cookie=[encode(key),"=",stringifyCookieValue(value),options.expires?"; expires="+options.expires.toUTCString():"",options.path?"; path="+options.path:"",options.domain?"; domain="+options.domain:"",options.secure?"; secure":""].join("")}for(var result=key?void 0:{},cookies=document.cookie?document.cookie.split("; "):[],i=0,l=cookies.length;i<l;i++){var parts=cookies[i].split("="),name=decode(parts.shift()),cookie=parts.join("=");if(key&&key===name){result=read(cookie,value);break}key||void 0===(cookie=read(cookie))||(result[name]=cookie)}return result};config.defaults={},$.removeCookie=function(key,options){return void 0!==$.cookie(key)&&($.cookie(key,"",$.extend({},options,{expires:-1})),!$.cookie(key))}});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),Emitter=function(){function Emitter(){_classCallCheck(this,Emitter)}return _createClass(Emitter,[{key:"on",value:function(event,fn){return this._callbacks=this._callbacks||{},this._callbacks[event]||(this._callbacks[event]=[]),this._callbacks[event].push(fn),this}},{key:"emit",value:function(event){this._callbacks=this._callbacks||{};var callbacks=this._callbacks[event];if(callbacks){for(var _len=arguments.length,args=Array(_len>1?_len-1:0),_key=1;_key<_len;_key++)args[_key-1]=arguments[_key];for(var _iterator=callbacks,_isArray=!0,_i=0,_iterator=_isArray?_iterator:_iterator[Symbol.iterator]();;){var _ref;if(_isArray){if(_i>=_iterator.length)break;_ref=_iterator[_i++]}else{if(_i=_iterator.next(),_i.done)break;_ref=_i.value}_ref.apply(this,args)}}return this}},{key:"off",value:function(event,fn){if(!this._callbacks||0===arguments.length)return this._callbacks={},this;var callbacks=this._callbacks[event];if(!callbacks)return this;if(1===arguments.length)return delete this._callbacks[event],this;for(var i=0;i<callbacks.length;i++){if(callbacks[i]===fn){callbacks.splice(i,1);break}}return this}}]),Emitter}(),Dropzone=function(_Emitter){function Dropzone(el,options){_classCallCheck(this,Dropzone);var _this=_possibleConstructorReturn(this,(Dropzone.__proto__||Object.getPrototypeOf(Dropzone)).call(this)),fallback=void 0,left=void 0;if(_this.element=el,_this.version=Dropzone.version,_this.defaultOptions.previewTemplate=_this.defaultOptions.previewTemplate.replace(/\n*/g,""),_this.clickableElements=[],_this.listeners=[],_this.files=[],"string"==typeof _this.element&&(_this.element=document.querySelector(_this.element)),!_this.element||null==_this.element.nodeType)throw new Error("Invalid dropzone element.");if(_this.element.dropzone)throw new Error("Dropzone already attached.");Dropzone.instances.push(_this),_this.element.dropzone=_this;var elementOptions=null!=(left=Dropzone.optionsForElement(_this.element))?left:{};if(_this.options=Dropzone.extend({},_this.defaultOptions,elementOptions,null!=options?options:{}),_this.options.forceFallback||!Dropzone.isBrowserSupported()){var _ret;return _ret=_this.options.fallback.call(_this),_possibleConstructorReturn(_this,_ret)}if(null==_this.options.url&&(_this.options.url=_this.element.getAttribute("action")),!_this.options.url)throw new Error("No URL provided.");if(_this.options.acceptedFiles&&_this.options.acceptedMimeTypes)throw new Error("You can't provide both 'acceptedFiles' and 'acceptedMimeTypes'. 'acceptedMimeTypes' is deprecated.");if(_this.options.uploadMultiple&&_this.options.chunking)throw new Error("You cannot set both: uploadMultiple and chunking.");return _this.options.acceptedMimeTypes&&(_this.options.acceptedFiles=_this.options.acceptedMimeTypes,delete _this.options.acceptedMimeTypes),null!=_this.options.renameFilename&&(_this.options.renameFile=function(file){return _this.options.renameFilename.call(_this,file.name,file)}),_this.options.method=_this.options.method.toUpperCase(),(fallback=_this.getExistingFallback())&&fallback.parentNode&&fallback.parentNode.removeChild(fallback),!1!==_this.options.previewsContainer&&(_this.options.previewsContainer?_this.previewsContainer=Dropzone.getElement(_this.options.previewsContainer,"previewsContainer"):_this.previewsContainer=_this.element),_this.options.clickable&&(!0===_this.options.clickable?_this.clickableElements=[_this.element]:_this.clickableElements=Dropzone.getElements(_this.options.clickable,"clickable")),_this.init(),_this}return _inherits(Dropzone,_Emitter),_createClass(Dropzone,null,[{key:"initClass",value:function(){this.prototype.Emitter=Emitter,this.prototype.events=["drop","dragstart","dragend","dragenter","dragover","dragleave","addedfile","addedfiles","removedfile","thumbnail","error","errormultiple","processing","processingmultiple","uploadprogress","totaluploadprogress","sending","sendingmultiple","success","successmultiple","canceled","canceledmultiple","complete","completemultiple","reset","maxfilesexceeded","maxfilesreached","queuecomplete"],this.prototype.defaultOptions={url:null,method:"post",withCredentials:!1,timeout:3e4,parallelUploads:2,uploadMultiple:!1,chunking:!1,forceChunking:!1,chunkSize:2e6,parallelChunkUploads:!1,retryChunks:!1,retryChunksLimit:3,maxFilesize:256,paramName:"file",createImageThumbnails:!0,maxThumbnailFilesize:10,thumbnailWidth:120,thumbnailHeight:120,thumbnailMethod:"crop",resizeWidth:null,resizeHeight:null,resizeMimeType:null,resizeQuality:.8,resizeMethod:"contain",filesizeBase:1e3,maxFiles:null,headers:null,clickable:!0,ignoreHiddenFiles:!0,acceptedFiles:null,acceptedMimeTypes:null,autoProcessQueue:!0,autoQueue:!0,addRemoveLinks:!1,previewsContainer:null,hiddenInputContainer:"body",capture:null,renameFilename:null,renameFile:null,forceFallback:!1,dictDefaultMessage:"Drop files here to upload",dictFallbackMessage:"Your browser does not support drag'n'drop file uploads.",dictFallbackText:"Please use the fallback form below to upload your files like in the olden days.",dictFileTooBig:"File is too big ({{filesize}}MiB). Max filesize: {{maxFilesize}}MiB.",dictInvalidFileType:"You can't upload files of this type.",dictResponseError:"Server responded with {{statusCode}} code.",dictCancelUpload:"Cancel upload",dictUploadCanceled:"Upload canceled.",dictCancelUploadConfirmation:"Are you sure you want to cancel this upload?",dictRemoveFile:"Remove file",dictRemoveFileConfirmation:null,dictMaxFilesExceeded:"You can not upload any more files.",dictFileSizeUnits:{tb:"TB",gb:"GB",mb:"MB",kb:"KB",b:"b"},init:function(){},params:function(files,xhr,chunk){if(chunk)return{dzuuid:chunk.file.upload.uuid,dzchunkindex:chunk.index,dztotalfilesize:chunk.file.size,dzchunksize:this.options.chunkSize,dztotalchunkcount:chunk.file.upload.totalChunkCount,dzchunkbyteoffset:chunk.index*this.options.chunkSize}},accept:function(file,done){return done()},chunksUploaded:function(file,done){done()},fallback:function(){var messageElement=void 0;this.element.className=this.element.className+" dz-browser-not-supported";for(var _iterator2=this.element.getElementsByTagName("div"),_isArray2=!0,_i2=0,_iterator2=_isArray2?_iterator2:_iterator2[Symbol.iterator]();;){var _ref2;if(_isArray2){if(_i2>=_iterator2.length)break;_ref2=_iterator2[_i2++]}else{if(_i2=_iterator2.next(),_i2.done)break;_ref2=_i2.value}var child=_ref2;if(/(^| )dz-message($| )/.test(child.className)){messageElement=child,child.className="dz-message";break}}messageElement||(messageElement=Dropzone.createElement('<div class="dz-message"><span></span></div>'),this.element.appendChild(messageElement));var span=messageElement.getElementsByTagName("span")[0];return span&&(null!=span.textContent?span.textContent=this.options.dictFallbackMessage:null!=span.innerText&&(span.innerText=this.options.dictFallbackMessage)),this.element.appendChild(this.getFallbackForm())},resize:function(file,width,height,resizeMethod){var info={srcX:0,srcY:0,srcWidth:file.width,srcHeight:file.height},srcRatio=file.width/file.height;null==width&&null==height?(width=info.srcWidth,height=info.srcHeight):null==width?width=height*srcRatio:null==height&&(height=width/srcRatio),width=Math.min(width,info.srcWidth),height=Math.min(height,info.srcHeight);var trgRatio=width/height;if(info.srcWidth>width||info.srcHeight>height)if("crop"===resizeMethod)srcRatio>trgRatio?(info.srcHeight=file.height,info.srcWidth=info.srcHeight*trgRatio):(info.srcWidth=file.width,info.srcHeight=info.srcWidth/trgRatio);else{if("contain"!==resizeMethod)throw new Error("Unknown resizeMethod '"+resizeMethod+"'");srcRatio>trgRatio?height=width/srcRatio:width=height*srcRatio}return info.srcX=(file.width-info.srcWidth)/2,info.srcY=(file.height-info.srcHeight)/2,info.trgWidth=width,info.trgHeight=height,info},transformFile:function(file,done){return(this.options.resizeWidth||this.options.resizeHeight)&&file.type.match(/image.*/)?this.resizeImage(file,this.options.resizeWidth,this.options.resizeHeight,this.options.resizeMethod,done):done(file)},previewTemplate:'<div class="dz-preview dz-file-preview">\n  <div class="dz-image"><img data-dz-thumbnail /></div>\n  <div class="dz-details">\n    <div class="dz-size"><span data-dz-size></span></div>\n    <div class="dz-filename"><span data-dz-name></span></div>\n  </div>\n  <div class="dz-progress"><span class="dz-upload" data-dz-uploadprogress></span></div>\n  <div class="dz-error-message"><span data-dz-errormessage></span></div>\n  <div class="dz-success-mark">\n    <svg width="54px" height="54px" viewBox="0 0 54 54" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:sketch="http://www.bohemiancoding.com/sketch/ns">\n      <title>Check</title>\n      <defs></defs>\n      <g id="Page-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd" sketch:type="MSPage">\n        <path d="M23.5,31.8431458 L17.5852419,25.9283877 C16.0248253,24.3679711 13.4910294,24.366835 11.9289322,25.9289322 C10.3700136,27.4878508 10.3665912,30.0234455 11.9283877,31.5852419 L20.4147581,40.0716123 C20.5133999,40.1702541 20.6159315,40.2626649 20.7218615,40.3488435 C22.2835669,41.8725651 24.794234,41.8626202 26.3461564,40.3106978 L43.3106978,23.3461564 C44.8771021,21.7797521 44.8758057,19.2483887 43.3137085,17.6862915 C41.7547899,16.1273729 39.2176035,16.1255422 37.6538436,17.6893022 L23.5,31.8431458 Z M27,53 C41.3594035,53 53,41.3594035 53,27 C53,12.6405965 41.3594035,1 27,1 C12.6405965,1 1,12.6405965 1,27 C1,41.3594035 12.6405965,53 27,53 Z" id="Oval-2" stroke-opacity="0.198794158" stroke="#747474" fill-opacity="0.816519475" fill="#FFFFFF" sketch:type="MSShapeGroup"></path>\n      </g>\n    </svg>\n  </div>\n  <div class="dz-error-mark">\n    <svg width="54px" height="54px" viewBox="0 0 54 54" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:sketch="http://www.bohemiancoding.com/sketch/ns">\n      <title>Error</title>\n      <defs></defs>\n      <g id="Page-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd" sketch:type="MSPage">\n        <g id="Check-+-Oval-2" sketch:type="MSLayerGroup" stroke="#747474" stroke-opacity="0.198794158" fill="#FFFFFF" fill-opacity="0.816519475">\n          <path d="M32.6568542,29 L38.3106978,23.3461564 C39.8771021,21.7797521 39.8758057,19.2483887 38.3137085,17.6862915 C36.7547899,16.1273729 34.2176035,16.1255422 32.6538436,17.6893022 L27,23.3431458 L21.3461564,17.6893022 C19.7823965,16.1255422 17.2452101,16.1273729 15.6862915,17.6862915 C14.1241943,19.2483887 14.1228979,21.7797521 15.6893022,23.3461564 L21.3431458,29 L15.6893022,34.6538436 C14.1228979,36.2202479 14.1241943,38.7516113 15.6862915,40.3137085 C17.2452101,41.8726271 19.7823965,41.8744578 21.3461564,40.3106978 L27,34.6568542 L32.6538436,40.3106978 C34.2176035,41.8744578 36.7547899,41.8726271 38.3137085,40.3137085 C39.8758057,38.7516113 39.8771021,36.2202479 38.3106978,34.6538436 L32.6568542,29 Z M27,53 C41.3594035,53 53,41.3594035 53,27 C53,12.6405965 41.3594035,1 27,1 C12.6405965,1 1,12.6405965 1,27 C1,41.3594035 12.6405965,53 27,53 Z" id="Oval-2" sketch:type="MSShapeGroup"></path>\n        </g>\n      </g>\n    </svg>\n  </div>\n</div>',drop:function(e){return this.element.classList.remove("dz-drag-hover")},dragstart:function(e){},dragend:function(e){return this.element.classList.remove("dz-drag-hover")},dragenter:function(e){return this.element.classList.add("dz-drag-hover")},dragover:function(e){return this.element.classList.add("dz-drag-hover")},dragleave:function(e){return this.element.classList.remove("dz-drag-hover")},paste:function(e){},reset:function(){return this.element.classList.remove("dz-started")},addedfile:function(file){var _this2=this;if(this.element===this.previewsContainer&&this.element.classList.add("dz-started"),this.previewsContainer){file.previewElement=Dropzone.createElement(this.options.previewTemplate.trim()),file.previewTemplate=file.previewElement,this.previewsContainer.appendChild(file.previewElement);for(var _iterator3=file.previewElement.querySelectorAll("[data-dz-name]"),_isArray3=!0,_i3=0,_iterator3=_isArray3?_iterator3:_iterator3[Symbol.iterator]();;){var _ref3;if(_isArray3){if(_i3>=_iterator3.length)break;_ref3=_iterator3[_i3++]}else{if(_i3=_iterator3.next(),_i3.done)break;_ref3=_i3.value}var node=_ref3;node.textContent=file.name}for(var _iterator4=file.previewElement.querySelectorAll("[data-dz-size]"),_isArray4=!0,_i4=0,_iterator4=_isArray4?_iterator4:_iterator4[Symbol.iterator]();;){if(_isArray4){if(_i4>=_iterator4.length)break;node=_iterator4[_i4++]}else{if(_i4=_iterator4.next(),_i4.done)break;node=_i4.value}node.innerHTML=this.filesize(file.size)}this.options.addRemoveLinks&&(file._removeLink=Dropzone.createElement('<a class="dz-remove" href="javascript:undefined;" data-dz-remove>'+this.options.dictRemoveFile+"</a>"),file.previewElement.appendChild(file._removeLink));for(var removeFileEvent=function(e){return e.preventDefault(),e.stopPropagation(),file.status===Dropzone.UPLOADING?Dropzone.confirm(_this2.options.dictCancelUploadConfirmation,function(){return _this2.removeFile(file)}):_this2.options.dictRemoveFileConfirmation?Dropzone.confirm(_this2.options.dictRemoveFileConfirmation,function(){return _this2.removeFile(file)}):_this2.removeFile(file)},_iterator5=file.previewElement.querySelectorAll("[data-dz-remove]"),_isArray5=!0,_i5=0,_iterator5=_isArray5?_iterator5:_iterator5[Symbol.iterator]();;){var _ref4;if(_isArray5){if(_i5>=_iterator5.length)break;_ref4=_iterator5[_i5++]}else{if(_i5=_iterator5.next(),_i5.done)break;_ref4=_i5.value}_ref4.addEventListener("click",removeFileEvent)}}},removedfile:function(file){return null!=file.previewElement&&null!=file.previewElement.parentNode&&file.previewElement.parentNode.removeChild(file.previewElement),this._updateMaxFilesReachedClass()},thumbnail:function(file,dataUrl){if(file.previewElement){file.previewElement.classList.remove("dz-file-preview");for(var _iterator6=file.previewElement.querySelectorAll("[data-dz-thumbnail]"),_isArray6=!0,_i6=0,_iterator6=_isArray6?_iterator6:_iterator6[Symbol.iterator]();;){var _ref5;if(_isArray6){if(_i6>=_iterator6.length)break;_ref5=_iterator6[_i6++]}else{if(_i6=_iterator6.next(),_i6.done)break;_ref5=_i6.value}var thumbnailElement=_ref5;thumbnailElement.alt=file.name,thumbnailElement.src=dataUrl}return setTimeout(function(){return file.previewElement.classList.add("dz-image-preview")},1)}},error:function(file,message){if(file.previewElement){file.previewElement.classList.add("dz-error"),"String"!=typeof message&&message.error&&(message=message.error);for(var _iterator7=file.previewElement.querySelectorAll("[data-dz-errormessage]"),_isArray7=!0,_i7=0,_iterator7=_isArray7?_iterator7:_iterator7[Symbol.iterator]();;){var _ref6;if(_isArray7){if(_i7>=_iterator7.length)break;_ref6=_iterator7[_i7++]}else{if(_i7=_iterator7.next(),_i7.done)break;_ref6=_i7.value}_ref6.textContent=message}}},errormultiple:function(){},processing:function(file){if(file.previewElement&&(file.previewElement.classList.add("dz-processing"),file._removeLink))return file._removeLink.innerHTML=this.options.dictCancelUpload},processingmultiple:function(){},uploadprogress:function(file,progress,bytesSent){if(file.previewElement)for(var _iterator8=file.previewElement.querySelectorAll("[data-dz-uploadprogress]"),_isArray8=!0,_i8=0,_iterator8=_isArray8?_iterator8:_iterator8[Symbol.iterator]();;){var _ref7;if(_isArray8){if(_i8>=_iterator8.length)break;_ref7=_iterator8[_i8++]}else{if(_i8=_iterator8.next(),_i8.done)break;_ref7=_i8.value}var node=_ref7;"PROGRESS"===node.nodeName?node.value=progress:node.style.width=progress+"%"}},totaluploadprogress:function(){},sending:function(){},sendingmultiple:function(){},success:function(file){if(file.previewElement)return file.previewElement.classList.add("dz-success")},successmultiple:function(){},canceled:function(file){return this.emit("error",file,this.options.dictUploadCanceled)},canceledmultiple:function(){},complete:function(file){if(file._removeLink&&(file._removeLink.innerHTML=this.options.dictRemoveFile),file.previewElement)return file.previewElement.classList.add("dz-complete")},completemultiple:function(){},maxfilesexceeded:function(){},maxfilesreached:function(){},queuecomplete:function(){},addedfiles:function(){}},this.prototype._thumbnailQueue=[],this.prototype._processingThumbnail=!1}},{key:"extend",value:function(target){for(var _len2=arguments.length,objects=Array(_len2>1?_len2-1:0),_key2=1;_key2<_len2;_key2++)objects[_key2-1]=arguments[_key2];for(var _iterator9=objects,_isArray9=!0,_i9=0,_iterator9=_isArray9?_iterator9:_iterator9[Symbol.iterator]();;){var _ref8;if(_isArray9){if(_i9>=_iterator9.length)break;_ref8=_iterator9[_i9++]}else{if(_i9=_iterator9.next(),_i9.done)break;_ref8=_i9.value}var object=_ref8;for(var key in object){var val=object[key];target[key]=val}}return target}}]),_createClass(Dropzone,[{key:"getAcceptedFiles",value:function(){return this.files.filter(function(file){return file.accepted}).map(function(file){return file})}},{key:"getRejectedFiles",value:function(){return this.files.filter(function(file){return!file.accepted}).map(function(file){return file})}},{key:"getFilesWithStatus",value:function(status){return this.files.filter(function(file){return file.status===status}).map(function(file){return file})}},{key:"getQueuedFiles",value:function(){return this.getFilesWithStatus(Dropzone.QUEUED)}},{key:"getUploadingFiles",value:function(){return this.getFilesWithStatus(Dropzone.UPLOADING)}},{key:"getAddedFiles",value:function(){return this.getFilesWithStatus(Dropzone.ADDED)}},{key:"getActiveFiles",value:function(){return this.files.filter(function(file){return file.status===Dropzone.UPLOADING||file.status===Dropzone.QUEUED}).map(function(file){return file})}},{key:"init",value:function(){var _this3=this;if("form"===this.element.tagName&&this.element.setAttribute("enctype","multipart/form-data"),this.element.classList.contains("dropzone")&&!this.element.querySelector(".dz-message")&&this.element.appendChild(Dropzone.createElement('<div class="dz-default dz-message"><span>'+this.options.dictDefaultMessage+"</span></div>")),this.clickableElements.length){(function setupHiddenFileInput(){return _this3.hiddenFileInput&&_this3.hiddenFileInput.parentNode.removeChild(_this3.hiddenFileInput),_this3.hiddenFileInput=document.createElement("input"),_this3.hiddenFileInput.setAttribute("type","file"),(null===_this3.options.maxFiles||_this3.options.maxFiles>1)&&_this3.hiddenFileInput.setAttribute("multiple","multiple"),_this3.hiddenFileInput.className="dz-hidden-input",null!==_this3.options.acceptedFiles&&_this3.hiddenFileInput.setAttribute("accept",_this3.options.acceptedFiles),null!==_this3.options.capture&&_this3.hiddenFileInput.setAttribute("capture",_this3.options.capture),_this3.hiddenFileInput.style.visibility="hidden",_this3.hiddenFileInput.style.position="absolute",_this3.hiddenFileInput.style.top="0",_this3.hiddenFileInput.style.left="0",_this3.hiddenFileInput.style.height="0",_this3.hiddenFileInput.style.width="0",Dropzone.getElement(_this3.options.hiddenInputContainer,"hiddenInputContainer").appendChild(_this3.hiddenFileInput),_this3.hiddenFileInput.addEventListener("change",function(){var files=_this3.hiddenFileInput.files;if(files.length)for(var _iterator10=files,_isArray10=!0,_i10=0,_iterator10=_isArray10?_iterator10:_iterator10[Symbol.iterator]();;){var _ref9;if(_isArray10){if(_i10>=_iterator10.length)break;_ref9=_iterator10[_i10++]}else{if(_i10=_iterator10.next(),_i10.done)break;_ref9=_i10.value}var file=_ref9;_this3.addFile(file)}return _this3.emit("addedfiles",files),setupHiddenFileInput()})})()}this.URL=null!==window.URL?window.URL:window.webkitURL;for(var _iterator11=this.events,_isArray11=!0,_i11=0,_iterator11=_isArray11?_iterator11:_iterator11[Symbol.iterator]();;){var _ref10;if(_isArray11){if(_i11>=_iterator11.length)break;_ref10=_iterator11[_i11++]}else{if(_i11=_iterator11.next(),_i11.done)break;_ref10=_i11.value}var eventName=_ref10;this.on(eventName,this.options[eventName])}this.on("uploadprogress",function(){return _this3.updateTotalUploadProgress()}),this.on("removedfile",function(){return _this3.updateTotalUploadProgress()}),this.on("canceled",function(file){return _this3.emit("complete",file)}),this.on("complete",function(file){if(0===_this3.getAddedFiles().length&&0===_this3.getUploadingFiles().length&&0===_this3.getQueuedFiles().length)return setTimeout(function(){return _this3.emit("queuecomplete")},0)});var noPropagation=function(e){return e.stopPropagation(),e.preventDefault?e.preventDefault():e.returnValue=!1};return this.listeners=[{element:this.element,events:{dragstart:function(e){return _this3.emit("dragstart",e)},dragenter:function(e){return noPropagation(e),_this3.emit("dragenter",e)},dragover:function(e){var efct=void 0;try{efct=e.dataTransfer.effectAllowed}catch(error){}return e.dataTransfer.dropEffect="move"===efct||"linkMove"===efct?"move":"copy",noPropagation(e),_this3.emit("dragover",e)},dragleave:function(e){return _this3.emit("dragleave",e)},drop:function(e){return noPropagation(e),_this3.drop(e)},dragend:function(e){return _this3.emit("dragend",e)}}}],this.clickableElements.forEach(function(clickableElement){return _this3.listeners.push({element:clickableElement,events:{click:function(evt){return(clickableElement!==_this3.element||evt.target===_this3.element||Dropzone.elementInside(evt.target,_this3.element.querySelector(".dz-message")))&&_this3.hiddenFileInput.click(),!0}}})}),this.enable(),this.options.init.call(this)}},{key:"destroy",value:function(){return this.disable(),this.removeAllFiles(!0),(null!=this.hiddenFileInput?this.hiddenFileInput.parentNode:void 0)&&(this.hiddenFileInput.parentNode.removeChild(this.hiddenFileInput),this.hiddenFileInput=null),delete this.element.dropzone,Dropzone.instances.splice(Dropzone.instances.indexOf(this),1)}},{key:"updateTotalUploadProgress",value:function(){var totalUploadProgress=void 0,totalBytesSent=0,totalBytes=0;if(this.getActiveFiles().length){for(var _iterator12=this.getActiveFiles(),_isArray12=!0,_i12=0,_iterator12=_isArray12?_iterator12:_iterator12[Symbol.iterator]();;){var _ref11;if(_isArray12){if(_i12>=_iterator12.length)break;_ref11=_iterator12[_i12++]}else{if(_i12=_iterator12.next(),_i12.done)break;_ref11=_i12.value}var file=_ref11;totalBytesSent+=file.upload.bytesSent,totalBytes+=file.upload.total}totalUploadProgress=100*totalBytesSent/totalBytes}else totalUploadProgress=100;return this.emit("totaluploadprogress",totalUploadProgress,totalBytes,totalBytesSent)}},{key:"_getParamName",value:function(n){return"function"==typeof this.options.paramName?this.options.paramName(n):this.options.paramName+(this.options.uploadMultiple?"["+n+"]":"")}},{key:"_renameFile",value:function(file){return"function"!=typeof this.options.renameFile?file.name:this.options.renameFile(file)}},{key:"getFallbackForm",value:function(){var existingFallback=void 0,form=void 0;if(existingFallback=this.getExistingFallback())return existingFallback;var fieldsString='<div class="dz-fallback">';this.options.dictFallbackText&&(fieldsString+="<p>"+this.options.dictFallbackText+"</p>"),fieldsString+='<input type="file" name="'+this._getParamName(0)+'" '+(this.options.uploadMultiple?'multiple="multiple"':void 0)+' /><input type="submit" value="Upload!"></div>';var fields=Dropzone.createElement(fieldsString);return"FORM"!==this.element.tagName?(form=Dropzone.createElement('<form action="'+this.options.url+'" enctype="multipart/form-data" method="'+this.options.method+'"></form>'),form.appendChild(fields)):(this.element.setAttribute("enctype","multipart/form-data"),this.element.setAttribute("method",this.options.method)),null!=form?form:fields}},{key:"getExistingFallback",value:function(){for(var getFallback=function(elements){for(var _iterator13=elements,_isArray13=!0,_i13=0,_iterator13=_isArray13?_iterator13:_iterator13[Symbol.iterator]();;){var _ref12;if(_isArray13){if(_i13>=_iterator13.length)break;_ref12=_iterator13[_i13++]}else{if(_i13=_iterator13.next(),_i13.done)break;_ref12=_i13.value}var el=_ref12;if(/(^| )fallback($| )/.test(el.className))return el}},_arr=["div","form"],_i14=0;_i14<_arr.length;_i14++){var fallback,tagName=_arr[_i14];if(fallback=getFallback(this.element.getElementsByTagName(tagName)))return fallback}}},{key:"setupEventListeners",value:function(){return this.listeners.map(function(elementListeners){return function(){var result=[];for(var event in elementListeners.events){var listener=elementListeners.events[event];result.push(elementListeners.element.addEventListener(event,listener,!1))}return result}()})}},{key:"removeEventListeners",value:function(){return this.listeners.map(function(elementListeners){return function(){var result=[];for(var event in elementListeners.events){var listener=elementListeners.events[event];result.push(elementListeners.element.removeEventListener(event,listener,!1))}return result}()})}},{key:"disable",value:function(){var _this4=this;return this.clickableElements.forEach(function(element){return element.classList.remove("dz-clickable")}),this.removeEventListeners(),this.disabled=!0,this.files.map(function(file){return _this4.cancelUpload(file)})}},{key:"enable",value:function(){return delete this.disabled,this.clickableElements.forEach(function(element){return element.classList.add("dz-clickable")}),this.setupEventListeners()}},{key:"filesize",value:function(size){var selectedSize=0,selectedUnit="b";if(size>0){for(var units=["tb","gb","mb","kb","b"],i=0;i<units.length;i++){var unit=units[i];if(size>=Math.pow(this.options.filesizeBase,4-i)/10){selectedSize=size/Math.pow(this.options.filesizeBase,4-i),selectedUnit=unit;break}}selectedSize=Math.round(10*selectedSize)/10}return"<strong>"+selectedSize+"</strong> "+this.options.dictFileSizeUnits[selectedUnit]}},{key:"_updateMaxFilesReachedClass",value:function(){return null!=this.options.maxFiles&&this.getAcceptedFiles().length>=this.options.maxFiles?(this.getAcceptedFiles().length===this.options.maxFiles&&this.emit("maxfilesreached",this.files),this.element.classList.add("dz-max-files-reached")):this.element.classList.remove("dz-max-files-reached")}},{key:"drop",value:function(e){if(e.dataTransfer){this.emit("drop",e);for(var files=[],i=0;i<e.dataTransfer.files.length;i++)files[i]=e.dataTransfer.files[i];if(this.emit("addedfiles",files),files.length){var items=e.dataTransfer.items;items&&items.length&&null!=items[0].webkitGetAsEntry?this._addFilesFromItems(items):this.handleFiles(files)}}}},{key:"paste",value:function(e){if(null!=__guard__(null!=e?e.clipboardData:void 0,function(x){return x.items})){this.emit("paste",e);var items=e.clipboardData.items;return items.length?this._addFilesFromItems(items):void 0}}},{key:"handleFiles",value:function(files){for(var _iterator14=files,_isArray14=!0,_i15=0,_iterator14=_isArray14?_iterator14:_iterator14[Symbol.iterator]();;){var _ref13;if(_isArray14){if(_i15>=_iterator14.length)break;_ref13=_iterator14[_i15++]}else{if(_i15=_iterator14.next(),_i15.done)break;_ref13=_i15.value}var file=_ref13;this.addFile(file)}}},{key:"_addFilesFromItems",value:function(items){var _this5=this;return function(){for(var result=[],_iterator15=items,_isArray15=!0,_i16=0,_iterator15=_isArray15?_iterator15:_iterator15[Symbol.iterator]();;){var _ref14;if(_isArray15){if(_i16>=_iterator15.length)break;_ref14=_iterator15[_i16++]}else{if(_i16=_iterator15.next(),_i16.done)break;_ref14=_i16.value}var entry,item=_ref14;null!=item.webkitGetAsEntry&&(entry=item.webkitGetAsEntry())?entry.isFile?result.push(_this5.addFile(item.getAsFile())):entry.isDirectory?result.push(_this5._addFilesFromDirectory(entry,entry.name)):result.push(void 0):null!=item.getAsFile&&(null==item.kind||"file"===item.kind)?result.push(_this5.addFile(item.getAsFile())):result.push(void 0)}return result}()}},{key:"_addFilesFromDirectory",value:function(directory,path){var _this6=this,dirReader=directory.createReader(),errorHandler=function(error){return __guardMethod__(console,"log",function(o){return o.log(error)})};return function readEntries(){return dirReader.readEntries(function(entries){if(entries.length>0){for(var _iterator16=entries,_isArray16=!0,_i17=0,_iterator16=_isArray16?_iterator16:_iterator16[Symbol.iterator]();;){var _ref15;if(_isArray16){if(_i17>=_iterator16.length)break;_ref15=_iterator16[_i17++]}else{if(_i17=_iterator16.next(),_i17.done)break;_ref15=_i17.value}var entry=_ref15;entry.isFile?entry.file(function(file){if(!_this6.options.ignoreHiddenFiles||"."!==file.name.substring(0,1))return file.fullPath=path+"/"+file.name,_this6.addFile(file)}):entry.isDirectory&&_this6._addFilesFromDirectory(entry,path+"/"+entry.name)}readEntries()}return null},errorHandler)}()}},{key:"accept",value:function(file,done){return this.options.maxFilesize&&file.size>1024*this.options.maxFilesize*1024?done(this.options.dictFileTooBig.replace("{{filesize}}",Math.round(file.size/1024/10.24)/100).replace("{{maxFilesize}}",this.options.maxFilesize)):Dropzone.isValidFile(file,this.options.acceptedFiles)?null!=this.options.maxFiles&&this.getAcceptedFiles().length>=this.options.maxFiles?(done(this.options.dictMaxFilesExceeded.replace("{{maxFiles}}",this.options.maxFiles)),this.emit("maxfilesexceeded",file)):this.options.accept.call(this,file,done):done(this.options.dictInvalidFileType)}},{key:"addFile",value:function(file){var _this7=this;return file.upload={uuid:Dropzone.uuidv4(),progress:0,total:file.size,bytesSent:0,filename:this._renameFile(file),chunked:this.options.chunking&&(this.options.forceChunking||file.size>this.options.chunkSize),totalChunkCount:Math.ceil(file.size/this.options.chunkSize)},this.files.push(file),file.status=Dropzone.ADDED,this.emit("addedfile",file),this._enqueueThumbnail(file),this.accept(file,function(error){return error?(file.accepted=!1,_this7._errorProcessing([file],error)):(file.accepted=!0,_this7.options.autoQueue&&_this7.enqueueFile(file)),_this7._updateMaxFilesReachedClass()})}},{key:"enqueueFiles",value:function(files){for(var _iterator17=files,_isArray17=!0,_i18=0,_iterator17=_isArray17?_iterator17:_iterator17[Symbol.iterator]();;){var _ref16;if(_isArray17){if(_i18>=_iterator17.length)break;_ref16=_iterator17[_i18++]}else{if(_i18=_iterator17.next(),_i18.done)break;_ref16=_i18.value}var file=_ref16;this.enqueueFile(file)}return null}},{key:"enqueueFile",value:function(file){var _this8=this;if(file.status!==Dropzone.ADDED||!0!==file.accepted)throw new Error("This file can't be queued because it has already been processed or was rejected.");if(file.status=Dropzone.QUEUED,this.options.autoProcessQueue)return setTimeout(function(){return _this8.processQueue()},0)}},{key:"_enqueueThumbnail",value:function(file){var _this9=this;if(this.options.createImageThumbnails&&file.type.match(/image.*/)&&file.size<=1024*this.options.maxThumbnailFilesize*1024)return this._thumbnailQueue.push(file),setTimeout(function(){return _this9._processThumbnailQueue()},0)}},{key:"_processThumbnailQueue",value:function(){var _this10=this;if(!this._processingThumbnail&&0!==this._thumbnailQueue.length){this._processingThumbnail=!0;var file=this._thumbnailQueue.shift();return this.createThumbnail(file,this.options.thumbnailWidth,this.options.thumbnailHeight,this.options.thumbnailMethod,!0,function(dataUrl){return _this10.emit("thumbnail",file,dataUrl),_this10._processingThumbnail=!1,_this10._processThumbnailQueue()})}}},{key:"removeFile",value:function(file){if(file.status===Dropzone.UPLOADING&&this.cancelUpload(file),this.files=without(this.files,file),this.emit("removedfile",file),0===this.files.length)return this.emit("reset")}},{key:"removeAllFiles",value:function(cancelIfNecessary){null==cancelIfNecessary&&(cancelIfNecessary=!1);for(var _iterator18=this.files.slice(),_isArray18=!0,_i19=0,_iterator18=_isArray18?_iterator18:_iterator18[Symbol.iterator]();;){var _ref17;if(_isArray18){if(_i19>=_iterator18.length)break;_ref17=_iterator18[_i19++]}else{if(_i19=_iterator18.next(),_i19.done)break;_ref17=_i19.value}var file=_ref17;(file.status!==Dropzone.UPLOADING||cancelIfNecessary)&&this.removeFile(file)}return null}},{key:"resizeImage",value:function(file,width,height,resizeMethod,callback){var _this11=this;return this.createThumbnail(file,width,height,resizeMethod,!0,function(dataUrl,canvas){if(null==canvas)return callback(file);var resizeMimeType=_this11.options.resizeMimeType;null==resizeMimeType&&(resizeMimeType=file.type);var resizedDataURL=canvas.toDataURL(resizeMimeType,_this11.options.resizeQuality);return"image/jpeg"!==resizeMimeType&&"image/jpg"!==resizeMimeType||(resizedDataURL=ExifRestore.restore(file.dataURL,resizedDataURL)),callback(Dropzone.dataURItoBlob(resizedDataURL))})}},{key:"createThumbnail",value:function(file,width,height,resizeMethod,fixOrientation,callback){var _this12=this,fileReader=new FileReader;return fileReader.onload=function(){return file.dataURL=fileReader.result,"image/svg+xml"===file.type?void(null!=callback&&callback(fileReader.result)):_this12.createThumbnailFromUrl(file,width,height,resizeMethod,fixOrientation,callback)},fileReader.readAsDataURL(file)}},{key:"createThumbnailFromUrl",value:function(file,width,height,resizeMethod,fixOrientation,callback,crossOrigin){var _this13=this,img=document.createElement("img");return crossOrigin&&(img.crossOrigin=crossOrigin),img.onload=function(){var loadExif=function(callback){return callback(1)};return"undefined"!=typeof EXIF&&null!==EXIF&&fixOrientation&&(loadExif=function(callback){return EXIF.getData(img,function(){return callback(EXIF.getTag(this,"Orientation"))})}),loadExif(function(orientation){file.width=img.width,file.height=img.height;var resizeInfo=_this13.options.resize.call(_this13,file,width,height,resizeMethod),canvas=document.createElement("canvas"),ctx=canvas.getContext("2d");switch(canvas.width=resizeInfo.trgWidth,canvas.height=resizeInfo.trgHeight,orientation>4&&(canvas.width=resizeInfo.trgHeight,canvas.height=resizeInfo.trgWidth),orientation){case 2:ctx.translate(canvas.width,0),ctx.scale(-1,1);break;case 3:ctx.translate(canvas.width,canvas.height),ctx.rotate(Math.PI);break;case 4:ctx.translate(0,canvas.height),ctx.scale(1,-1);break;case 5:ctx.rotate(.5*Math.PI),ctx.scale(1,-1);break;case 6:ctx.rotate(.5*Math.PI),ctx.translate(0,-canvas.width);break;case 7:ctx.rotate(.5*Math.PI),ctx.translate(canvas.height,-canvas.width),ctx.scale(-1,1);break;case 8:ctx.rotate(-.5*Math.PI),ctx.translate(-canvas.height,0)}drawImageIOSFix(ctx,img,null!=resizeInfo.srcX?resizeInfo.srcX:0,null!=resizeInfo.srcY?resizeInfo.srcY:0,resizeInfo.srcWidth,resizeInfo.srcHeight,null!=resizeInfo.trgX?resizeInfo.trgX:0,null!=resizeInfo.trgY?resizeInfo.trgY:0,resizeInfo.trgWidth,resizeInfo.trgHeight);var thumbnail=canvas.toDataURL("image/png");if(null!=callback)return callback(thumbnail,canvas)})},null!=callback&&(img.onerror=callback),img.src=file.dataURL}},{key:"processQueue",value:function(){var parallelUploads=this.options.parallelUploads,processingLength=this.getUploadingFiles().length,i=processingLength;if(!(processingLength>=parallelUploads)){var queuedFiles=this.getQueuedFiles();if(queuedFiles.length>0){if(this.options.uploadMultiple)return this.processFiles(queuedFiles.slice(0,parallelUploads-processingLength));for(;i<parallelUploads;){if(!queuedFiles.length)return;this.processFile(queuedFiles.shift()),i++}}}}},{key:"processFile",value:function(file){return this.processFiles([file])}},{key:"processFiles",value:function(files){for(var _iterator19=files,_isArray19=!0,_i20=0,_iterator19=_isArray19?_iterator19:_iterator19[Symbol.iterator]();;){var _ref18;if(_isArray19){if(_i20>=_iterator19.length)break;_ref18=_iterator19[_i20++]}else{if(_i20=_iterator19.next(),_i20.done)break;_ref18=_i20.value}var file=_ref18;file.processing=!0,file.status=Dropzone.UPLOADING,this.emit("processing",file)}return this.options.uploadMultiple&&this.emit("processingmultiple",files),this.uploadFiles(files)}},{key:"_getFilesWithXhr",value:function(xhr){return this.files.filter(function(file){return file.xhr===xhr}).map(function(file){return file})}},{key:"cancelUpload",value:function(file){if(file.status===Dropzone.UPLOADING){for(var groupedFiles=this._getFilesWithXhr(file.xhr),_iterator20=groupedFiles,_isArray20=!0,_i21=0,_iterator20=_isArray20?_iterator20:_iterator20[Symbol.iterator]();;){var _ref19;if(_isArray20){if(_i21>=_iterator20.length)break;_ref19=_iterator20[_i21++]}else{if(_i21=_iterator20.next(),_i21.done)break;_ref19=_i21.value}_ref19.status=Dropzone.CANCELED}void 0!==file.xhr&&file.xhr.abort();for(var _iterator21=groupedFiles,_isArray21=!0,_i22=0,_iterator21=_isArray21?_iterator21:_iterator21[Symbol.iterator]();;){var _ref20;if(_isArray21){if(_i22>=_iterator21.length)break;_ref20=_iterator21[_i22++]}else{if(_i22=_iterator21.next(),_i22.done)break;_ref20=_i22.value}var _groupedFile=_ref20;this.emit("canceled",_groupedFile)}this.options.uploadMultiple&&this.emit("canceledmultiple",groupedFiles)}else file.status!==Dropzone.ADDED&&file.status!==Dropzone.QUEUED||(file.status=Dropzone.CANCELED,this.emit("canceled",file),this.options.uploadMultiple&&this.emit("canceledmultiple",[file]));if(this.options.autoProcessQueue)return this.processQueue()}},{key:"resolveOption",value:function(option){if("function"==typeof option){for(var _len3=arguments.length,args=Array(_len3>1?_len3-1:0),_key3=1;_key3<_len3;_key3++)args[_key3-1]=arguments[_key3];return option.apply(this,args)}return option}},{key:"uploadFile",value:function(file){return this.uploadFiles([file])}},{key:"uploadFiles",value:function(files){var _this14=this;this._transformFiles(files,function(transformedFiles){if(files[0].upload.chunked){var file=files[0],transformedFile=transformedFiles[0],startedChunkCount=0;file.upload.chunks=[];var handleNextChunk=function(){for(var chunkIndex=0;void 0!==file.upload.chunks[chunkIndex];)chunkIndex++;if(!(chunkIndex>=file.upload.totalChunkCount)){startedChunkCount++;var start=chunkIndex*_this14.options.chunkSize,end=Math.min(start+_this14.options.chunkSize,file.size),dataBlock={name:_this14._getParamName(0),data:transformedFile.webkitSlice?transformedFile.webkitSlice(start,end):transformedFile.slice(start,end),filename:file.upload.filename,chunkIndex:chunkIndex};file.upload.chunks[chunkIndex]={file:file,index:chunkIndex,dataBlock:dataBlock,status:Dropzone.UPLOADING,progress:0,retries:0},_this14._uploadData(files,[dataBlock])}};if(file.upload.finishedChunkUpload=function(chunk){var allFinished=!0;chunk.status=Dropzone.SUCCESS,chunk.dataBlock=null,chunk.xhr=null;for(var i=0;i<file.upload.totalChunkCount;i++){if(void 0===file.upload.chunks[i])return handleNextChunk();file.upload.chunks[i].status!==Dropzone.SUCCESS&&(allFinished=!1)}allFinished&&_this14.options.chunksUploaded(file,function(){_this14._finished(files,"",null)})},_this14.options.parallelChunkUploads)for(var i=0;i<file.upload.totalChunkCount;i++)handleNextChunk();else handleNextChunk()}else{for(var dataBlocks=[],_i23=0;_i23<files.length;_i23++)dataBlocks[_i23]={name:_this14._getParamName(_i23),data:transformedFiles[_i23],filename:files[_i23].upload.filename};_this14._uploadData(files,dataBlocks)}})}},{key:"_getChunk",value:function(file,xhr){for(var i=0;i<file.upload.totalChunkCount;i++)if(void 0!==file.upload.chunks[i]&&file.upload.chunks[i].xhr===xhr)return file.upload.chunks[i]}},{key:"_uploadData",value:function(files,dataBlocks){for(var _this15=this,xhr=new XMLHttpRequest,_iterator22=files,_isArray22=!0,_i24=0,_iterator22=_isArray22?_iterator22:_iterator22[Symbol.iterator]();;){var _ref21;if(_isArray22){if(_i24>=_iterator22.length)break;_ref21=_iterator22[_i24++]}else{if(_i24=_iterator22.next(),_i24.done)break;_ref21=_i24.value}_ref21.xhr=xhr}files[0].upload.chunked&&(files[0].upload.chunks[dataBlocks[0].chunkIndex].xhr=xhr);var method=this.resolveOption(this.options.method,files),url=this.resolveOption(this.options.url,files);xhr.open(method,url,!0),xhr.timeout=this.resolveOption(this.options.timeout,files),xhr.withCredentials=!!this.options.withCredentials,xhr.onload=function(e){_this15._finishedUploading(files,xhr,e)},xhr.onerror=function(){_this15._handleUploadError(files,xhr)},(null!=xhr.upload?xhr.upload:xhr).onprogress=function(e){return _this15._updateFilesUploadProgress(files,xhr,e)};var headers={Accept:"application/json","Cache-Control":"no-cache","X-Requested-With":"XMLHttpRequest"};this.options.headers&&Dropzone.extend(headers,this.options.headers);for(var headerName in headers){var headerValue=headers[headerName];headerValue&&xhr.setRequestHeader(headerName,headerValue)}var formData=new FormData;if(this.options.params){var additionalParams=this.options.params;"function"==typeof additionalParams&&(additionalParams=additionalParams.call(this,files,xhr,files[0].upload.chunked?this._getChunk(files[0],xhr):null));for(var key in additionalParams){var value=additionalParams[key];formData.append(key,value)}}for(var _iterator23=files,_isArray23=!0,_i25=0,_iterator23=_isArray23?_iterator23:_iterator23[Symbol.iterator]();;){var _ref22;if(_isArray23){if(_i25>=_iterator23.length)break;_ref22=_iterator23[_i25++]}else{if(_i25=_iterator23.next(),_i25.done)break;_ref22=_i25.value}var _file=_ref22;this.emit("sending",_file,xhr,formData)}this.options.uploadMultiple&&this.emit("sendingmultiple",files,xhr,formData),this._addFormElementData(formData);for(var i=0;i<dataBlocks.length;i++){var dataBlock=dataBlocks[i];formData.append(dataBlock.name,dataBlock.data,dataBlock.filename)}this.submitRequest(xhr,formData,files)}},{key:"_transformFiles",value:function(files,done){for(var _this16=this,transformedFiles=[],doneCounter=0,_loop=function(i){_this16.options.transformFile.call(_this16,files[i],function(transformedFile){transformedFiles[i]=transformedFile,++doneCounter===files.length&&done(transformedFiles)})},i=0;i<files.length;i++)_loop(i)}},{key:"_addFormElementData",value:function(formData){if("FORM"===this.element.tagName)for(var _iterator24=this.element.querySelectorAll("input, textarea, select, button"),_isArray24=!0,_i26=0,_iterator24=_isArray24?_iterator24:_iterator24[Symbol.iterator]();;){var _ref23;if(_isArray24){if(_i26>=_iterator24.length)break;_ref23=_iterator24[_i26++]}else{if(_i26=_iterator24.next(),_i26.done)break;_ref23=_i26.value}var input=_ref23,inputName=input.getAttribute("name"),inputType=input.getAttribute("type");if(inputType&&(inputType=inputType.toLowerCase()),void 0!==inputName&&null!==inputName)if("SELECT"===input.tagName&&input.hasAttribute("multiple"))for(var _iterator25=input.options,_isArray25=!0,_i27=0,_iterator25=_isArray25?_iterator25:_iterator25[Symbol.iterator]();;){var _ref24;if(_isArray25){if(_i27>=_iterator25.length)break;_ref24=_iterator25[_i27++]}else{if(_i27=_iterator25.next(),_i27.done)break;_ref24=_i27.value}var option=_ref24;option.selected&&formData.append(inputName,option.value)}else(!inputType||"checkbox"!==inputType&&"radio"!==inputType||input.checked)&&formData.append(inputName,input.value)}}},{key:"_updateFilesUploadProgress",value:function(files,xhr,e){var progress=void 0;if(void 0!==e){if(progress=100*e.loaded/e.total,files[0].upload.chunked){var file=files[0],chunk=this._getChunk(file,xhr);chunk.progress=progress,chunk.total=e.total,chunk.bytesSent=e.loaded;file.upload.progress=0,file.upload.total=0,file.upload.bytesSent=0;for(var i=0;i<file.upload.totalChunkCount;i++)void 0!==file.upload.chunks[i]&&void 0!==file.upload.chunks[i].progress&&(file.upload.progress+=file.upload.chunks[i].progress,file.upload.total+=file.upload.chunks[i].total,file.upload.bytesSent+=file.upload.chunks[i].bytesSent);file.upload.progress=file.upload.progress/file.upload.totalChunkCount}else for(var _iterator26=files,_isArray26=!0,_i28=0,_iterator26=_isArray26?_iterator26:_iterator26[Symbol.iterator]();;){var _ref25;if(_isArray26){if(_i28>=_iterator26.length)break;_ref25=_iterator26[_i28++]}else{if(_i28=_iterator26.next(),_i28.done)break;_ref25=_i28.value}var _file2=_ref25;_file2.upload.progress=progress,_file2.upload.total=e.total,_file2.upload.bytesSent=e.loaded}for(var _iterator27=files,_isArray27=!0,_i29=0,_iterator27=_isArray27?_iterator27:_iterator27[Symbol.iterator]();;){var _ref26;if(_isArray27){if(_i29>=_iterator27.length)break;_ref26=_iterator27[_i29++]}else{if(_i29=_iterator27.next(),_i29.done)break;_ref26=_i29.value}var _file3=_ref26;this.emit("uploadprogress",_file3,_file3.upload.progress,_file3.upload.bytesSent)}}else{var allFilesFinished=!0;progress=100;for(var _iterator28=files,_isArray28=!0,_i30=0,_iterator28=_isArray28?_iterator28:_iterator28[Symbol.iterator]();;){var _ref27;if(_isArray28){if(_i30>=_iterator28.length)break;_ref27=_iterator28[_i30++]}else{if(_i30=_iterator28.next(),_i30.done)break;_ref27=_i30.value}var _file4=_ref27;100===_file4.upload.progress&&_file4.upload.bytesSent===_file4.upload.total||(allFilesFinished=!1),_file4.upload.progress=progress,_file4.upload.bytesSent=_file4.upload.total}if(allFilesFinished)return;for(var _iterator29=files,_isArray29=!0,_i31=0,_iterator29=_isArray29?_iterator29:_iterator29[Symbol.iterator]();;){var _ref28;if(_isArray29){if(_i31>=_iterator29.length)break;_ref28=_iterator29[_i31++]}else{if(_i31=_iterator29.next(),_i31.done)break;_ref28=_i31.value}var _file5=_ref28;this.emit("uploadprogress",_file5,progress,_file5.upload.bytesSent)}}}},{key:"_finishedUploading",value:function(files,xhr,e){var response=void 0;if(files[0].status!==Dropzone.CANCELED&&4===xhr.readyState){if("arraybuffer"!==xhr.responseType&&"blob"!==xhr.responseType&&(response=xhr.responseText,xhr.getResponseHeader("content-type")&&~xhr.getResponseHeader("content-type").indexOf("application/json")))try{response=JSON.parse(response)}catch(error){e=error,response="Invalid JSON response from server."}this._updateFilesUploadProgress(files),200<=xhr.status&&xhr.status<300?files[0].upload.chunked?files[0].upload.finishedChunkUpload(this._getChunk(files[0],xhr)):this._finished(files,response,e):this._handleUploadError(files,xhr,response)}}},{key:"_handleUploadError",value:function(files,xhr,response){if(files[0].status!==Dropzone.CANCELED){if(files[0].upload.chunked&&this.options.retryChunks){var chunk=this._getChunk(files[0],xhr);if(chunk.retries++<this.options.retryChunksLimit)return void this._uploadData(files,[chunk.dataBlock]);console.warn("Retried this chunk too often. Giving up.")}for(var _iterator30=files,_isArray30=!0,_i32=0,_iterator30=_isArray30?_iterator30:_iterator30[Symbol.iterator]();;){if(_isArray30){if(_i32>=_iterator30.length)break;_iterator30[_i32++]}else{if(_i32=_iterator30.next(),_i32.done)break;_i32.value}this._errorProcessing(files,response||this.options.dictResponseError.replace("{{statusCode}}",xhr.status),xhr)}}}},{key:"submitRequest",value:function(xhr,formData,files){xhr.send(formData)}},{key:"_finished",value:function(files,responseText,e){for(var _iterator31=files,_isArray31=!0,_i33=0,_iterator31=_isArray31?_iterator31:_iterator31[Symbol.iterator]();;){var _ref30;if(_isArray31){if(_i33>=_iterator31.length)break;_ref30=_iterator31[_i33++]}else{if(_i33=_iterator31.next(),_i33.done)break;_ref30=_i33.value}var file=_ref30;file.status=Dropzone.SUCCESS,this.emit("success",file,responseText,e),this.emit("complete",file)}if(this.options.uploadMultiple&&(this.emit("successmultiple",files,responseText,e),this.emit("completemultiple",files)),this.options.autoProcessQueue)return this.processQueue()}},{key:"_errorProcessing",value:function(files,message,xhr){for(var _iterator32=files,_isArray32=!0,_i34=0,_iterator32=_isArray32?_iterator32:_iterator32[Symbol.iterator]();;){var _ref31;if(_isArray32){if(_i34>=_iterator32.length)break;_ref31=_iterator32[_i34++]}else{if(_i34=_iterator32.next(),_i34.done)break;_ref31=_i34.value}var file=_ref31;file.status=Dropzone.ERROR,this.emit("error",file,message,xhr),this.emit("complete",file)}if(this.options.uploadMultiple&&(this.emit("errormultiple",files,message,xhr),this.emit("completemultiple",files)),this.options.autoProcessQueue)return this.processQueue()}}],[{key:"uuidv4",value:function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(c){var r=16*Math.random()|0;return("x"===c?r:3&r|8).toString(16)})}}]),Dropzone}(Emitter);Dropzone.initClass(),Dropzone.version="5.5.1",Dropzone.options={},Dropzone.optionsForElement=function(element){return element.getAttribute("id")?Dropzone.options[camelize(element.getAttribute("id"))]:void 0},Dropzone.instances=[],Dropzone.forElement=function(element){if("string"==typeof element&&(element=document.querySelector(element)),null==(null!=element?element.dropzone:void 0))throw new Error("No Dropzone found for given element. This is probably because you're trying to access it before Dropzone had the time to initialize. Use the `init` option to setup any additional observers on your Dropzone.");return element.dropzone},Dropzone.autoDiscover=!0,Dropzone.discover=function(){var dropzones=void 0;if(document.querySelectorAll)dropzones=document.querySelectorAll(".dropzone");else{dropzones=[];var checkElements=function(elements){return function(){for(var result=[],_iterator33=elements,_isArray33=!0,_i35=0,_iterator33=_isArray33?_iterator33:_iterator33[Symbol.iterator]();;){var _ref32;if(_isArray33){if(_i35>=_iterator33.length)break;_ref32=_iterator33[_i35++]}else{if(_i35=_iterator33.next(),_i35.done)break;_ref32=_i35.value}var el=_ref32;/(^| )dropzone($| )/.test(el.className)?result.push(dropzones.push(el)):result.push(void 0)}return result}()};checkElements(document.getElementsByTagName("div")),checkElements(document.getElementsByTagName("form"))}return function(){for(var result=[],_iterator34=dropzones,_isArray34=!0,_i36=0,_iterator34=_isArray34?_iterator34:_iterator34[Symbol.iterator]();;){var _ref33;if(_isArray34){if(_i36>=_iterator34.length)break;_ref33=_iterator34[_i36++]}else{if(_i36=_iterator34.next(),_i36.done)break;_ref33=_i36.value}var dropzone=_ref33;!1!==Dropzone.optionsForElement(dropzone)?result.push(new Dropzone(dropzone)):result.push(void 0)}return result}()},Dropzone.blacklistedBrowsers=[/opera.*(Macintosh|Windows Phone).*version\/12/i],Dropzone.isBrowserSupported=function(){var capableBrowser=!0;if(window.File&&window.FileReader&&window.FileList&&window.Blob&&window.FormData&&document.querySelector)if("classList"in document.createElement("a"))for(var _iterator35=Dropzone.blacklistedBrowsers,_isArray35=!0,_i37=0,_iterator35=_isArray35?_iterator35:_iterator35[Symbol.iterator]();;){var _ref34;if(_isArray35){if(_i37>=_iterator35.length)break;_ref34=_iterator35[_i37++]}else{if(_i37=_iterator35.next(),_i37.done)break;_ref34=_i37.value}var regex=_ref34;regex.test(navigator.userAgent)&&(capableBrowser=!1)}else capableBrowser=!1;else capableBrowser=!1;return capableBrowser},Dropzone.dataURItoBlob=function(dataURI){for(var byteString=atob(dataURI.split(",")[1]),mimeString=dataURI.split(",")[0].split(":")[1].split(";")[0],ab=new ArrayBuffer(byteString.length),ia=new Uint8Array(ab),i=0,end=byteString.length,asc=0<=end;asc?i<=end:i>=end;asc?i++:i--)ia[i]=byteString.charCodeAt(i);return new Blob([ab],{type:mimeString})};var without=function(list,rejectedItem){return list.filter(function(item){return item!==rejectedItem}).map(function(item){return item})},camelize=function(str){return str.replace(/[\-_](\w)/g,function(match){return match.charAt(1).toUpperCase()})};Dropzone.createElement=function(string){var div=document.createElement("div");return div.innerHTML=string,div.childNodes[0]},Dropzone.elementInside=function(element,container){if(element===container)return!0;for(;element=element.parentNode;)if(element===container)return!0;return!1},Dropzone.getElement=function(el,name){var element=void 0;if("string"==typeof el?element=document.querySelector(el):null!=el.nodeType&&(element=el),null==element)throw new Error("Invalid `"+name+"` option provided. Please provide a CSS selector or a plain HTML element.");return element},Dropzone.getElements=function(els,name){var el=void 0,elements=void 0;if(els instanceof Array){elements=[];try{for(var _iterator36=els,_isArray36=!0,_i38=0,_iterator36=_isArray36?_iterator36:_iterator36[Symbol.iterator]();;){if(_isArray36){if(_i38>=_iterator36.length)break;el=_iterator36[_i38++]}else{if(_i38=_iterator36.next(),_i38.done)break;el=_i38.value}elements.push(this.getElement(el,name))}}catch(e){elements=null}}else if("string"==typeof els){elements=[];for(var _iterator37=document.querySelectorAll(els),_isArray37=!0,_i39=0,_iterator37=_isArray37?_iterator37:_iterator37[Symbol.iterator]();;){if(_isArray37){if(_i39>=_iterator37.length)break;el=_iterator37[_i39++]}else{if(_i39=_iterator37.next(),_i39.done)break;el=_i39.value}elements.push(el)}}else null!=els.nodeType&&(elements=[els]);if(null==elements||!elements.length)throw new Error("Invalid `"+name+"` option provided. Please provide a CSS selector, a plain HTML element or a list of those.");return elements},Dropzone.confirm=function(question,accepted,rejected){return window.confirm(question)?accepted():null!=rejected?rejected():void 0},Dropzone.isValidFile=function(file,acceptedFiles){if(!acceptedFiles)return!0;acceptedFiles=acceptedFiles.split(",");for(var mimeType=file.type,baseMimeType=mimeType.replace(/\/.*$/,""),_iterator38=acceptedFiles,_isArray38=!0,_i40=0,_iterator38=_isArray38?_iterator38:_iterator38[Symbol.iterator]();;){var _ref35;if(_isArray38){if(_i40>=_iterator38.length)break;_ref35=_iterator38[_i40++]}else{if(_i40=_iterator38.next(),_i40.done)break;_ref35=_i40.value}var validType=_ref35;if(validType=validType.trim(),"."===validType.charAt(0)){if(-1!==file.name.toLowerCase().indexOf(validType.toLowerCase(),file.name.length-validType.length))return!0}else if(/\/\*$/.test(validType)){if(baseMimeType===validType.replace(/\/.*$/,""))return!0}else if(mimeType===validType)return!0}return!1},"undefined"!=typeof jQuery&&null!==jQuery&&(jQuery.fn.dropzone=function(options){return this.each(function(){return new Dropzone(this,options)})}),"undefined"!=typeof module&&null!==module?module.exports=Dropzone:window.Dropzone=Dropzone,Dropzone.ADDED="added",Dropzone.QUEUED="queued",Dropzone.ACCEPTED=Dropzone.QUEUED,Dropzone.UPLOADING="uploading",Dropzone.PROCESSING=Dropzone.UPLOADING,Dropzone.CANCELED="canceled",Dropzone.ERROR="error",Dropzone.SUCCESS="success";var detectVerticalSquash=function(img){var ih=(img.naturalWidth,img.naturalHeight),canvas=document.createElement("canvas");canvas.width=1,canvas.height=ih;var ctx=canvas.getContext("2d");ctx.drawImage(img,0,0);for(var _ctx$getImageData=ctx.getImageData(1,0,1,ih),data=_ctx$getImageData.data,sy=0,ey=ih,py=ih;py>sy;){0===data[4*(py-1)+3]?ey=py:sy=py,py=ey+sy>>1}var ratio=py/ih;return 0===ratio?1:ratio},drawImageIOSFix=function(ctx,img,sx,sy,sw,sh,dx,dy,dw,dh){var vertSquashRatio=detectVerticalSquash(img);return ctx.drawImage(img,sx,sy,sw,sh,dx,dy,dw,dh/vertSquashRatio)},ExifRestore=function(){function ExifRestore(){_classCallCheck(this,ExifRestore)}return _createClass(ExifRestore,null,[{key:"initClass",value:function(){this.KEY_STR="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="}},{key:"encode64",value:function(input){for(var output="",chr1=void 0,chr2=void 0,chr3="",enc1=void 0,enc2=void 0,enc3=void 0,enc4="",i=0;;)if(chr1=input[i++],chr2=input[i++],chr3=input[i++],enc1=chr1>>2,enc2=(3&chr1)<<4|chr2>>4,enc3=(15&chr2)<<2|chr3>>6,enc4=63&chr3,isNaN(chr2)?enc3=enc4=64:isNaN(chr3)&&(enc4=64),output=output+this.KEY_STR.charAt(enc1)+this.KEY_STR.charAt(enc2)+this.KEY_STR.charAt(enc3)+this.KEY_STR.charAt(enc4),chr1=chr2=chr3="",enc1=enc2=enc3=enc4="",!(i<input.length))break;return output}},{key:"restore",value:function(origFileBase64,resizedFileBase64){if(!origFileBase64.match("data:image/jpeg;base64,"))return resizedFileBase64;var rawImage=this.decode64(origFileBase64.replace("data:image/jpeg;base64,","")),segments=this.slice2Segments(rawImage),image=this.exifManipulation(resizedFileBase64,segments);return"data:image/jpeg;base64,"+this.encode64(image)}},{key:"exifManipulation",value:function(resizedFileBase64,segments){var exifArray=this.getExifArray(segments),newImageArray=this.insertExif(resizedFileBase64,exifArray);return new Uint8Array(newImageArray)}},{key:"getExifArray",value:function(segments){for(var seg=void 0,x=0;x<segments.length;){if(seg=segments[x],255===seg[0]&225===seg[1])return seg;x++}return[]}},{key:"insertExif",value:function(resizedFileBase64,exifArray){var imageData=resizedFileBase64.replace("data:image/jpeg;base64,",""),buf=this.decode64(imageData),separatePoint=buf.indexOf(255,3),mae=buf.slice(0,separatePoint),ato=buf.slice(separatePoint),array=mae;return array=array.concat(exifArray),array=array.concat(ato)}},{key:"slice2Segments",value:function(rawImageArray){for(var head=0,segments=[];;){var length;if(255===rawImageArray[head]&218===rawImageArray[head+1])break;if(255===rawImageArray[head]&216===rawImageArray[head+1])head+=2;else{length=256*rawImageArray[head+2]+rawImageArray[head+3];var endPoint=head+length+2,seg=rawImageArray.slice(head,endPoint);segments.push(seg),head=endPoint}if(head>rawImageArray.length)break}return segments}},{key:"decode64",value:function(input){var chr1=void 0,chr2=void 0,chr3="",enc1=void 0,enc2=void 0,enc3=void 0,enc4="",i=0,buf=[],base64test=/[^A-Za-z0-9\+\/\=]/g;for(base64test.exec(input)&&console.warn("There were invalid base64 characters in the input text.\nValid base64 characters are A-Z, a-z, 0-9, '+', '/',and '='\nExpect errors in decoding."),input=input.replace(/[^A-Za-z0-9\+\/\=]/g,"");;)if(enc1=this.KEY_STR.indexOf(input.charAt(i++)),enc2=this.KEY_STR.indexOf(input.charAt(i++)),enc3=this.KEY_STR.indexOf(input.charAt(i++)),enc4=this.KEY_STR.indexOf(input.charAt(i++)),chr1=enc1<<2|enc2>>4,chr2=(15&enc2)<<4|enc3>>2,chr3=(3&enc3)<<6|enc4,buf.push(chr1),64!==enc3&&buf.push(chr2),64!==enc4&&buf.push(chr3),chr1=chr2=chr3="",enc1=enc2=enc3=enc4="",!(i<input.length))break;return buf}}]),ExifRestore}();ExifRestore.initClass();var contentLoaded=function(win,fn){var done=!1,top=!0,doc=win.document,root=doc.documentElement,add=doc.addEventListener?"addEventListener":"attachEvent",rem=doc.addEventListener?"removeEventListener":"detachEvent",pre=doc.addEventListener?"":"on",init=function init(e){if("readystatechange"!==e.type||"complete"===doc.readyState)return("load"===e.type?win:doc)[rem](pre+e.type,init,!1),!done&&(done=!0)?fn.call(win,e.type||e):void 0},poll=function poll(){try{root.doScroll("left")}catch(e){return void setTimeout(poll,50)}return init("poll")};if("complete"!==doc.readyState){if(doc.createEventObject&&root.doScroll){try{top=!win.frameElement}catch(error){}top&&poll()}return doc[add](pre+"DOMContentLoaded",init,!1),doc[add](pre+"readystatechange",init,!1),win[add](pre+"load",init,!1)}};Dropzone._autoDiscoverFunction=function(){if(Dropzone.autoDiscover)return Dropzone.discover()},contentLoaded(window,Dropzone._autoDiscoverFunction),function($){$.Jcrop=function(obj,opt){function px(n){return Math.round(n)+"px"}function cssClass(cl){return options.baseClass+"-"+cl}function supportsColorFade(){return $.fx.step.hasOwnProperty("backgroundColor")}function getPos(obj){var pos=$(obj).offset();return[pos.left,pos.top]}function mouseAbs(e){return[e.pageX-docOffset[0],e.pageY-docOffset[1]]}function setOptions(opt){"object"!=typeof opt&&(opt={}),options=$.extend(options,opt),$.each(["onChange","onSelect","onRelease","onDblClick"],function(i,e){"function"!=typeof options[e]&&(options[e]=function(){})})}function startDragMode(mode,pos,touch){if(docOffset=getPos($img),Tracker.setCursor("move"===mode?mode:mode+"-resize"),"move"===mode)return Tracker.activateHandlers(createMover(pos),doneSelect,touch);var fc=Coords.getFixed(),opp=oppLockCorner(mode),opc=Coords.getCorner(oppLockCorner(opp));Coords.setPressed(Coords.getCorner(opp)),Coords.setCurrent(opc),Tracker.activateHandlers(dragmodeHandler(mode,fc),doneSelect,touch)}function dragmodeHandler(mode,f){return function(pos){if(options.aspectRatio)switch(mode){case"e":case"w":pos[1]=f.y+1;break;case"n":case"s":pos[0]=f.x+1}else switch(mode){case"e":case"w":pos[1]=f.y2;break;case"n":case"s":pos[0]=f.x2}Coords.setCurrent(pos),Selection.update()}}function createMover(pos){var lloc=pos;return KeyManager.watchKeys(),function(pos){Coords.moveOffset([pos[0]-lloc[0],pos[1]-lloc[1]]),lloc=pos,Selection.update()}}function oppLockCorner(ord){switch(ord){case"n":return"sw";case"s":case"e":return"nw";case"w":return"ne";case"ne":return"sw";case"nw":return"se";case"se":return"nw";case"sw":return"ne"}}function createDragger(ord){return function(e){return!options.disabled&&(!("move"===ord&&!options.allowMove)&&(docOffset=getPos($img),btndown=!0,startDragMode(ord,mouseAbs(e)),e.stopPropagation(),e.preventDefault(),!1))}}function presize($obj,w,h){var nw=$obj.width(),nh=$obj.height();nw>w&&w>0&&(nw=w,nh=w/$obj.width()*$obj.height()),nh>h&&h>0&&(nh=h,nw=h/$obj.height()*$obj.width()),xscale=$obj.width()/nw,yscale=$obj.height()/nh,$obj.width(nw).height(nh)}function unscale(c){return{x:c.x*xscale,y:c.y*yscale,x2:c.x2*xscale,y2:c.y2*yscale,w:c.w*xscale,h:c.h*yscale}}function doneSelect(pos){var c=Coords.getFixed();c.w>options.minSelect[0]&&c.h>options.minSelect[1]?(Selection.enableHandles(),Selection.done()):Selection.release(),Tracker.setCursor(options.allowSelect?"crosshair":"default")}function newSelection(e){if(options.disabled)return!1;if(!options.allowSelect)return!1;btndown=!0,docOffset=getPos($img),Selection.disableHandles(),Tracker.setCursor("crosshair");var pos=mouseAbs(e);return Coords.setPressed(pos),Selection.update(),Tracker.activateHandlers(selectDrag,doneSelect,"touch"===e.type.substring(0,5)),KeyManager.watchKeys(),e.stopPropagation(),e.preventDefault(),!1}function selectDrag(pos){Coords.setCurrent(pos),Selection.update()}function newTracker(){var trk=$("<div></div>").addClass(cssClass("tracker"));return is_msie&&trk.css({opacity:0,backgroundColor:"white"}),trk}function setClass(cname){$div.removeClass().addClass(cssClass("holder")).addClass(cname)}function animateTo(a,callback){function queueAnimator(){window.setTimeout(animator,interv)}var x1=a[0]/xscale,y1=a[1]/yscale,x2=a[2]/xscale,y2=a[3]/yscale;if(!animating){var animto=Coords.flipCoords(x1,y1,x2,y2),c=Coords.getFixed(),initcr=[c.x,c.y,c.x2,c.y2],animat=initcr,interv=options.animationDelay,ix1=animto[0]-initcr[0],iy1=animto[1]-initcr[1],ix2=animto[2]-initcr[2],iy2=animto[3]-initcr[3],pcent=0,velocity=options.swingSpeed;x1=animat[0],y1=animat[1],x2=animat[2],y2=animat[3],Selection.animMode(!0);var animator=function(){return function(){pcent+=(100-pcent)/velocity,animat[0]=Math.round(x1+pcent/100*ix1),animat[1]=Math.round(y1+pcent/100*iy1),animat[2]=Math.round(x2+pcent/100*ix2),animat[3]=Math.round(y2+pcent/100*iy2),pcent>=99.8&&(pcent=100),pcent<100?(setSelectRaw(animat),queueAnimator()):(Selection.done(),Selection.animMode(!1),"function"==typeof callback&&callback.call(api))}}();queueAnimator()}}function setSelect(rect){setSelectRaw([rect[0]/xscale,rect[1]/yscale,rect[2]/xscale,rect[3]/yscale]),options.onSelect.call(api,unscale(Coords.getFixed())),Selection.enableHandles()}function setSelectRaw(l){Coords.setPressed([l[0],l[1]]),Coords.setCurrent([l[2],l[3]]),Selection.update()}function tellSelect(){return unscale(Coords.getFixed())}function tellScaled(){return Coords.getFixed()}function setOptionsNew(opt){setOptions(opt),interfaceUpdate()}function disableCrop(){options.disabled=!0,Selection.disableHandles(),Selection.setCursor("default"),Tracker.setCursor("default")}function enableCrop(){options.disabled=!1,interfaceUpdate()}function cancelCrop(){Selection.done(),Tracker.activateHandlers(null,null)}function destroy(){$(document).unbind("touchstart.jcrop-ios",Touch.fixTouchSupport),$div.remove(),$origimg.show(),$origimg.css("visibility","visible"),$(obj).removeData("Jcrop")}function setImage(src,callback){Selection.release(),disableCrop();var img=new Image;img.onload=function(){var iw=img.width,ih=img.height,bw=options.boxWidth,bh=options.boxHeight;$img.width(iw).height(ih),$img.attr("src",src),$img2.attr("src",src),presize($img,bw,bh),boundx=$img.width(),boundy=$img.height(),$img2.width(boundx).height(boundy),$trk.width(boundx+2*bound).height(boundy+2*bound),$div.width(boundx).height(boundy),Shade.resize(boundx,boundy),enableCrop(),"function"==typeof callback&&callback.call(api)},img.src=src}function colorChangeMacro($obj,color,now){var mycolor=color||options.bgColor;options.bgFade&&supportsColorFade()&&options.fadeTime&&!now?$obj.animate({backgroundColor:mycolor},{queue:!1,duration:options.fadeTime}):$obj.css("backgroundColor",mycolor)}function interfaceUpdate(alt){options.allowResize?alt?Selection.enableOnly():Selection.enableHandles():Selection.disableHandles(),Tracker.setCursor(options.allowSelect?"crosshair":"default"),Selection.setCursor(options.allowMove?"move":"default"),options.hasOwnProperty("trueSize")&&(xscale=options.trueSize[0]/boundx,yscale=options.trueSize[1]/boundy),options.hasOwnProperty("setSelect")&&(setSelect(options.setSelect),Selection.done(),delete options.setSelect),Shade.refresh(),options.bgColor!=bgcolor&&(colorChangeMacro(options.shade?Shade.getShades():$div,options.shade?options.shadeColor||options.bgColor:options.bgColor),bgcolor=options.bgColor),bgopacity!=options.bgOpacity&&(bgopacity=options.bgOpacity,options.shade?Shade.refresh():Selection.setBgOpacity(bgopacity)),xlimit=options.maxSize[0]||0,ylimit=options.maxSize[1]||0,xmin=options.minSize[0]||0,ymin=options.minSize[1]||0,options.hasOwnProperty("outerImage")&&($img.attr("src",options.outerImage),delete options.outerImage),Selection.refresh()}var docOffset,options=$.extend({},$.Jcrop.defaults),_ua=navigator.userAgent.toLowerCase(),is_msie=/msie/.test(_ua),ie6mode=/msie [1-6]\./.test(_ua);"object"!=typeof obj&&(obj=$(obj)[0]),"object"!=typeof opt&&(opt={}),setOptions(opt);var img_css={border:"none",visibility:"visible",margin:0,padding:0,position:"absolute",top:0,left:0},$origimg=$(obj),img_mode=!0;if("IMG"==obj.tagName){if(0!=$origimg[0].width&&0!=$origimg[0].height)$origimg.width($origimg[0].width),$origimg.height($origimg[0].height);else{var tempImage=new Image;tempImage.src=$origimg[0].src,$origimg.width(tempImage.width),$origimg.height(tempImage.height)}var $img=$origimg.clone().removeAttr("id").css(img_css).show();$img.width($origimg.width()),$img.height($origimg.height()),$origimg.after($img).hide()}else $img=$origimg.css(img_css).show(),img_mode=!1,null===options.shade&&(options.shade=!0);presize($img,options.boxWidth,options.boxHeight);var boundx=$img.width(),boundy=$img.height(),$div=$("<div />").width(boundx).height(boundy).addClass(cssClass("holder")).css({position:"relative",backgroundColor:options.bgColor}).insertAfter($origimg).append($img);options.addClass&&$div.addClass(options.addClass);var $img2=$("<div />"),$img_holder=$("<div />").width("100%").height("100%").css({zIndex:310,position:"absolute",overflow:"hidden"}),$hdl_holder=$("<div />").width("100%").height("100%").css("zIndex",320),$sel=$("<div />").css({position:"absolute",zIndex:600}).dblclick(function(){var c=Coords.getFixed();options.onDblClick.call(api,c)}).insertBefore($img).append($img_holder,$hdl_holder);img_mode&&($img2=$("<img />").attr("src",$img.attr("src")).css(img_css).width(boundx).height(boundy),$img_holder.append($img2)),ie6mode&&$sel.css({overflowY:"hidden"});var xlimit,ylimit,xmin,ymin,xscale,yscale,btndown,animating,shift_down,bound=options.boundary,$trk=newTracker().width(boundx+2*bound).height(boundy+2*bound).css({position:"absolute",top:px(-bound),left:px(-bound),zIndex:290}).mousedown(newSelection),bgcolor=options.bgColor,bgopacity=options.bgOpacity;docOffset=getPos($img);var Touch=function(){function hasTouchSupport(){var i,support={},events=["touchstart","touchmove","touchend"],el=document.createElement("div");try{for(i=0;i<events.length;i++){var eventName=events[i];eventName="on"+eventName;var isSupported=eventName in el;isSupported||(el.setAttribute(eventName,"return;"),isSupported="function"==typeof el[eventName]),support[events[i]]=isSupported}return support.touchstart&&support.touchend&&support.touchmove}catch(err){return!1}}function detectSupport(){return!0===options.touchSupport||!1===options.touchSupport?options.touchSupport:hasTouchSupport()}return{createDragger:function(ord){return function(e){return!options.disabled&&(!("move"===ord&&!options.allowMove)&&(docOffset=getPos($img),btndown=!0,startDragMode(ord,mouseAbs(Touch.cfilter(e)),!0),e.stopPropagation(),e.preventDefault(),!1))}},newSelection:function(e){return newSelection(Touch.cfilter(e))},cfilter:function(e){return e.pageX=e.originalEvent.changedTouches[0].pageX,e.pageY=e.originalEvent.changedTouches[0].pageY,e},fixTouchSupport:function(e){$(e.currentTarget).hasClass("jcrop-tracker")&&e.stopPropagation()},isSupported:hasTouchSupport,support:detectSupport()}}(),Coords=function(){function setPressed(pos){pos=rebound(pos),x2=x1=pos[0],y2=y1=pos[1]}function setCurrent(pos){pos=rebound(pos),ox=pos[0]-x2,oy=pos[1]-y2,x2=pos[0],y2=pos[1]}function getOffset(){return[ox,oy]}function moveOffset(offset){var ox=offset[0],oy=offset[1];0>x1+ox&&(ox-=ox+x1),0>y1+oy&&(oy-=oy+y1),boundy<y2+oy&&(oy+=boundy-(y2+oy)),boundx<x2+ox&&(ox+=boundx-(x2+ox)),x1+=ox,x2+=ox,y1+=oy,y2+=oy}function getCorner(ord){var c=getFixed();switch(ord){case"ne":return[c.x2,c.y];case"nw":return[c.x,c.y];case"se":return[c.x2,c.y2];case"sw":return[c.x,c.y2]}}function getFixed(){if(!options.aspectRatio)return getRect();var xx,yy,w,h,aspect=options.aspectRatio,min_x=options.minSize[0]/xscale,max_x=options.maxSize[0]/xscale,max_y=options.maxSize[1]/yscale,rw=x2-x1,rh=y2-y1,rwa=Math.abs(rw),rha=Math.abs(rh),real_ratio=rwa/rha;return 0===max_x&&(max_x=10*boundx),0===max_y&&(max_y=10*boundy),real_ratio<aspect?(yy=y2,w=rha*aspect,xx=rw<0?x1-w:w+x1,xx<0?(xx=0,h=Math.abs((xx-x1)/aspect),yy=rh<0?y1-h:h+y1):xx>boundx&&(xx=boundx,h=Math.abs((xx-x1)/aspect),yy=rh<0?y1-h:h+y1)):(xx=x2,h=rwa/aspect,yy=rh<0?y1-h:y1+h,yy<0?(yy=0,w=Math.abs((yy-y1)*aspect),xx=rw<0?x1-w:w+x1):yy>boundy&&(yy=boundy,w=Math.abs(yy-y1)*aspect,xx=rw<0?x1-w:w+x1)),xx>x1?(xx-x1<min_x?xx=x1+min_x:xx-x1>max_x&&(xx=x1+max_x),yy=yy>y1?y1+(xx-x1)/aspect:y1-(xx-x1)/aspect):xx<x1&&(x1-xx<min_x?xx=x1-min_x:x1-xx>max_x&&(xx=x1-max_x),yy=yy>y1?y1+(x1-xx)/aspect:y1-(x1-xx)/aspect),xx<0?(x1-=xx,xx=0):xx>boundx&&(x1-=xx-boundx,xx=boundx),yy<0?(y1-=yy,yy=0):yy>boundy&&(y1-=yy-boundy,yy=boundy),makeObj(flipCoords(x1,y1,xx,yy))}function rebound(p){return p[0]<0&&(p[0]=0),p[1]<0&&(p[1]=0),p[0]>boundx&&(p[0]=boundx),p[1]>boundy&&(p[1]=boundy),[Math.round(p[0]),Math.round(p[1])]}function flipCoords(x1,y1,x2,y2){var xa=x1,xb=x2,ya=y1,yb=y2;return x2<x1&&(xa=x2,xb=x1),y2<y1&&(ya=y2,yb=y1),[xa,ya,xb,yb]}function getRect(){var delta,xsize=x2-x1,ysize=y2-y1;return xlimit&&Math.abs(xsize)>xlimit&&(x2=xsize>0?x1+xlimit:x1-xlimit),ylimit&&Math.abs(ysize)>ylimit&&(y2=ysize>0?y1+ylimit:y1-ylimit),ymin/yscale&&Math.abs(ysize)<ymin/yscale&&(y2=ysize>0?y1+ymin/yscale:y1-ymin/yscale),xmin/xscale&&Math.abs(xsize)<xmin/xscale&&(x2=xsize>0?x1+xmin/xscale:x1-xmin/xscale),x1<0&&(x2-=x1,x1-=x1),y1<0&&(y2-=y1,y1-=y1),x2<0&&(x1-=x2,x2-=x2),y2<0&&(y1-=y2,y2-=y2),x2>boundx&&(delta=x2-boundx,x1-=delta,x2-=delta),y2>boundy&&(delta=y2-boundy,y1-=delta,y2-=delta),x1>boundx&&(delta=x1-boundy,y2-=delta,y1-=delta),y1>boundy&&(delta=y1-boundy,y2-=delta,y1-=delta),makeObj(flipCoords(x1,y1,x2,y2))}function makeObj(a){return{x:a[0],y:a[1],x2:a[2],y2:a[3],w:a[2]-a[0],h:a[3]-a[1]}}var ox,oy,x1=0,y1=0,x2=0,y2=0;return{flipCoords:flipCoords,setPressed:setPressed,setCurrent:setCurrent,getOffset:getOffset,moveOffset:moveOffset,getCorner:getCorner,getFixed:getFixed}}(),Shade=function(){function resizeShades(w,h){shades.left.css({height:px(h)}),shades.right.css({height:px(h)})}function updateAuto(){return updateShade(Coords.getFixed())}function updateShade(c){shades.top.css({left:px(c.x),width:px(c.w),height:px(c.y)}),shades.bottom.css({top:px(c.y2),left:px(c.x),width:px(c.w),height:px(boundy-c.y2)}),shades.right.css({left:px(c.x2),width:px(boundx-c.x2)}),shades.left.css({width:px(c.x)})}function createShade(){return $("<div />").css({position:"absolute",backgroundColor:options.shadeColor||options.bgColor}).appendTo(holder)}function enableShade(){enabled||(enabled=!0,holder.insertBefore($img),updateAuto(),Selection.setBgOpacity(1,0,1),$img2.hide(),setBgColor(options.shadeColor||options.bgColor,1),Selection.isAwake()?setOpacity(options.bgOpacity,1):setOpacity(1,1))}function setBgColor(color,now){colorChangeMacro(getShades(),color,now)}function disableShade(){enabled&&(holder.remove(),$img2.show(),enabled=!1,Selection.isAwake()?Selection.setBgOpacity(options.bgOpacity,1,1):(Selection.setBgOpacity(1,1,1),Selection.disableHandles()),colorChangeMacro($div,0,1))}function setOpacity(opacity,now){enabled&&(options.bgFade&&!now?holder.animate({opacity:1-opacity},{queue:!1,duration:options.fadeTime}):holder.css({opacity:1-opacity}))}function refreshAll(){options.shade?enableShade():disableShade(),Selection.isAwake()&&setOpacity(options.bgOpacity)}function getShades(){return holder.children()}var enabled=!1,holder=$("<div />").css({position:"absolute",zIndex:240,opacity:0}),shades={top:createShade(),left:createShade().height(boundy),right:createShade().height(boundy),bottom:createShade()};return{update:updateAuto,updateRaw:updateShade,getShades:getShades,setBgColor:setBgColor,enable:enableShade,disable:disableShade,resize:resizeShades,refresh:refreshAll,opacity:setOpacity}}(),Selection=function(){function insertBorder(type){var jq=$("<div />").css({position:"absolute",opacity:options.borderOpacity}).addClass(cssClass(type));return $img_holder.append(jq),jq}function dragDiv(ord,zi){var jq=$("<div />").mousedown(createDragger(ord)).css({cursor:ord+"-resize",position:"absolute",zIndex:zi}).addClass("ord-"+ord);return Touch.support&&jq.bind("touchstart.jcrop",Touch.createDragger(ord)),$hdl_holder.append(jq),jq}function insertHandle(ord){var hs=options.handleSize,div=dragDiv(ord,hdep++).css({opacity:options.handleOpacity}).addClass(cssClass("handle"));return hs&&div.width(hs).height(hs),div}function insertDragbar(ord){return dragDiv(ord,hdep++).addClass("jcrop-dragbar")}function createDragbars(li){var i;for(i=0;i<li.length;i++)dragbar[li[i]]=insertDragbar(li[i])}function createBorders(li){var cl,i;for(i=0;i<li.length;i++){switch(li[i]){case"n":cl="hline";break;case"s":cl="hline bottom";break;case"e":cl="vline right";break;case"w":cl="vline"}borders[li[i]]=insertBorder(cl)}}function createHandles(li){var i;for(i=0;i<li.length;i++)handle[li[i]]=insertHandle(li[i])}function moveto(x,y){options.shade||$img2.css({top:px(-y),left:px(-x)}),$sel.css({top:px(y),left:px(x)})}function resize(w,h){$sel.width(Math.round(w)).height(Math.round(h))}function refresh(){var c=Coords.getFixed();Coords.setPressed([c.x,c.y]),Coords.setCurrent([c.x2,c.y2]),updateVisible()}function updateVisible(select){if(awake)return update(select)}function update(select){var c=Coords.getFixed();resize(c.w,c.h),moveto(c.x,c.y),options.shade&&Shade.updateRaw(c),awake||show(),select?options.onSelect.call(api,unscale(c)):options.onChange.call(api,unscale(c))}function setBgOpacity(opacity,force,now){(awake||force)&&(options.bgFade&&!now?$img.animate({opacity:opacity},{queue:!1,duration:options.fadeTime}):$img.css("opacity",opacity))}function show(){$sel.show(),options.shade?Shade.opacity(bgopacity):setBgOpacity(bgopacity,!0),awake=!0}function release(){disableHandles(),$sel.hide(),options.shade?Shade.opacity(1):setBgOpacity(1),awake=!1,options.onRelease.call(api)}function showHandles(){seehandles&&$hdl_holder.show()}function enableHandles(){if(seehandles=!0,options.allowResize)return $hdl_holder.show(),!0}function disableHandles(){seehandles=!1,$hdl_holder.hide()}function animMode(v){v?(animating=!0,disableHandles()):(animating=!1,enableHandles())}function done(){animMode(!1),refresh()}var awake,hdep=370,borders={},handle={},dragbar={},seehandles=!1;options.dragEdges&&$.isArray(options.createDragbars)&&createDragbars(options.createDragbars),$.isArray(options.createHandles)&&createHandles(options.createHandles),options.drawBorders&&$.isArray(options.createBorders)&&createBorders(options.createBorders),$(document).bind("touchstart.jcrop-ios",Touch.fixTouchSupport);var $track=newTracker().mousedown(createDragger("move")).css({cursor:"move",position:"absolute",zIndex:360});return Touch.support&&$track.bind("touchstart.jcrop",Touch.createDragger("move")),$img_holder.append($track),disableHandles(),{updateVisible:updateVisible,update:update,release:release,refresh:refresh,isAwake:function(){return awake},setCursor:function(cursor){$track.css("cursor",cursor)},enableHandles:enableHandles,enableOnly:function(){seehandles=!0},showHandles:showHandles,disableHandles:disableHandles,animMode:animMode,setBgOpacity:setBgOpacity,done:done}}(),Tracker=function(){function toFront(touch){$trk.css({zIndex:450}),touch?$(document).bind("touchmove.jcrop",trackTouchMove).bind("touchend.jcrop",trackTouchEnd):trackDoc&&$(document).bind("mousemove.jcrop",trackMove).bind("mouseup.jcrop",trackUp)}function toBack(){$trk.css({zIndex:290}),$(document).unbind(".jcrop")}function trackMove(e){return onMove(mouseAbs(e)),!1}function trackUp(e){return e.preventDefault(),e.stopPropagation(),btndown&&(btndown=!1,onDone(mouseAbs(e)),Selection.isAwake()&&options.onSelect.call(api,unscale(Coords.getFixed())),toBack(),onMove=function(){},onDone=function(){}),!1}function activateHandlers(move,done,touch){return btndown=!0,onMove=move,onDone=done,toFront(touch),!1}function trackTouchMove(e){return onMove(mouseAbs(Touch.cfilter(e))),!1}function trackTouchEnd(e){return trackUp(Touch.cfilter(e))}function setCursor(t){$trk.css("cursor",t)}var onMove=function(){},onDone=function(){},trackDoc=options.trackDocument;return trackDoc||$trk.mousemove(trackMove).mouseup(trackUp).mouseout(trackUp),$img.before($trk),{activateHandlers:activateHandlers,setCursor:setCursor}}(),KeyManager=function(){function watchKeys(){options.keySupport&&($keymgr.show(),$keymgr.focus())}function onBlur(e){$keymgr.hide()}function doNudge(e,x,y){options.allowMove&&(Coords.moveOffset([x,y]),Selection.updateVisible(!0)),e.preventDefault(),e.stopPropagation()}function parseKey(e){if(e.ctrlKey||e.metaKey)return!0;shift_down=!!e.shiftKey;var nudge=shift_down?10:1;switch(e.keyCode){case 37:doNudge(e,-nudge,0);break;case 39:doNudge(e,nudge,0);break;case 38:doNudge(e,0,-nudge);break;case 40:doNudge(e,0,nudge);break;case 27:options.allowSelect&&Selection.release();break;case 9:return!0}return!1}var $keymgr=$('<input type="radio" />').css({position:"fixed",left:"-120px",width:"12px"}).addClass("jcrop-keymgr"),$keywrap=$("<div />").css({position:"absolute",overflow:"hidden"}).append($keymgr);return options.keySupport&&($keymgr.keydown(parseKey).blur(onBlur),ie6mode||!options.fixedSupport?($keymgr.css({position:"absolute",left:"-20px"}),$keywrap.append($keymgr).insertBefore($img)):$keymgr.insertBefore($img)),{watchKeys:watchKeys}}();Touch.support&&$trk.bind("touchstart.jcrop",Touch.newSelection),$hdl_holder.hide(),interfaceUpdate(!0);var api={setImage:setImage,animateTo:animateTo,setSelect:setSelect,setOptions:setOptionsNew,tellSelect:tellSelect,tellScaled:tellScaled,setClass:setClass,disable:disableCrop,enable:enableCrop,cancel:cancelCrop,release:Selection.release,destroy:destroy,focus:KeyManager.watchKeys,getBounds:function(){return[boundx*xscale,boundy*yscale]},getWidgetSize:function(){return[boundx,boundy]},getScaleFactor:function(){return[xscale,yscale]},getOptions:function(){return options},ui:{holder:$div,selection:$sel}};return is_msie&&$div.bind("selectstart",function(){return!1}),$origimg.data("Jcrop",api),api},$.fn.Jcrop=function(options,callback){var api;return this.each(function(){if($(this).data("Jcrop")){if("api"===options)return $(this).data("Jcrop");$(this).data("Jcrop").setOptions(options)}else"IMG"==this.tagName?$.Jcrop.Loader(this,function(){$(this).css({display:"block",visibility:"hidden"}),api=$.Jcrop(this,options),$.isFunction(callback)&&callback.call(api)}):($(this).css({display:"block",visibility:"hidden"}),api=$.Jcrop(this,options),$.isFunction(callback)&&callback.call(api))}),this},$.Jcrop.Loader=function(imgobj,success,error){function completeCheck(){img.complete?($img.unbind(".jcloader"),$.isFunction(success)&&success.call(img)):window.setTimeout(completeCheck,50)}var $img=$(imgobj),img=$img[0];$img.bind("load.jcloader",completeCheck).bind("error.jcloader",function(e){$img.unbind(".jcloader"),$.isFunction(error)&&error.call(img)}),img.complete&&$.isFunction(success)&&($img.unbind(".jcloader"),success.call(img))},$.Jcrop.defaults={allowSelect:!0,allowMove:!0,allowResize:!0,trackDocument:!0,baseClass:"jcrop",addClass:null,bgColor:"black",bgOpacity:.6,bgFade:!1,borderOpacity:.4,handleOpacity:.5,handleSize:null,aspectRatio:0,keySupport:!0,createHandles:["n","s","e","w","nw","ne","se","sw"],createDragbars:["n","s","e","w"],createBorders:["n","s","e","w"],drawBorders:!0,dragEdges:!0,fixedSupport:!0,touchSupport:null,shade:null,boxWidth:0,boxHeight:0,boundary:2,fadeTime:400,animationDelay:20,swingSpeed:3,minSelect:[0,0],maxSize:[0,0],minSize:[0,0],onChange:function(){},onSelect:function(){},onDblClick:function(){},onRelease:function(){}}}(jQuery),function(global,factory){"object"==typeof exports&&"undefined"!=typeof module?module.exports=factory():"function"==typeof define&&define.amd?define(factory):(global=global||self,global.Sortable=factory())}(this,function(){function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);enumerableOnly&&(symbols=symbols.filter(function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable})),keys.push.apply(keys,symbols)}return keys}function _objectSpread2(target){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?ownKeys(Object(source),!0).forEach(function(key){_defineProperty(target,key,source[key])}):Object.getOwnPropertyDescriptors?Object.defineProperties(target,Object.getOwnPropertyDescriptors(source)):ownKeys(Object(source)).forEach(function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))})}return target}function _typeof(obj){"@babel/helpers - typeof";return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj})(obj)}function _defineProperty(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}function _extends(){return _extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target},_extends.apply(this,arguments)}function _objectWithoutPropertiesLoose(source,excluded){if(null==source)return{};var key,i,target={},sourceKeys=Object.keys(source);for(i=0;i<sourceKeys.length;i++)key=sourceKeys[i],excluded.indexOf(key)>=0||(target[key]=source[key]);return target}function _objectWithoutProperties(source,excluded){if(null==source)return{};var key,i,target=_objectWithoutPropertiesLoose(source,excluded);if(Object.getOwnPropertySymbols){var sourceSymbolKeys=Object.getOwnPropertySymbols(source);for(i=0;i<sourceSymbolKeys.length;i++)key=sourceSymbolKeys[i],excluded.indexOf(key)>=0||Object.prototype.propertyIsEnumerable.call(source,key)&&(target[key]=source[key])}return target}function _toConsumableArray(arr){return _arrayWithoutHoles(arr)||_iterableToArray(arr)||_unsupportedIterableToArray(arr)||_nonIterableSpread()}function _arrayWithoutHoles(arr){if(Array.isArray(arr))return _arrayLikeToArray(arr)}function _iterableToArray(iter){if("undefined"!=typeof Symbol&&null!=iter[Symbol.iterator]||null!=iter["@@iterator"])return Array.from(iter)}function _unsupportedIterableToArray(o,minLen){if(o){if("string"==typeof o)return _arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);return"Object"===n&&o.constructor&&(n=o.constructor.name),"Map"===n||"Set"===n?Array.from(o):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?_arrayLikeToArray(o,minLen):void 0}}function _arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function userAgent(pattern){if("undefined"!=typeof window&&window.navigator)return!!navigator.userAgent.match(pattern)}function on(el,event,fn){el.addEventListener(event,fn,!IE11OrLess&&captureMode)}function off(el,event,fn){el.removeEventListener(event,fn,!IE11OrLess&&captureMode)}function matches(el,selector){if(selector){if(">"===selector[0]&&(selector=selector.substring(1)),el)try{if(el.matches)return el.matches(selector);if(el.msMatchesSelector)return el.msMatchesSelector(selector);if(el.webkitMatchesSelector)return el.webkitMatchesSelector(selector)}catch(_){return!1}return!1}}function getParentOrHost(el){return el.host&&el!==document&&el.host.nodeType?el.host:el.parentNode}function closest(el,selector,ctx,includeCTX){if(el){ctx=ctx||document;do{if(null!=selector&&(">"===selector[0]?el.parentNode===ctx&&matches(el,selector):matches(el,selector))||includeCTX&&el===ctx)return el;if(el===ctx)break}while(el=getParentOrHost(el))}return null}function toggleClass(el,name,state){if(el&&name)if(el.classList)el.classList[state?"add":"remove"](name);else{var className=(" "+el.className+" ").replace(R_SPACE," ").replace(" "+name+" "," ");el.className=(className+(state?" "+name:"")).replace(R_SPACE," ")}}function css(el,prop,val){var style=el&&el.style;if(style){if(void 0===val)return document.defaultView&&document.defaultView.getComputedStyle?val=document.defaultView.getComputedStyle(el,""):el.currentStyle&&(val=el.currentStyle),void 0===prop?val:val[prop];prop in style||-1!==prop.indexOf("webkit")||(prop="-webkit-"+prop),style[prop]=val+("string"==typeof val?"":"px")}}function matrix(el,selfOnly){var appliedTransforms="";if("string"==typeof el)appliedTransforms=el;else do{var transform=css(el,"transform");transform&&"none"!==transform&&(appliedTransforms=transform+" "+appliedTransforms)}while(!selfOnly&&(el=el.parentNode));var matrixFn=window.DOMMatrix||window.WebKitCSSMatrix||window.CSSMatrix||window.MSCSSMatrix;return matrixFn&&new matrixFn(appliedTransforms)}function find(ctx,tagName,iterator){if(ctx){var list=ctx.getElementsByTagName(tagName),i=0,n=list.length;if(iterator)for(;i<n;i++)iterator(list[i],i);return list}return[]}function getWindowScrollingElement(){var scrollingElement=document.scrollingElement;return scrollingElement||document.documentElement}function getRect(el,relativeToContainingBlock,relativeToNonStaticParent,undoScale,container){if(el.getBoundingClientRect||el===window){var elRect,top,left,bottom,right,height,width;if(el!==window&&el.parentNode&&el!==getWindowScrollingElement()?(elRect=el.getBoundingClientRect(),top=elRect.top,left=elRect.left,bottom=elRect.bottom,right=elRect.right,height=elRect.height,width=elRect.width):(top=0,left=0,bottom=window.innerHeight,right=window.innerWidth,height=window.innerHeight,width=window.innerWidth),(relativeToContainingBlock||relativeToNonStaticParent)&&el!==window&&(container=container||el.parentNode,!IE11OrLess))do{if(container&&container.getBoundingClientRect&&("none"!==css(container,"transform")||relativeToNonStaticParent&&"static"!==css(container,"position"))){var containerRect=container.getBoundingClientRect();top-=containerRect.top+parseInt(css(container,"border-top-width")),left-=containerRect.left+parseInt(css(container,"border-left-width")),bottom=top+elRect.height,right=left+elRect.width;break}}while(container=container.parentNode);if(undoScale&&el!==window){var elMatrix=matrix(container||el),scaleX=elMatrix&&elMatrix.a,scaleY=elMatrix&&elMatrix.d;elMatrix&&(top/=scaleY,left/=scaleX,width/=scaleX,height/=scaleY,bottom=top+height,right=left+width)}return{top:top,left:left,bottom:bottom,right:right,width:width,height:height}}}function isScrolledPast(el,elSide,parentSide){for(var parent=getParentAutoScrollElement(el,!0),elSideVal=getRect(el)[elSide];parent;){var parentSideVal=getRect(parent)[parentSide];if(!("top"===parentSide||"left"===parentSide?elSideVal>=parentSideVal:elSideVal<=parentSideVal))return parent;if(parent===getWindowScrollingElement())break;parent=getParentAutoScrollElement(parent,!1)}return!1}function getChild(el,childNum,options,includeDragEl){for(var currentChild=0,i=0,children=el.children;i<children.length;){if("none"!==children[i].style.display&&children[i]!==Sortable.ghost&&(includeDragEl||children[i]!==Sortable.dragged)&&closest(children[i],options.draggable,el,!1)){if(currentChild===childNum)return children[i];currentChild++}i++}return null}function lastChild(el,selector){for(var last=el.lastElementChild;last&&(last===Sortable.ghost||"none"===css(last,"display")||selector&&!matches(last,selector));)last=last.previousElementSibling;return last||null}function index(el,selector){var index=0;if(!el||!el.parentNode)return-1;for(;el=el.previousElementSibling;)"TEMPLATE"===el.nodeName.toUpperCase()||el===Sortable.clone||selector&&!matches(el,selector)||index++;return index}function getRelativeScrollOffset(el){var offsetLeft=0,offsetTop=0,winScroller=getWindowScrollingElement();if(el)do{var elMatrix=matrix(el),scaleX=elMatrix.a,scaleY=elMatrix.d;offsetLeft+=el.scrollLeft*scaleX,offsetTop+=el.scrollTop*scaleY}while(el!==winScroller&&(el=el.parentNode));return[offsetLeft,offsetTop]}function indexOfObject(arr,obj){for(var i in arr)if(arr.hasOwnProperty(i))for(var key in obj)if(obj.hasOwnProperty(key)&&obj[key]===arr[i][key])return Number(i);return-1}function getParentAutoScrollElement(el,includeSelf){if(!el||!el.getBoundingClientRect)return getWindowScrollingElement();var elem=el,gotSelf=!1;do{if(elem.clientWidth<elem.scrollWidth||elem.clientHeight<elem.scrollHeight){var elemCSS=css(elem);if(elem.clientWidth<elem.scrollWidth&&("auto"==elemCSS.overflowX||"scroll"==elemCSS.overflowX)||elem.clientHeight<elem.scrollHeight&&("auto"==elemCSS.overflowY||"scroll"==elemCSS.overflowY)){if(!elem.getBoundingClientRect||elem===document.body)return getWindowScrollingElement();if(gotSelf||includeSelf)return elem;gotSelf=!0}}}while(elem=elem.parentNode);return getWindowScrollingElement()}function extend(dst,src){if(dst&&src)for(var key in src)src.hasOwnProperty(key)&&(dst[key]=src[key]);return dst}function isRectEqual(rect1,rect2){return Math.round(rect1.top)===Math.round(rect2.top)&&Math.round(rect1.left)===Math.round(rect2.left)&&Math.round(rect1.height)===Math.round(rect2.height)&&Math.round(rect1.width)===Math.round(rect2.width)}function throttle(callback,ms){return function(){if(!_throttleTimeout){var args=arguments,_this=this;1===args.length?callback.call(_this,args[0]):callback.apply(_this,args),_throttleTimeout=setTimeout(function(){_throttleTimeout=void 0},ms)}}}function cancelThrottle(){clearTimeout(_throttleTimeout),_throttleTimeout=void 0}function scrollBy(el,x,y){el.scrollLeft+=x,el.scrollTop+=y}function clone(el){var Polymer=window.Polymer,$=window.jQuery||window.Zepto;return Polymer&&Polymer.dom?Polymer.dom(el).cloneNode(!0):$?$(el).clone(!0)[0]:el.cloneNode(!0)}function setRect(el,rect){css(el,"position","absolute"),css(el,"top",rect.top),css(el,"left",rect.left),css(el,"width",rect.width),css(el,"height",rect.height)}function unsetRect(el){css(el,"position",""),css(el,"top",""),css(el,"left",""),css(el,"width",""),css(el,"height","")}function AnimationStateManager(){var animationCallbackId,animationStates=[];return{captureAnimationState:function(){if(animationStates=[],this.options.animation){[].slice.call(this.el.children).forEach(function(child){if("none"!==css(child,"display")&&child!==Sortable.ghost){animationStates.push({target:child,rect:getRect(child)});var fromRect=_objectSpread2({},animationStates[animationStates.length-1].rect);if(child.thisAnimationDuration){var childMatrix=matrix(child,!0);childMatrix&&(fromRect.top-=childMatrix.f,fromRect.left-=childMatrix.e)}child.fromRect=fromRect}})}},addAnimationState:function(state){animationStates.push(state)},removeAnimationState:function(target){animationStates.splice(indexOfObject(animationStates,{target:target}),1)},animateAll:function(callback){var _this=this;if(!this.options.animation)return clearTimeout(animationCallbackId),void("function"==typeof callback&&callback());var animating=!1,animationTime=0;animationStates.forEach(function(state){var time=0,target=state.target,fromRect=target.fromRect,toRect=getRect(target),prevFromRect=target.prevFromRect,prevToRect=target.prevToRect,animatingRect=state.rect,targetMatrix=matrix(target,!0);targetMatrix&&(toRect.top-=targetMatrix.f,toRect.left-=targetMatrix.e),target.toRect=toRect,target.thisAnimationDuration&&isRectEqual(prevFromRect,toRect)&&!isRectEqual(fromRect,toRect)&&(animatingRect.top-toRect.top)/(animatingRect.left-toRect.left)==(fromRect.top-toRect.top)/(fromRect.left-toRect.left)&&(time=calculateRealTime(animatingRect,prevFromRect,prevToRect,_this.options)),isRectEqual(toRect,fromRect)||(target.prevFromRect=fromRect,target.prevToRect=toRect,time||(time=_this.options.animation),_this.animate(target,animatingRect,toRect,time)),time&&(animating=!0,animationTime=Math.max(animationTime,time),clearTimeout(target.animationResetTimer),target.animationResetTimer=setTimeout(function(){target.animationTime=0,target.prevFromRect=null,target.fromRect=null,target.prevToRect=null,target.thisAnimationDuration=null},time),target.thisAnimationDuration=time)}),clearTimeout(animationCallbackId),animating?animationCallbackId=setTimeout(function(){"function"==typeof callback&&callback()},animationTime):"function"==typeof callback&&callback(),animationStates=[]},animate:function(target,currentRect,toRect,duration){if(duration){css(target,"transition",""),css(target,"transform","");var elMatrix=matrix(this.el),scaleX=elMatrix&&elMatrix.a,scaleY=elMatrix&&elMatrix.d,translateX=(currentRect.left-toRect.left)/(scaleX||1),translateY=(currentRect.top-toRect.top)/(scaleY||1);target.animatingX=!!translateX,target.animatingY=!!translateY,css(target,"transform","translate3d("+translateX+"px,"+translateY+"px,0)"),this.forRepaintDummy=repaint(target),css(target,"transition","transform "+duration+"ms"+(this.options.easing?" "+this.options.easing:"")),css(target,"transform","translate3d(0,0,0)"),"number"==typeof target.animated&&clearTimeout(target.animated),target.animated=setTimeout(function(){css(target,"transition",""),css(target,"transform",""),target.animated=!1,target.animatingX=!1,target.animatingY=!1},duration)}}}}function repaint(target){return target.offsetWidth}function calculateRealTime(animatingRect,fromRect,toRect,options){return Math.sqrt(Math.pow(fromRect.top-animatingRect.top,2)+Math.pow(fromRect.left-animatingRect.left,2))/Math.sqrt(Math.pow(fromRect.top-toRect.top,2)+Math.pow(fromRect.left-toRect.left,2))*options.animation}function dispatchEvent(_ref){var sortable=_ref.sortable,rootEl=_ref.rootEl,name=_ref.name,targetEl=_ref.targetEl,cloneEl=_ref.cloneEl,toEl=_ref.toEl,fromEl=_ref.fromEl,oldIndex=_ref.oldIndex,newIndex=_ref.newIndex,oldDraggableIndex=_ref.oldDraggableIndex,newDraggableIndex=_ref.newDraggableIndex,originalEvent=_ref.originalEvent,putSortable=_ref.putSortable,extraEventProperties=_ref.extraEventProperties;if(sortable=sortable||rootEl&&rootEl[expando]){var evt,options=sortable.options,onName="on"+name.charAt(0).toUpperCase()+name.substr(1);!window.CustomEvent||IE11OrLess||Edge?(evt=document.createEvent("Event"),evt.initEvent(name,!0,!0)):evt=new CustomEvent(name,{bubbles:!0,cancelable:!0}),evt.to=toEl||rootEl,evt.from=fromEl||rootEl,evt.item=targetEl||rootEl,evt.clone=cloneEl,evt.oldIndex=oldIndex,evt.newIndex=newIndex,evt.oldDraggableIndex=oldDraggableIndex,evt.newDraggableIndex=newDraggableIndex,evt.originalEvent=originalEvent,evt.pullMode=putSortable?putSortable.lastPutMode:void 0;var allEventProperties=_objectSpread2(_objectSpread2({},extraEventProperties),PluginManager.getEventProperties(name,sortable));for(var option in allEventProperties)evt[option]=allEventProperties[option];rootEl&&rootEl.dispatchEvent(evt),options[onName]&&options[onName].call(sortable,evt)}}function _dispatchEvent(info){dispatchEvent(_objectSpread2({putSortable:putSortable,cloneEl:cloneEl,targetEl:dragEl,rootEl:rootEl,oldIndex:oldIndex,oldDraggableIndex:oldDraggableIndex,newIndex:newIndex,newDraggableIndex:newDraggableIndex},info))}function Sortable(el,options){if(!el||!el.nodeType||1!==el.nodeType)throw"Sortable: `el` must be an HTMLElement, not ".concat({}.toString.call(el));this.el=el,this.options=options=_extends({},options),el[expando]=this;var defaults={group:null,sort:!0,disabled:!1,store:null,handle:null,draggable:/^[uo]l$/i.test(el.nodeName)?">li":">*",swapThreshold:1,invertSwap:!1,invertedSwapThreshold:null,removeCloneOnHide:!0,direction:function(){return _detectDirection(el,this.options)},ghostClass:"sortable-ghost",chosenClass:"sortable-chosen",dragClass:"sortable-drag",ignore:"a, img",filter:null,preventOnFilter:!0,animation:0,easing:null,setData:function(dataTransfer,dragEl){dataTransfer.setData("Text",dragEl.textContent)},dropBubble:!1,dragoverBubble:!1,dataIdAttr:"data-id",delay:0,delayOnTouchOnly:!1,touchStartThreshold:(Number.parseInt?Number:window).parseInt(window.devicePixelRatio,10)||1,forceFallback:!1,fallbackClass:"sortable-fallback",fallbackOnBody:!1,fallbackTolerance:0,fallbackOffset:{x:0,y:0},supportPointer:!1!==Sortable.supportPointer&&"PointerEvent"in window&&!Safari,emptyInsertThreshold:5};PluginManager.initializePlugins(this,el,defaults);for(var name in defaults)!(name in options)&&(options[name]=defaults[name]);_prepareGroup(options);for(var fn in this)"_"===fn.charAt(0)&&"function"==typeof this[fn]&&(this[fn]=this[fn].bind(this));this.nativeDraggable=!options.forceFallback&&supportDraggable,this.nativeDraggable&&(this.options.touchStartThreshold=1),options.supportPointer?on(el,"pointerdown",this._onTapStart):(on(el,"mousedown",this._onTapStart),on(el,"touchstart",this._onTapStart)),this.nativeDraggable&&(on(el,"dragover",this),on(el,"dragenter",this)),sortables.push(this.el),options.store&&options.store.get&&this.sort(options.store.get(this)||[]),_extends(this,AnimationStateManager())}function _globalDragOver(evt){evt.dataTransfer&&(evt.dataTransfer.dropEffect="move"),evt.cancelable&&evt.preventDefault()}function _onMove(fromEl,toEl,dragEl,dragRect,targetEl,targetRect,originalEvent,willInsertAfter){var evt,retVal,sortable=fromEl[expando],onMoveFn=sortable.options.onMove;return!window.CustomEvent||IE11OrLess||Edge?(evt=document.createEvent("Event"),evt.initEvent("move",!0,!0)):evt=new CustomEvent("move",{bubbles:!0,cancelable:!0}),evt.to=toEl,evt.from=fromEl,evt.dragged=dragEl,evt.draggedRect=dragRect,evt.related=targetEl||toEl,evt.relatedRect=targetRect||getRect(toEl),evt.willInsertAfter=willInsertAfter,evt.originalEvent=originalEvent,fromEl.dispatchEvent(evt),onMoveFn&&(retVal=onMoveFn.call(sortable,evt,originalEvent)),retVal}function _disableDraggable(el){el.draggable=!1}function _unsilent(){_silent=!1}function _ghostIsFirst(evt,vertical,sortable){var rect=getRect(getChild(sortable.el,0,sortable.options,!0)),spacer=10;return vertical?evt.clientX<rect.left-spacer||evt.clientY<rect.top&&evt.clientX<rect.right:evt.clientY<rect.top-spacer||evt.clientY<rect.bottom&&evt.clientX<rect.left}function _ghostIsLast(evt,vertical,sortable){var rect=getRect(lastChild(sortable.el,sortable.options.draggable)),spacer=10;return vertical?evt.clientX>rect.right+spacer||evt.clientX<=rect.right&&evt.clientY>rect.bottom&&evt.clientX>=rect.left:evt.clientX>rect.right&&evt.clientY>rect.top||evt.clientX<=rect.right&&evt.clientY>rect.bottom+spacer}function _getSwapDirection(evt,target,targetRect,vertical,swapThreshold,invertedSwapThreshold,invertSwap,isLastTarget){var mouseOnAxis=vertical?evt.clientY:evt.clientX,targetLength=vertical?targetRect.height:targetRect.width,targetS1=vertical?targetRect.top:targetRect.left,targetS2=vertical?targetRect.bottom:targetRect.right,invert=!1;if(!invertSwap)if(isLastTarget&&targetMoveDistance<targetLength*swapThreshold){if(!pastFirstInvertThresh&&(1===lastDirection?mouseOnAxis>targetS1+targetLength*invertedSwapThreshold/2:mouseOnAxis<targetS2-targetLength*invertedSwapThreshold/2)&&(pastFirstInvertThresh=!0),pastFirstInvertThresh)invert=!0;else if(1===lastDirection?mouseOnAxis<targetS1+targetMoveDistance:mouseOnAxis>targetS2-targetMoveDistance)return-lastDirection}else if(mouseOnAxis>targetS1+targetLength*(1-swapThreshold)/2&&mouseOnAxis<targetS2-targetLength*(1-swapThreshold)/2)return _getInsertDirection(target);return invert=invert||invertSwap,invert&&(mouseOnAxis<targetS1+targetLength*invertedSwapThreshold/2||mouseOnAxis>targetS2-targetLength*invertedSwapThreshold/2)?mouseOnAxis>targetS1+targetLength/2?1:-1:0}function _getInsertDirection(target){return index(dragEl)<index(target)?1:-1}function _generateId(el){for(var str=el.tagName+el.className+el.src+el.href+el.textContent,i=str.length,sum=0;i--;)sum+=str.charCodeAt(i);return sum.toString(36)}function _saveInputCheckedState(root){savedInputChecked.length=0;for(var inputs=root.getElementsByTagName("input"),idx=inputs.length;idx--;){var el=inputs[idx];el.checked&&savedInputChecked.push(el)}}function _nextTick(fn){return setTimeout(fn,0)}function _cancelNextTick(id){return clearTimeout(id)}function AutoScrollPlugin(){function AutoScroll(){this.defaults={scroll:!0,forceAutoScrollFallback:!1,scrollSensitivity:30,scrollSpeed:10,bubbleScroll:!0};for(var fn in this)"_"===fn.charAt(0)&&"function"==typeof this[fn]&&(this[fn]=this[fn].bind(this))}return AutoScroll.prototype={dragStarted:function(_ref){var originalEvent=_ref.originalEvent;this.sortable.nativeDraggable?on(document,"dragover",this._handleAutoScroll):this.options.supportPointer?on(document,"pointermove",this._handleFallbackAutoScroll):originalEvent.touches?on(document,"touchmove",this._handleFallbackAutoScroll):on(document,"mousemove",this._handleFallbackAutoScroll)},dragOverCompleted:function(_ref2){var originalEvent=_ref2.originalEvent;this.options.dragOverBubble||originalEvent.rootEl||this._handleAutoScroll(originalEvent)},drop:function(){this.sortable.nativeDraggable?off(document,"dragover",this._handleAutoScroll):(off(document,"pointermove",this._handleFallbackAutoScroll),off(document,"touchmove",this._handleFallbackAutoScroll),off(document,"mousemove",this._handleFallbackAutoScroll)),clearPointerElemChangedInterval(),clearAutoScrolls(),cancelThrottle()},nulling:function(){touchEvt$1=scrollRootEl=scrollEl=scrolling=pointerElemChangedInterval=lastAutoScrollX=lastAutoScrollY=null,autoScrolls.length=0},_handleFallbackAutoScroll:function(evt){this._handleAutoScroll(evt,!0)},_handleAutoScroll:function(evt,fallback){var _this=this,x=(evt.touches?evt.touches[0]:evt).clientX,y=(evt.touches?evt.touches[0]:evt).clientY,elem=document.elementFromPoint(x,y);if(touchEvt$1=evt,fallback||this.options.forceAutoScrollFallback||Edge||IE11OrLess||Safari){autoScroll(evt,this.options,elem,fallback);var ogElemScroller=getParentAutoScrollElement(elem,!0);!scrolling||pointerElemChangedInterval&&x===lastAutoScrollX&&y===lastAutoScrollY||(pointerElemChangedInterval&&clearPointerElemChangedInterval(),pointerElemChangedInterval=setInterval(function(){var newElem=getParentAutoScrollElement(document.elementFromPoint(x,y),!0);newElem!==ogElemScroller&&(ogElemScroller=newElem,clearAutoScrolls()),autoScroll(evt,_this.options,newElem,fallback)},10),lastAutoScrollX=x,lastAutoScrollY=y)}else{if(!this.options.bubbleScroll||getParentAutoScrollElement(elem,!0)===getWindowScrollingElement())return void clearAutoScrolls();autoScroll(evt,this.options,getParentAutoScrollElement(elem,!1),!1)}}},_extends(AutoScroll,{pluginName:"scroll",initializeByDefault:!0})}function clearAutoScrolls(){autoScrolls.forEach(function(autoScroll){clearInterval(autoScroll.pid)}),autoScrolls=[]}function clearPointerElemChangedInterval(){clearInterval(pointerElemChangedInterval)}function Revert(){}function Remove(){}function SwapPlugin(){function Swap(){this.defaults={swapClass:"sortable-swap-highlight"}}return Swap.prototype={dragStart:function(_ref){var dragEl=_ref.dragEl;lastSwapEl=dragEl},dragOverValid:function(_ref2){var completed=_ref2.completed,target=_ref2.target,onMove=_ref2.onMove,activeSortable=_ref2.activeSortable,changed=_ref2.changed,cancel=_ref2.cancel;if(activeSortable.options.swap){var el=this.sortable.el,options=this.options;if(target&&target!==el){var prevSwapEl=lastSwapEl;!1!==onMove(target)?(toggleClass(target,options.swapClass,!0),lastSwapEl=target):lastSwapEl=null,prevSwapEl&&prevSwapEl!==lastSwapEl&&toggleClass(prevSwapEl,options.swapClass,!1)}changed(),completed(!0),cancel()}},drop:function(_ref3){var activeSortable=_ref3.activeSortable,putSortable=_ref3.putSortable,dragEl=_ref3.dragEl,toSortable=putSortable||this.sortable,options=this.options;lastSwapEl&&toggleClass(lastSwapEl,options.swapClass,!1),lastSwapEl&&(options.swap||putSortable&&putSortable.options.swap)&&dragEl!==lastSwapEl&&(toSortable.captureAnimationState(),toSortable!==activeSortable&&activeSortable.captureAnimationState(),swapNodes(dragEl,lastSwapEl),toSortable.animateAll(),toSortable!==activeSortable&&activeSortable.animateAll())},nulling:function(){lastSwapEl=null}},_extends(Swap,{pluginName:"swap",eventProperties:function(){return{swapItem:lastSwapEl}}})}function swapNodes(n1,n2){var i1,i2,p1=n1.parentNode,p2=n2.parentNode;p1&&p2&&!p1.isEqualNode(n2)&&!p2.isEqualNode(n1)&&(i1=index(n1),i2=index(n2),p1.isEqualNode(p2)&&i1<i2&&i2++,p1.insertBefore(n2,p1.children[i1]),p2.insertBefore(n1,p2.children[i2]))}function MultiDragPlugin(){function MultiDrag(sortable){for(var fn in this)"_"===fn.charAt(0)&&"function"==typeof this[fn]&&(this[fn]=this[fn].bind(this));sortable.options.avoidImplicitDeselect||(sortable.options.supportPointer?on(document,"pointerup",this._deselectMultiDrag):(on(document,"mouseup",this._deselectMultiDrag),on(document,"touchend",this._deselectMultiDrag))),on(document,"keydown",this._checkKeyDown),on(document,"keyup",this._checkKeyUp),this.defaults={selectedClass:"sortable-selected",multiDragKey:null,avoidImplicitDeselect:!1,setData:function(dataTransfer,dragEl){var data="";multiDragElements.length&&multiDragSortable===sortable?multiDragElements.forEach(function(multiDragElement,i){data+=(i?", ":"")+multiDragElement.textContent}):data=dragEl.textContent,dataTransfer.setData("Text",data)}}}return MultiDrag.prototype={multiDragKeyDown:!1,isMultiDrag:!1,delayStartGlobal:function(_ref){var dragged=_ref.dragEl;dragEl$1=dragged},delayEnded:function(){this.isMultiDrag=~multiDragElements.indexOf(dragEl$1)},setupClone:function(_ref2){var sortable=_ref2.sortable,cancel=_ref2.cancel;if(this.isMultiDrag){for(var i=0;i<multiDragElements.length;i++)multiDragClones.push(clone(multiDragElements[i])),multiDragClones[i].sortableIndex=multiDragElements[i].sortableIndex,multiDragClones[i].draggable=!1,multiDragClones[i].style["will-change"]="",toggleClass(multiDragClones[i],this.options.selectedClass,!1),multiDragElements[i]===dragEl$1&&toggleClass(multiDragClones[i],this.options.chosenClass,!1);sortable._hideClone(),cancel()}},clone:function(_ref3){var sortable=_ref3.sortable,rootEl=_ref3.rootEl,dispatchSortableEvent=_ref3.dispatchSortableEvent,cancel=_ref3.cancel;this.isMultiDrag&&(this.options.removeCloneOnHide||multiDragElements.length&&multiDragSortable===sortable&&(insertMultiDragClones(!0,rootEl),dispatchSortableEvent("clone"),cancel()))},showClone:function(_ref4){var cloneNowShown=_ref4.cloneNowShown,rootEl=_ref4.rootEl,cancel=_ref4.cancel;this.isMultiDrag&&(insertMultiDragClones(!1,rootEl),multiDragClones.forEach(function(clone){css(clone,"display","")}),cloneNowShown(),clonesHidden=!1,cancel())},hideClone:function(_ref5){var _this=this,cloneNowHidden=(_ref5.sortable,_ref5.cloneNowHidden),cancel=_ref5.cancel;this.isMultiDrag&&(multiDragClones.forEach(function(clone){css(clone,"display","none"),_this.options.removeCloneOnHide&&clone.parentNode&&clone.parentNode.removeChild(clone)}),cloneNowHidden(),clonesHidden=!0,cancel())},dragStartGlobal:function(_ref6){_ref6.sortable;!this.isMultiDrag&&multiDragSortable&&multiDragSortable.multiDrag._deselectMultiDrag(),multiDragElements.forEach(function(multiDragElement){multiDragElement.sortableIndex=index(multiDragElement)}),multiDragElements=multiDragElements.sort(function(a,b){return a.sortableIndex-b.sortableIndex}),dragStarted=!0},dragStarted:function(_ref7){var _this2=this,sortable=_ref7.sortable;if(this.isMultiDrag){if(this.options.sort&&(sortable.captureAnimationState(),this.options.animation)){multiDragElements.forEach(function(multiDragElement){multiDragElement!==dragEl$1&&css(multiDragElement,"position","absolute")});var dragRect=getRect(dragEl$1,!1,!0,!0);multiDragElements.forEach(function(multiDragElement){multiDragElement!==dragEl$1&&setRect(multiDragElement,dragRect)}),folding=!0,initialFolding=!0}sortable.animateAll(function(){folding=!1,initialFolding=!1,_this2.options.animation&&multiDragElements.forEach(function(multiDragElement){unsetRect(multiDragElement)}),_this2.options.sort&&removeMultiDragElements()})}},dragOver:function(_ref8){var target=_ref8.target,completed=_ref8.completed,cancel=_ref8.cancel;folding&&~multiDragElements.indexOf(target)&&(completed(!1),cancel())},revert:function(_ref9){var fromSortable=_ref9.fromSortable,rootEl=_ref9.rootEl,sortable=_ref9.sortable,dragRect=_ref9.dragRect;multiDragElements.length>1&&(multiDragElements.forEach(function(multiDragElement){sortable.addAnimationState({target:multiDragElement,rect:folding?getRect(multiDragElement):dragRect}),unsetRect(multiDragElement),multiDragElement.fromRect=dragRect,fromSortable.removeAnimationState(multiDragElement)}),folding=!1,insertMultiDragElements(!this.options.removeCloneOnHide,rootEl))},dragOverCompleted:function(_ref10){var sortable=_ref10.sortable,isOwner=_ref10.isOwner,insertion=_ref10.insertion,activeSortable=_ref10.activeSortable,parentEl=_ref10.parentEl,putSortable=_ref10.putSortable,options=this.options;if(insertion){if(isOwner&&activeSortable._hideClone(),initialFolding=!1,options.animation&&multiDragElements.length>1&&(folding||!isOwner&&!activeSortable.options.sort&&!putSortable)){var dragRectAbsolute=getRect(dragEl$1,!1,!0,!0);multiDragElements.forEach(function(multiDragElement){multiDragElement!==dragEl$1&&(setRect(multiDragElement,dragRectAbsolute),parentEl.appendChild(multiDragElement))}),folding=!0}if(!isOwner)if(folding||removeMultiDragElements(),multiDragElements.length>1){var clonesHiddenBefore=clonesHidden;activeSortable._showClone(sortable),activeSortable.options.animation&&!clonesHidden&&clonesHiddenBefore&&multiDragClones.forEach(function(clone){activeSortable.addAnimationState({target:clone,rect:clonesFromRect}),clone.fromRect=clonesFromRect,clone.thisAnimationDuration=null})}else activeSortable._showClone(sortable)}},dragOverAnimationCapture:function(_ref11){var dragRect=_ref11.dragRect,isOwner=_ref11.isOwner,activeSortable=_ref11.activeSortable;if(multiDragElements.forEach(function(multiDragElement){multiDragElement.thisAnimationDuration=null}),activeSortable.options.animation&&!isOwner&&activeSortable.multiDrag.isMultiDrag){clonesFromRect=_extends({},dragRect);var dragMatrix=matrix(dragEl$1,!0);clonesFromRect.top-=dragMatrix.f,clonesFromRect.left-=dragMatrix.e}},dragOverAnimationComplete:function(){folding&&(folding=!1,removeMultiDragElements())},drop:function(_ref12){var evt=_ref12.originalEvent,rootEl=_ref12.rootEl,parentEl=_ref12.parentEl,sortable=_ref12.sortable,dispatchSortableEvent=_ref12.dispatchSortableEvent,oldIndex=_ref12.oldIndex,putSortable=_ref12.putSortable,toSortable=putSortable||this.sortable;if(evt){var options=this.options,children=parentEl.children;if(!dragStarted)if(options.multiDragKey&&!this.multiDragKeyDown&&this._deselectMultiDrag(),toggleClass(dragEl$1,options.selectedClass,!~multiDragElements.indexOf(dragEl$1)),~multiDragElements.indexOf(dragEl$1))multiDragElements.splice(multiDragElements.indexOf(dragEl$1),1),lastMultiDragSelect=null,dispatchEvent({sortable:sortable,rootEl:rootEl,name:"deselect",targetEl:dragEl$1,originalEvt:evt});else{if(multiDragElements.push(dragEl$1),dispatchEvent({sortable:sortable,rootEl:rootEl,name:"select",targetEl:dragEl$1,originalEvt:evt}),evt.shiftKey&&lastMultiDragSelect&&sortable.el.contains(lastMultiDragSelect)){var lastIndex=index(lastMultiDragSelect),currentIndex=index(dragEl$1);if(~lastIndex&&~currentIndex&&lastIndex!==currentIndex){var n,i;for(currentIndex>lastIndex?(i=lastIndex,n=currentIndex):(i=currentIndex,n=lastIndex+1);i<n;i++)~multiDragElements.indexOf(children[i])||(toggleClass(children[i],options.selectedClass,!0),multiDragElements.push(children[i]),dispatchEvent({sortable:sortable,rootEl:rootEl,name:"select",targetEl:children[i],originalEvt:evt}))}}else lastMultiDragSelect=dragEl$1;multiDragSortable=toSortable}if(dragStarted&&this.isMultiDrag){if(folding=!1,(parentEl[expando].options.sort||parentEl!==rootEl)&&multiDragElements.length>1){var dragRect=getRect(dragEl$1),multiDragIndex=index(dragEl$1,":not(."+this.options.selectedClass+")");if(!initialFolding&&options.animation&&(dragEl$1.thisAnimationDuration=null),toSortable.captureAnimationState(),!initialFolding&&(options.animation&&(dragEl$1.fromRect=dragRect,multiDragElements.forEach(function(multiDragElement){if(multiDragElement.thisAnimationDuration=null,multiDragElement!==dragEl$1){var rect=folding?getRect(multiDragElement):dragRect;multiDragElement.fromRect=rect,toSortable.addAnimationState({target:multiDragElement,rect:rect})}})),removeMultiDragElements(),multiDragElements.forEach(function(multiDragElement){children[multiDragIndex]?parentEl.insertBefore(multiDragElement,children[multiDragIndex]):parentEl.appendChild(multiDragElement),multiDragIndex++}),oldIndex===index(dragEl$1))){var update=!1;multiDragElements.forEach(function(multiDragElement){if(multiDragElement.sortableIndex!==index(multiDragElement))return void(update=!0)}),update&&dispatchSortableEvent("update")}multiDragElements.forEach(function(multiDragElement){unsetRect(multiDragElement)}),toSortable.animateAll()}multiDragSortable=toSortable}(rootEl===parentEl||putSortable&&"clone"!==putSortable.lastPutMode)&&multiDragClones.forEach(function(clone){clone.parentNode&&clone.parentNode.removeChild(clone)})}},nullingGlobal:function(){this.isMultiDrag=dragStarted=!1,multiDragClones.length=0},destroyGlobal:function(){this._deselectMultiDrag(),off(document,"pointerup",this._deselectMultiDrag),off(document,"mouseup",this._deselectMultiDrag),off(document,"touchend",this._deselectMultiDrag),off(document,"keydown",this._checkKeyDown),off(document,"keyup",this._checkKeyUp)},_deselectMultiDrag:function(evt){if(!(void 0!==dragStarted&&dragStarted||multiDragSortable!==this.sortable||evt&&closest(evt.target,this.options.draggable,this.sortable.el,!1)||evt&&0!==evt.button))for(;multiDragElements.length;){var el=multiDragElements[0];toggleClass(el,this.options.selectedClass,!1),multiDragElements.shift(),dispatchEvent({sortable:this.sortable,rootEl:this.sortable.el,name:"deselect",targetEl:el,originalEvt:evt})}},_checkKeyDown:function(evt){evt.key===this.options.multiDragKey&&(this.multiDragKeyDown=!0)},_checkKeyUp:function(evt){evt.key===this.options.multiDragKey&&(this.multiDragKeyDown=!1)}},_extends(MultiDrag,{pluginName:"multiDrag",utils:{select:function(el){var sortable=el.parentNode[expando];sortable&&sortable.options.multiDrag&&!~multiDragElements.indexOf(el)&&(multiDragSortable&&multiDragSortable!==sortable&&(multiDragSortable.multiDrag._deselectMultiDrag(),multiDragSortable=sortable),toggleClass(el,sortable.options.selectedClass,!0),multiDragElements.push(el))},deselect:function(el){var sortable=el.parentNode[expando],index=multiDragElements.indexOf(el);sortable&&sortable.options.multiDrag&&~index&&(toggleClass(el,sortable.options.selectedClass,!1),multiDragElements.splice(index,1))}},eventProperties:function(){var _this3=this,oldIndicies=[],newIndicies=[];return multiDragElements.forEach(function(multiDragElement){oldIndicies.push({multiDragElement:multiDragElement,index:multiDragElement.sortableIndex});var newIndex;newIndex=folding&&multiDragElement!==dragEl$1?-1:folding?index(multiDragElement,":not(."+_this3.options.selectedClass+")"):index(multiDragElement),newIndicies.push({multiDragElement:multiDragElement,index:newIndex})}),{items:_toConsumableArray(multiDragElements),clones:[].concat(multiDragClones),oldIndicies:oldIndicies,newIndicies:newIndicies}},optionListeners:{multiDragKey:function(key){return key=key.toLowerCase(),"ctrl"===key?key="Control":key.length>1&&(key=key.charAt(0).toUpperCase()+key.substr(1)),key}}})}function insertMultiDragElements(clonesInserted,rootEl){multiDragElements.forEach(function(multiDragElement,i){var target=rootEl.children[multiDragElement.sortableIndex+(clonesInserted?Number(i):0)];target?rootEl.insertBefore(multiDragElement,target):rootEl.appendChild(multiDragElement)})}function insertMultiDragClones(elementsInserted,rootEl){multiDragClones.forEach(function(clone,i){var target=rootEl.children[clone.sortableIndex+(elementsInserted?Number(i):0)];target?rootEl.insertBefore(clone,target):rootEl.appendChild(clone)})}function removeMultiDragElements(){multiDragElements.forEach(function(multiDragElement){multiDragElement!==dragEl$1&&multiDragElement.parentNode&&multiDragElement.parentNode.removeChild(multiDragElement)})}var _throttleTimeout,dragEl,parentEl,ghostEl,rootEl,nextEl,lastDownEl,cloneEl,cloneHidden,oldIndex,newIndex,oldDraggableIndex,newDraggableIndex,activeGroup,putSortable,tapEvt,touchEvt,lastDx,lastDy,tapDistanceLeft,tapDistanceTop,moved,lastTarget,lastDirection,targetMoveDistance,ghostRelativeParent,version="1.14.0",IE11OrLess=userAgent(/(?:Trident.*rv[ :]?11\.|msie|iemobile|Windows Phone)/i),Edge=userAgent(/Edge/i),FireFox=userAgent(/firefox/i),Safari=userAgent(/safari/i)&&!userAgent(/chrome/i)&&!userAgent(/android/i),IOS=userAgent(/iP(ad|od|hone)/i),ChromeForAndroid=userAgent(/chrome/i)&&userAgent(/android/i),captureMode={capture:!1,passive:!1},R_SPACE=/\s+/g,expando="Sortable"+(new Date).getTime(),plugins=[],defaults={initializeByDefault:!0},PluginManager={mount:function(plugin){for(var option in defaults)!defaults.hasOwnProperty(option)||option in plugin||(plugin[option]=defaults[option]);plugins.forEach(function(p){if(p.pluginName===plugin.pluginName)throw"Sortable: Cannot mount plugin ".concat(plugin.pluginName," more than once")}),plugins.push(plugin)},pluginEvent:function(eventName,sortable,evt){var _this=this;this.eventCanceled=!1,evt.cancel=function(){_this.eventCanceled=!0};var eventNameGlobal=eventName+"Global";plugins.forEach(function(plugin){sortable[plugin.pluginName]&&(sortable[plugin.pluginName][eventNameGlobal]&&sortable[plugin.pluginName][eventNameGlobal](_objectSpread2({sortable:sortable},evt)),sortable.options[plugin.pluginName]&&sortable[plugin.pluginName][eventName]&&sortable[plugin.pluginName][eventName](_objectSpread2({sortable:sortable},evt)))})},initializePlugins:function(sortable,el,defaults,options){plugins.forEach(function(plugin){var pluginName=plugin.pluginName;if(sortable.options[pluginName]||plugin.initializeByDefault){var initialized=new plugin(sortable,el,sortable.options);initialized.sortable=sortable,initialized.options=sortable.options,sortable[pluginName]=initialized,_extends(defaults,initialized.defaults)}});for(var option in sortable.options)if(sortable.options.hasOwnProperty(option)){var modified=this.modifyOption(sortable,option,sortable.options[option]);void 0!==modified&&(sortable.options[option]=modified)}},getEventProperties:function(name,sortable){var eventProperties={};return plugins.forEach(function(plugin){"function"==typeof plugin.eventProperties&&_extends(eventProperties,plugin.eventProperties.call(sortable[plugin.pluginName],name))}),eventProperties},modifyOption:function(sortable,name,value){var modifiedValue;return plugins.forEach(function(plugin){sortable[plugin.pluginName]&&plugin.optionListeners&&"function"==typeof plugin.optionListeners[name]&&(modifiedValue=plugin.optionListeners[name].call(sortable[plugin.pluginName],value))}),modifiedValue}},_excluded=["evt"],pluginEvent=function(eventName,sortable){var _ref=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},originalEvent=_ref.evt,data=_objectWithoutProperties(_ref,_excluded);PluginManager.pluginEvent.bind(Sortable)(eventName,sortable,_objectSpread2({dragEl:dragEl,parentEl:parentEl,ghostEl:ghostEl,rootEl:rootEl,nextEl:nextEl,lastDownEl:lastDownEl,cloneEl:cloneEl,cloneHidden:cloneHidden,dragStarted:moved,putSortable:putSortable,activeSortable:Sortable.active,originalEvent:originalEvent,oldIndex:oldIndex,oldDraggableIndex:oldDraggableIndex,newIndex:newIndex,newDraggableIndex:newDraggableIndex,hideGhostForTarget:_hideGhostForTarget,unhideGhostForTarget:_unhideGhostForTarget,cloneNowHidden:function(){cloneHidden=!0},cloneNowShown:function(){cloneHidden=!1},dispatchSortableEvent:function(name){_dispatchEvent({sortable:sortable,name:name,originalEvent:originalEvent})}},data))},awaitingDragStarted=!1,ignoreNextClick=!1,sortables=[],pastFirstInvertThresh=!1,isCircumstantialInvert=!1,ghostRelativeParentInitialScroll=[],_silent=!1,savedInputChecked=[],documentExists="undefined"!=typeof document,PositionGhostAbsolutely=IOS,CSSFloatProperty=Edge||IE11OrLess?"cssFloat":"float",supportDraggable=documentExists&&!ChromeForAndroid&&!IOS&&"draggable"in document.createElement("div"),supportCssPointerEvents=function(){if(documentExists){if(IE11OrLess)return!1;var el=document.createElement("x");return el.style.cssText="pointer-events:auto","auto"===el.style.pointerEvents}}(),_detectDirection=function(el,options){var elCSS=css(el),elWidth=parseInt(elCSS.width)-parseInt(elCSS.paddingLeft)-parseInt(elCSS.paddingRight)-parseInt(elCSS.borderLeftWidth)-parseInt(elCSS.borderRightWidth),child1=getChild(el,0,options),child2=getChild(el,1,options),firstChildCSS=child1&&css(child1),secondChildCSS=child2&&css(child2),firstChildWidth=firstChildCSS&&parseInt(firstChildCSS.marginLeft)+parseInt(firstChildCSS.marginRight)+getRect(child1).width,secondChildWidth=secondChildCSS&&parseInt(secondChildCSS.marginLeft)+parseInt(secondChildCSS.marginRight)+getRect(child2).width;if("flex"===elCSS.display)return"column"===elCSS.flexDirection||"column-reverse"===elCSS.flexDirection?"vertical":"horizontal";if("grid"===elCSS.display)return elCSS.gridTemplateColumns.split(" ").length<=1?"vertical":"horizontal";if(child1&&firstChildCSS.float&&"none"!==firstChildCSS.float){var touchingSideChild2="left"===firstChildCSS.float?"left":"right";return!child2||"both"!==secondChildCSS.clear&&secondChildCSS.clear!==touchingSideChild2?"horizontal":"vertical"}return child1&&("block"===firstChildCSS.display||"flex"===firstChildCSS.display||"table"===firstChildCSS.display||"grid"===firstChildCSS.display||firstChildWidth>=elWidth&&"none"===elCSS[CSSFloatProperty]||child2&&"none"===elCSS[CSSFloatProperty]&&firstChildWidth+secondChildWidth>elWidth)?"vertical":"horizontal"},_dragElInRowColumn=function(dragRect,targetRect,vertical){var dragElS1Opp=vertical?dragRect.left:dragRect.top,dragElS2Opp=vertical?dragRect.right:dragRect.bottom,dragElOppLength=vertical?dragRect.width:dragRect.height,targetS1Opp=vertical?targetRect.left:targetRect.top,targetS2Opp=vertical?targetRect.right:targetRect.bottom,targetOppLength=vertical?targetRect.width:targetRect.height;return dragElS1Opp===targetS1Opp||dragElS2Opp===targetS2Opp||dragElS1Opp+dragElOppLength/2===targetS1Opp+targetOppLength/2},_detectNearestEmptySortable=function(x,y){var ret;return sortables.some(function(sortable){var threshold=sortable[expando].options.emptyInsertThreshold;if(threshold&&!lastChild(sortable)){var rect=getRect(sortable),insideHorizontally=x>=rect.left-threshold&&x<=rect.right+threshold,insideVertically=y>=rect.top-threshold&&y<=rect.bottom+threshold;return insideHorizontally&&insideVertically?ret=sortable:void 0}}),ret},_prepareGroup=function(options){function toFn(value,pull){return function(to,from,dragEl,evt){var sameGroup=to.options.group.name&&from.options.group.name&&to.options.group.name===from.options.group.name;if(null==value&&(pull||sameGroup))return!0;if(null==value||!1===value)return!1;if(pull&&"clone"===value)return value;if("function"==typeof value)return toFn(value(to,from,dragEl,evt),pull)(to,from,dragEl,evt);var otherGroup=(pull?to:from).options.group.name;return!0===value||"string"==typeof value&&value===otherGroup||value.join&&value.indexOf(otherGroup)>-1}}var group={},originalGroup=options.group;originalGroup&&"object"==_typeof(originalGroup)||(originalGroup={name:originalGroup}),group.name=originalGroup.name,group.checkPull=toFn(originalGroup.pull,!0),group.checkPut=toFn(originalGroup.put),group.revertClone=originalGroup.revertClone,options.group=group},_hideGhostForTarget=function(){!supportCssPointerEvents&&ghostEl&&css(ghostEl,"display","none")},_unhideGhostForTarget=function(){!supportCssPointerEvents&&ghostEl&&css(ghostEl,"display","")};documentExists&&document.addEventListener("click",function(evt){if(ignoreNextClick)return evt.preventDefault(),evt.stopPropagation&&evt.stopPropagation(),evt.stopImmediatePropagation&&evt.stopImmediatePropagation(),ignoreNextClick=!1,!1},!0);var nearestEmptyInsertDetectEvent=function(evt){if(dragEl){evt=evt.touches?evt.touches[0]:evt;var nearest=_detectNearestEmptySortable(evt.clientX,evt.clientY);if(nearest){var event={};for(var i in evt)evt.hasOwnProperty(i)&&(event[i]=evt[i]);event.target=event.rootEl=nearest,event.preventDefault=void 0,event.stopPropagation=void 0,nearest[expando]._onDragOver(event)}}},_checkOutsideTargetEl=function(evt){dragEl&&dragEl.parentNode[expando]._isOutsideThisEl(evt.target)};Sortable.prototype={constructor:Sortable,_isOutsideThisEl:function(target){this.el.contains(target)||target===this.el||(lastTarget=null)},_getDirection:function(evt,target){return"function"==typeof this.options.direction?this.options.direction.call(this,evt,target,dragEl):this.options.direction},_onTapStart:function(evt){if(evt.cancelable){var _this=this,el=this.el,options=this.options,preventOnFilter=options.preventOnFilter,type=evt.type,touch=evt.touches&&evt.touches[0]||evt.pointerType&&"touch"===evt.pointerType&&evt,target=(touch||evt).target,originalTarget=evt.target.shadowRoot&&(evt.path&&evt.path[0]||evt.composedPath&&evt.composedPath()[0])||target,filter=options.filter;if(_saveInputCheckedState(el),!dragEl&&!(/mousedown|pointerdown/.test(type)&&0!==evt.button||options.disabled)&&!originalTarget.isContentEditable&&(this.nativeDraggable||!Safari||!target||"SELECT"!==target.tagName.toUpperCase())&&!((target=closest(target,options.draggable,el,!1))&&target.animated||lastDownEl===target)){if(oldIndex=index(target),oldDraggableIndex=index(target,options.draggable),"function"==typeof filter){if(filter.call(this,evt,target,this))return _dispatchEvent({sortable:_this,rootEl:originalTarget,name:"filter",targetEl:target,toEl:el,fromEl:el}),pluginEvent("filter",_this,{evt:evt}),void(preventOnFilter&&evt.cancelable&&evt.preventDefault())}else if(filter&&(filter=filter.split(",").some(function(criteria){if(criteria=closest(originalTarget,criteria.trim(),el,!1))return _dispatchEvent({sortable:_this,rootEl:criteria,name:"filter",targetEl:target,fromEl:el,toEl:el}),pluginEvent("filter",_this,{evt:evt}),!0})))return void(preventOnFilter&&evt.cancelable&&evt.preventDefault());options.handle&&!closest(originalTarget,options.handle,el,!1)||this._prepareDragStart(evt,touch,target)}}},_prepareDragStart:function(evt,touch,target){var dragStartFn,_this=this,el=_this.el,options=_this.options,ownerDocument=el.ownerDocument;if(target&&!dragEl&&target.parentNode===el){var dragRect=getRect(target);if(rootEl=el,dragEl=target,parentEl=dragEl.parentNode,nextEl=dragEl.nextSibling,lastDownEl=target,activeGroup=options.group,Sortable.dragged=dragEl,tapEvt={target:dragEl,clientX:(touch||evt).clientX,clientY:(touch||evt).clientY},tapDistanceLeft=tapEvt.clientX-dragRect.left,tapDistanceTop=tapEvt.clientY-dragRect.top,this._lastX=(touch||evt).clientX,this._lastY=(touch||evt).clientY,dragEl.style["will-change"]="all",dragStartFn=function(){if(pluginEvent("delayEnded",_this,{evt:evt}),Sortable.eventCanceled)return void _this._onDrop();_this._disableDelayedDragEvents(),!FireFox&&_this.nativeDraggable&&(dragEl.draggable=!0),_this._triggerDragStart(evt,touch),_dispatchEvent({sortable:_this,name:"choose",originalEvent:evt}),toggleClass(dragEl,options.chosenClass,!0)},options.ignore.split(",").forEach(function(criteria){find(dragEl,criteria.trim(),_disableDraggable)}),on(ownerDocument,"dragover",nearestEmptyInsertDetectEvent),on(ownerDocument,"mousemove",nearestEmptyInsertDetectEvent),on(ownerDocument,"touchmove",nearestEmptyInsertDetectEvent),on(ownerDocument,"mouseup",_this._onDrop),on(ownerDocument,"touchend",_this._onDrop),on(ownerDocument,"touchcancel",_this._onDrop),FireFox&&this.nativeDraggable&&(this.options.touchStartThreshold=4,dragEl.draggable=!0),pluginEvent("delayStart",this,{evt:evt}),!options.delay||options.delayOnTouchOnly&&!touch||this.nativeDraggable&&(Edge||IE11OrLess))dragStartFn();else{if(Sortable.eventCanceled)return void this._onDrop();on(ownerDocument,"mouseup",_this._disableDelayedDrag),on(ownerDocument,"touchend",_this._disableDelayedDrag),on(ownerDocument,"touchcancel",_this._disableDelayedDrag),on(ownerDocument,"mousemove",_this._delayedDragTouchMoveHandler),on(ownerDocument,"touchmove",_this._delayedDragTouchMoveHandler),options.supportPointer&&on(ownerDocument,"pointermove",_this._delayedDragTouchMoveHandler),_this._dragStartTimer=setTimeout(dragStartFn,options.delay)}}},_delayedDragTouchMoveHandler:function(e){var touch=e.touches?e.touches[0]:e;Math.max(Math.abs(touch.clientX-this._lastX),Math.abs(touch.clientY-this._lastY))>=Math.floor(this.options.touchStartThreshold/(this.nativeDraggable&&window.devicePixelRatio||1))&&this._disableDelayedDrag()},_disableDelayedDrag:function(){dragEl&&_disableDraggable(dragEl),clearTimeout(this._dragStartTimer),this._disableDelayedDragEvents()},_disableDelayedDragEvents:function(){var ownerDocument=this.el.ownerDocument;off(ownerDocument,"mouseup",this._disableDelayedDrag),off(ownerDocument,"touchend",this._disableDelayedDrag),off(ownerDocument,"touchcancel",this._disableDelayedDrag),off(ownerDocument,"mousemove",this._delayedDragTouchMoveHandler),off(ownerDocument,"touchmove",this._delayedDragTouchMoveHandler),off(ownerDocument,"pointermove",this._delayedDragTouchMoveHandler)},_triggerDragStart:function(evt,touch){touch=touch||"touch"==evt.pointerType&&evt,!this.nativeDraggable||touch?this.options.supportPointer?on(document,"pointermove",this._onTouchMove):touch?on(document,"touchmove",this._onTouchMove):on(document,"mousemove",this._onTouchMove):(on(dragEl,"dragend",this),on(rootEl,"dragstart",this._onDragStart));try{document.selection?_nextTick(function(){document.selection.empty()}):window.getSelection().removeAllRanges()}catch(err){}},_dragStarted:function(fallback,evt){if(awaitingDragStarted=!1,rootEl&&dragEl){pluginEvent("dragStarted",this,{evt:evt}),this.nativeDraggable&&on(document,"dragover",_checkOutsideTargetEl);var options=this.options;!fallback&&toggleClass(dragEl,options.dragClass,!1),toggleClass(dragEl,options.ghostClass,!0),Sortable.active=this,fallback&&this._appendGhost(),_dispatchEvent({sortable:this,name:"start",originalEvent:evt})}else this._nulling()},_emulateDragOver:function(){if(touchEvt){this._lastX=touchEvt.clientX,this._lastY=touchEvt.clientY,_hideGhostForTarget();for(var target=document.elementFromPoint(touchEvt.clientX,touchEvt.clientY),parent=target;target&&target.shadowRoot&&(target=target.shadowRoot.elementFromPoint(touchEvt.clientX,touchEvt.clientY))!==parent;)parent=target;if(dragEl.parentNode[expando]._isOutsideThisEl(target),parent)do{if(parent[expando]){if(parent[expando]._onDragOver({clientX:touchEvt.clientX,clientY:touchEvt.clientY,target:target,rootEl:parent})&&!this.options.dragoverBubble)break}target=parent}while(parent=parent.parentNode);_unhideGhostForTarget()}},_onTouchMove:function(evt){if(tapEvt){var options=this.options,fallbackTolerance=options.fallbackTolerance,fallbackOffset=options.fallbackOffset,touch=evt.touches?evt.touches[0]:evt,ghostMatrix=ghostEl&&matrix(ghostEl,!0),scaleX=ghostEl&&ghostMatrix&&ghostMatrix.a,scaleY=ghostEl&&ghostMatrix&&ghostMatrix.d,relativeScrollOffset=PositionGhostAbsolutely&&ghostRelativeParent&&getRelativeScrollOffset(ghostRelativeParent),dx=(touch.clientX-tapEvt.clientX+fallbackOffset.x)/(scaleX||1)+(relativeScrollOffset?relativeScrollOffset[0]-ghostRelativeParentInitialScroll[0]:0)/(scaleX||1),dy=(touch.clientY-tapEvt.clientY+fallbackOffset.y)/(scaleY||1)+(relativeScrollOffset?relativeScrollOffset[1]-ghostRelativeParentInitialScroll[1]:0)/(scaleY||1);if(!Sortable.active&&!awaitingDragStarted){if(fallbackTolerance&&Math.max(Math.abs(touch.clientX-this._lastX),Math.abs(touch.clientY-this._lastY))<fallbackTolerance)return;this._onDragStart(evt,!0)}if(ghostEl){ghostMatrix?(ghostMatrix.e+=dx-(lastDx||0),ghostMatrix.f+=dy-(lastDy||0)):ghostMatrix={a:1,b:0,c:0,d:1,e:dx,f:dy};var cssMatrix="matrix(".concat(ghostMatrix.a,",").concat(ghostMatrix.b,",").concat(ghostMatrix.c,",").concat(ghostMatrix.d,",").concat(ghostMatrix.e,",").concat(ghostMatrix.f,")");css(ghostEl,"webkitTransform",cssMatrix),css(ghostEl,"mozTransform",cssMatrix),css(ghostEl,"msTransform",cssMatrix),css(ghostEl,"transform",cssMatrix),lastDx=dx,lastDy=dy,touchEvt=touch}evt.cancelable&&evt.preventDefault()}},_appendGhost:function(){if(!ghostEl){var container=this.options.fallbackOnBody?document.body:rootEl,rect=getRect(dragEl,!0,PositionGhostAbsolutely,!0,container),options=this.options;if(PositionGhostAbsolutely){for(ghostRelativeParent=container;"static"===css(ghostRelativeParent,"position")&&"none"===css(ghostRelativeParent,"transform")&&ghostRelativeParent!==document;)ghostRelativeParent=ghostRelativeParent.parentNode;ghostRelativeParent!==document.body&&ghostRelativeParent!==document.documentElement?(ghostRelativeParent===document&&(ghostRelativeParent=getWindowScrollingElement()),rect.top+=ghostRelativeParent.scrollTop,rect.left+=ghostRelativeParent.scrollLeft):ghostRelativeParent=getWindowScrollingElement(),ghostRelativeParentInitialScroll=getRelativeScrollOffset(ghostRelativeParent)}ghostEl=dragEl.cloneNode(!0),toggleClass(ghostEl,options.ghostClass,!1),toggleClass(ghostEl,options.fallbackClass,!0),toggleClass(ghostEl,options.dragClass,!0),css(ghostEl,"transition",""),css(ghostEl,"transform",""),css(ghostEl,"box-sizing","border-box"),css(ghostEl,"margin",0),css(ghostEl,"top",rect.top),css(ghostEl,"left",rect.left),css(ghostEl,"width",rect.width),css(ghostEl,"height",rect.height),css(ghostEl,"opacity","0.8"),css(ghostEl,"position",PositionGhostAbsolutely?"absolute":"fixed"),css(ghostEl,"zIndex","100000"),css(ghostEl,"pointerEvents","none"),Sortable.ghost=ghostEl,container.appendChild(ghostEl),css(ghostEl,"transform-origin",tapDistanceLeft/parseInt(ghostEl.style.width)*100+"% "+tapDistanceTop/parseInt(ghostEl.style.height)*100+"%")}},_onDragStart:function(evt,fallback){var _this=this,dataTransfer=evt.dataTransfer,options=_this.options;if(pluginEvent("dragStart",this,{evt:evt}),Sortable.eventCanceled)return void this._onDrop();pluginEvent("setupClone",this),Sortable.eventCanceled||(cloneEl=clone(dragEl),cloneEl.draggable=!1,cloneEl.style["will-change"]="",this._hideClone(),toggleClass(cloneEl,this.options.chosenClass,!1),Sortable.clone=cloneEl),_this.cloneId=_nextTick(function(){pluginEvent("clone",_this),Sortable.eventCanceled||(_this.options.removeCloneOnHide||rootEl.insertBefore(cloneEl,dragEl),_this._hideClone(),_dispatchEvent({sortable:_this,name:"clone"}))}),!fallback&&toggleClass(dragEl,options.dragClass,!0),fallback?(ignoreNextClick=!0,_this._loopId=setInterval(_this._emulateDragOver,50)):(off(document,"mouseup",_this._onDrop),off(document,"touchend",_this._onDrop),off(document,"touchcancel",_this._onDrop),dataTransfer&&(dataTransfer.effectAllowed="move",options.setData&&options.setData.call(_this,dataTransfer,dragEl)),on(document,"drop",_this),css(dragEl,"transform","translateZ(0)")),awaitingDragStarted=!0,_this._dragStartId=_nextTick(_this._dragStarted.bind(_this,fallback,evt)),on(document,"selectstart",_this),moved=!0,Safari&&css(document.body,"user-select","none")},_onDragOver:function(evt){function dragOverEvent(name,extra){pluginEvent(name,_this,_objectSpread2({evt:evt,isOwner:isOwner,axis:vertical?"vertical":"horizontal",revert:revert,dragRect:dragRect,targetRect:targetRect,canSort:canSort,fromSortable:fromSortable,target:target,completed:completed,onMove:function(target,after){return _onMove(rootEl,el,dragEl,dragRect,target,getRect(target),evt,after)},changed:changed},extra))}function capture(){dragOverEvent("dragOverAnimationCapture"),_this.captureAnimationState(),_this!==fromSortable&&fromSortable.captureAnimationState()}function completed(insertion){return dragOverEvent("dragOverCompleted",{insertion:insertion}),insertion&&(isOwner?activeSortable._hideClone():activeSortable._showClone(_this),_this!==fromSortable&&(toggleClass(dragEl,putSortable?putSortable.options.ghostClass:activeSortable.options.ghostClass,!1),toggleClass(dragEl,options.ghostClass,!0)),putSortable!==_this&&_this!==Sortable.active?putSortable=_this:_this===Sortable.active&&putSortable&&(putSortable=null),fromSortable===_this&&(_this._ignoreWhileAnimating=target),_this.animateAll(function(){dragOverEvent("dragOverAnimationComplete"),_this._ignoreWhileAnimating=null}),_this!==fromSortable&&(fromSortable.animateAll(),fromSortable._ignoreWhileAnimating=null)),(target===dragEl&&!dragEl.animated||target===el&&!target.animated)&&(lastTarget=null),options.dragoverBubble||evt.rootEl||target===document||(dragEl.parentNode[expando]._isOutsideThisEl(evt.target),!insertion&&nearestEmptyInsertDetectEvent(evt)),!options.dragoverBubble&&evt.stopPropagation&&evt.stopPropagation(),completedFired=!0}function changed(){newIndex=index(dragEl),newDraggableIndex=index(dragEl,options.draggable),_dispatchEvent({sortable:_this,name:"change",toEl:el,newIndex:newIndex,newDraggableIndex:newDraggableIndex,originalEvent:evt})}var dragRect,targetRect,revert,vertical,el=this.el,target=evt.target,options=this.options,group=options.group,activeSortable=Sortable.active,isOwner=activeGroup===group,canSort=options.sort,fromSortable=putSortable||activeSortable,_this=this,completedFired=!1;if(!_silent){if(void 0!==evt.preventDefault&&evt.cancelable&&evt.preventDefault(),target=closest(target,options.draggable,el,!0),dragOverEvent("dragOver"),Sortable.eventCanceled)return completedFired;if(dragEl.contains(evt.target)||target.animated&&target.animatingX&&target.animatingY||_this._ignoreWhileAnimating===target)return completed(!1);if(ignoreNextClick=!1,activeSortable&&!options.disabled&&(isOwner?canSort||(revert=parentEl!==rootEl):putSortable===this||(this.lastPutMode=activeGroup.checkPull(this,activeSortable,dragEl,evt))&&group.checkPut(this,activeSortable,dragEl,evt))){if(vertical="vertical"===this._getDirection(evt,target),dragRect=getRect(dragEl),dragOverEvent("dragOverValid"),Sortable.eventCanceled)return completedFired;if(revert)return parentEl=rootEl,capture(),this._hideClone(),dragOverEvent("revert"),Sortable.eventCanceled||(nextEl?rootEl.insertBefore(dragEl,nextEl):rootEl.appendChild(dragEl)),completed(!0);var elLastChild=lastChild(el,options.draggable);if(!elLastChild||_ghostIsLast(evt,vertical,this)&&!elLastChild.animated){if(elLastChild===dragEl)return completed(!1);if(elLastChild&&el===evt.target&&(target=elLastChild),target&&(targetRect=getRect(target)),!1!==_onMove(rootEl,el,dragEl,dragRect,target,targetRect,evt,!!target))return capture(),el.appendChild(dragEl),parentEl=el,changed(),completed(!0)}else if(elLastChild&&_ghostIsFirst(evt,vertical,this)){var firstChild=getChild(el,0,options,!0);if(firstChild===dragEl)return completed(!1);if(target=firstChild,targetRect=getRect(target),!1!==_onMove(rootEl,el,dragEl,dragRect,target,targetRect,evt,!1))return capture(),el.insertBefore(dragEl,firstChild),parentEl=el,changed(),completed(!0)}else if(target.parentNode===el){targetRect=getRect(target);var targetBeforeFirstSwap,direction=0,differentLevel=dragEl.parentNode!==el,differentRowCol=!_dragElInRowColumn(dragEl.animated&&dragEl.toRect||dragRect,target.animated&&target.toRect||targetRect,vertical),side1=vertical?"top":"left",scrolledPastTop=isScrolledPast(target,"top","top")||isScrolledPast(dragEl,"top","top"),scrollBefore=scrolledPastTop?scrolledPastTop.scrollTop:void 0;lastTarget!==target&&(targetBeforeFirstSwap=targetRect[side1],pastFirstInvertThresh=!1,isCircumstantialInvert=!differentRowCol&&options.invertSwap||differentLevel),direction=_getSwapDirection(evt,target,targetRect,vertical,differentRowCol?1:options.swapThreshold,null==options.invertedSwapThreshold?options.swapThreshold:options.invertedSwapThreshold,isCircumstantialInvert,lastTarget===target);var sibling;if(0!==direction){var dragIndex=index(dragEl);do{dragIndex-=direction,sibling=parentEl.children[dragIndex]}while(sibling&&("none"===css(sibling,"display")||sibling===ghostEl))}if(0===direction||sibling===target)return completed(!1);lastTarget=target,lastDirection=direction;var nextSibling=target.nextElementSibling,after=!1;after=1===direction;var moveVector=_onMove(rootEl,el,dragEl,dragRect,target,targetRect,evt,after);if(!1!==moveVector)return 1!==moveVector&&-1!==moveVector||(after=1===moveVector),_silent=!0,setTimeout(_unsilent,30),capture(),after&&!nextSibling?el.appendChild(dragEl):target.parentNode.insertBefore(dragEl,after?nextSibling:target),scrolledPastTop&&scrollBy(scrolledPastTop,0,scrollBefore-scrolledPastTop.scrollTop),parentEl=dragEl.parentNode,void 0===targetBeforeFirstSwap||isCircumstantialInvert||(targetMoveDistance=Math.abs(targetBeforeFirstSwap-getRect(target)[side1])),changed(),completed(!0)}if(el.contains(dragEl))return completed(!1)}return!1}},_ignoreWhileAnimating:null,_offMoveEvents:function(){off(document,"mousemove",this._onTouchMove),off(document,"touchmove",this._onTouchMove),off(document,"pointermove",this._onTouchMove),off(document,"dragover",nearestEmptyInsertDetectEvent),off(document,"mousemove",nearestEmptyInsertDetectEvent),off(document,"touchmove",nearestEmptyInsertDetectEvent)},_offUpEvents:function(){var ownerDocument=this.el.ownerDocument;off(ownerDocument,"mouseup",this._onDrop),off(ownerDocument,"touchend",this._onDrop),off(ownerDocument,"pointerup",this._onDrop),off(ownerDocument,"touchcancel",this._onDrop),off(document,"selectstart",this)},_onDrop:function(evt){var el=this.el,options=this.options;if(newIndex=index(dragEl),newDraggableIndex=index(dragEl,options.draggable),pluginEvent("drop",this,{evt:evt}),parentEl=dragEl&&dragEl.parentNode,newIndex=index(dragEl),newDraggableIndex=index(dragEl,options.draggable),Sortable.eventCanceled)return void this._nulling();awaitingDragStarted=!1,isCircumstantialInvert=!1,pastFirstInvertThresh=!1,clearInterval(this._loopId),clearTimeout(this._dragStartTimer),_cancelNextTick(this.cloneId),_cancelNextTick(this._dragStartId),this.nativeDraggable&&(off(document,"drop",this),off(el,"dragstart",this._onDragStart)),this._offMoveEvents(),this._offUpEvents(),Safari&&css(document.body,"user-select",""),css(dragEl,"transform",""),evt&&(moved&&(evt.cancelable&&evt.preventDefault(),!options.dropBubble&&evt.stopPropagation()),ghostEl&&ghostEl.parentNode&&ghostEl.parentNode.removeChild(ghostEl),(rootEl===parentEl||putSortable&&"clone"!==putSortable.lastPutMode)&&cloneEl&&cloneEl.parentNode&&cloneEl.parentNode.removeChild(cloneEl),dragEl&&(this.nativeDraggable&&off(dragEl,"dragend",this),_disableDraggable(dragEl),dragEl.style["will-change"]="",moved&&!awaitingDragStarted&&toggleClass(dragEl,putSortable?putSortable.options.ghostClass:this.options.ghostClass,!1),toggleClass(dragEl,this.options.chosenClass,!1),_dispatchEvent({sortable:this,name:"unchoose",toEl:parentEl,newIndex:null,newDraggableIndex:null,originalEvent:evt}),rootEl!==parentEl?(newIndex>=0&&(_dispatchEvent({rootEl:parentEl,name:"add",toEl:parentEl,fromEl:rootEl,originalEvent:evt}),_dispatchEvent({sortable:this,name:"remove",toEl:parentEl,originalEvent:evt}),_dispatchEvent({rootEl:parentEl,name:"sort",toEl:parentEl,fromEl:rootEl,originalEvent:evt}),_dispatchEvent({sortable:this,name:"sort",toEl:parentEl,originalEvent:evt})),putSortable&&putSortable.save()):newIndex!==oldIndex&&newIndex>=0&&(_dispatchEvent({sortable:this,name:"update",toEl:parentEl,originalEvent:evt}),_dispatchEvent({sortable:this,name:"sort",toEl:parentEl,originalEvent:evt})),Sortable.active&&(null!=newIndex&&-1!==newIndex||(newIndex=oldIndex,newDraggableIndex=oldDraggableIndex),_dispatchEvent({sortable:this,name:"end",toEl:parentEl,originalEvent:evt}),this.save()))),this._nulling()},_nulling:function(){pluginEvent("nulling",this),rootEl=dragEl=parentEl=ghostEl=nextEl=cloneEl=lastDownEl=cloneHidden=tapEvt=touchEvt=moved=newIndex=newDraggableIndex=oldIndex=oldDraggableIndex=lastTarget=lastDirection=putSortable=activeGroup=Sortable.dragged=Sortable.ghost=Sortable.clone=Sortable.active=null,savedInputChecked.forEach(function(el){el.checked=!0}),savedInputChecked.length=lastDx=lastDy=0},handleEvent:function(evt){switch(evt.type){case"drop":case"dragend":this._onDrop(evt);break;case"dragenter":case"dragover":dragEl&&(this._onDragOver(evt),_globalDragOver(evt));break;case"selectstart":evt.preventDefault()}},toArray:function(){for(var el,order=[],children=this.el.children,i=0,n=children.length,options=this.options;i<n;i++)el=children[i],closest(el,options.draggable,this.el,!1)&&order.push(el.getAttribute(options.dataIdAttr)||_generateId(el));return order},sort:function(order,useAnimation){var items={},rootEl=this.el;this.toArray().forEach(function(id,i){var el=rootEl.children[i];closest(el,this.options.draggable,rootEl,!1)&&(items[id]=el)},this),useAnimation&&this.captureAnimationState(),order.forEach(function(id){items[id]&&(rootEl.removeChild(items[id]),rootEl.appendChild(items[id]))}),useAnimation&&this.animateAll()},save:function(){var store=this.options.store;store&&store.set&&store.set(this)},closest:function(el,selector){return closest(el,selector||this.options.draggable,this.el,!1)},option:function(name,value){var options=this.options;if(void 0===value)return options[name];var modifiedValue=PluginManager.modifyOption(this,name,value);options[name]=void 0!==modifiedValue?modifiedValue:value,"group"===name&&_prepareGroup(options)},destroy:function(){pluginEvent("destroy",this);var el=this.el;el[expando]=null,off(el,"mousedown",this._onTapStart),off(el,"touchstart",this._onTapStart),off(el,"pointerdown",this._onTapStart),this.nativeDraggable&&(off(el,"dragover",this),off(el,"dragenter",this)),Array.prototype.forEach.call(el.querySelectorAll("[draggable]"),function(el){el.removeAttribute("draggable")}),this._onDrop(),this._disableDelayedDragEvents(),sortables.splice(sortables.indexOf(this.el),1),this.el=el=null},_hideClone:function(){if(!cloneHidden){if(pluginEvent("hideClone",this),Sortable.eventCanceled)return;css(cloneEl,"display","none"),this.options.removeCloneOnHide&&cloneEl.parentNode&&cloneEl.parentNode.removeChild(cloneEl),cloneHidden=!0}},_showClone:function(putSortable){if("clone"!==putSortable.lastPutMode)return void this._hideClone();if(cloneHidden){if(pluginEvent("showClone",this),Sortable.eventCanceled)return;dragEl.parentNode!=rootEl||this.options.group.revertClone?nextEl?rootEl.insertBefore(cloneEl,nextEl):rootEl.appendChild(cloneEl):rootEl.insertBefore(cloneEl,dragEl),this.options.group.revertClone&&this.animate(dragEl,cloneEl),css(cloneEl,"display",""),cloneHidden=!1}}},documentExists&&on(document,"touchmove",function(evt){(Sortable.active||awaitingDragStarted)&&evt.cancelable&&evt.preventDefault()}),Sortable.utils={on:on,off:off,css:css,find:find,is:function(el,selector){return!!closest(el,selector,el,!1)},extend:extend,throttle:throttle,closest:closest,toggleClass:toggleClass,clone:clone,index:index,nextTick:_nextTick,cancelNextTick:_cancelNextTick,detectDirection:_detectDirection,getChild:getChild},Sortable.get=function(element){return element[expando]},Sortable.mount=function(){for(var _len=arguments.length,plugins=new Array(_len),_key=0;_key<_len;_key++)plugins[_key]=arguments[_key];plugins[0].constructor===Array&&(plugins=plugins[0]),plugins.forEach(function(plugin){if(!plugin.prototype||!plugin.prototype.constructor)throw"Sortable: Mounted plugin must be a constructor function, not ".concat({}.toString.call(plugin));plugin.utils&&(Sortable.utils=_objectSpread2(_objectSpread2({},Sortable.utils),plugin.utils)),PluginManager.mount(plugin)})},Sortable.create=function(el,options){return new Sortable(el,options)},Sortable.version=version;var scrollEl,scrollRootEl,lastAutoScrollX,lastAutoScrollY,touchEvt$1,pointerElemChangedInterval,autoScrolls=[],scrolling=!1,autoScroll=throttle(function(evt,options,rootEl,isFallback){if(options.scroll){var scrollCustomFn,x=(evt.touches?evt.touches[0]:evt).clientX,y=(evt.touches?evt.touches[0]:evt).clientY,sens=options.scrollSensitivity,speed=options.scrollSpeed,winScroller=getWindowScrollingElement(),scrollThisInstance=!1;scrollRootEl!==rootEl&&(scrollRootEl=rootEl,clearAutoScrolls(),scrollEl=options.scroll,scrollCustomFn=options.scrollFn,!0===scrollEl&&(scrollEl=getParentAutoScrollElement(rootEl,!0)));var layersOut=0,currentParent=scrollEl;do{var el=currentParent,rect=getRect(el),top=rect.top,bottom=rect.bottom,left=rect.left,right=rect.right,width=rect.width,height=rect.height,canScrollX=void 0,canScrollY=void 0,scrollWidth=el.scrollWidth,scrollHeight=el.scrollHeight,elCSS=css(el),scrollPosX=el.scrollLeft,scrollPosY=el.scrollTop;el===winScroller?(canScrollX=width<scrollWidth&&("auto"===elCSS.overflowX||"scroll"===elCSS.overflowX||"visible"===elCSS.overflowX),canScrollY=height<scrollHeight&&("auto"===elCSS.overflowY||"scroll"===elCSS.overflowY||"visible"===elCSS.overflowY)):(canScrollX=width<scrollWidth&&("auto"===elCSS.overflowX||"scroll"===elCSS.overflowX),canScrollY=height<scrollHeight&&("auto"===elCSS.overflowY||"scroll"===elCSS.overflowY));var vx=canScrollX&&(Math.abs(right-x)<=sens&&scrollPosX+width<scrollWidth)-(Math.abs(left-x)<=sens&&!!scrollPosX),vy=canScrollY&&(Math.abs(bottom-y)<=sens&&scrollPosY+height<scrollHeight)-(Math.abs(top-y)<=sens&&!!scrollPosY);if(!autoScrolls[layersOut])for(var i=0;i<=layersOut;i++)autoScrolls[i]||(autoScrolls[i]={});autoScrolls[layersOut].vx==vx&&autoScrolls[layersOut].vy==vy&&autoScrolls[layersOut].el===el||(autoScrolls[layersOut].el=el,autoScrolls[layersOut].vx=vx,autoScrolls[layersOut].vy=vy,clearInterval(autoScrolls[layersOut].pid),0==vx&&0==vy||(scrollThisInstance=!0,autoScrolls[layersOut].pid=setInterval(function(){isFallback&&0===this.layer&&Sortable.active._onTouchMove(touchEvt$1);var scrollOffsetY=autoScrolls[this.layer].vy?autoScrolls[this.layer].vy*speed:0,scrollOffsetX=autoScrolls[this.layer].vx?autoScrolls[this.layer].vx*speed:0;"function"==typeof scrollCustomFn&&"continue"!==scrollCustomFn.call(Sortable.dragged.parentNode[expando],scrollOffsetX,scrollOffsetY,evt,touchEvt$1,autoScrolls[this.layer].el)||scrollBy(autoScrolls[this.layer].el,scrollOffsetX,scrollOffsetY)}.bind({layer:layersOut}),24))),layersOut++}while(options.bubbleScroll&&currentParent!==winScroller&&(currentParent=getParentAutoScrollElement(currentParent,!1)));scrolling=scrollThisInstance}},30),drop=function(_ref){var originalEvent=_ref.originalEvent,putSortable=_ref.putSortable,dragEl=_ref.dragEl,activeSortable=_ref.activeSortable,dispatchSortableEvent=_ref.dispatchSortableEvent,hideGhostForTarget=_ref.hideGhostForTarget,unhideGhostForTarget=_ref.unhideGhostForTarget;if(originalEvent){var toSortable=putSortable||activeSortable;hideGhostForTarget();var touch=originalEvent.changedTouches&&originalEvent.changedTouches.length?originalEvent.changedTouches[0]:originalEvent,target=document.elementFromPoint(touch.clientX,touch.clientY);unhideGhostForTarget(),toSortable&&!toSortable.el.contains(target)&&(dispatchSortableEvent("spill"),this.onSpill({dragEl:dragEl,putSortable:putSortable}))}};Revert.prototype={startIndex:null,dragStart:function(_ref2){var oldDraggableIndex=_ref2.oldDraggableIndex;this.startIndex=oldDraggableIndex},onSpill:function(_ref3){var dragEl=_ref3.dragEl,putSortable=_ref3.putSortable;this.sortable.captureAnimationState(),putSortable&&putSortable.captureAnimationState();var nextSibling=getChild(this.sortable.el,this.startIndex,this.options);nextSibling?this.sortable.el.insertBefore(dragEl,nextSibling):this.sortable.el.appendChild(dragEl),this.sortable.animateAll(),putSortable&&putSortable.animateAll()},drop:drop},_extends(Revert,{pluginName:"revertOnSpill"}),Remove.prototype={onSpill:function(_ref4){var dragEl=_ref4.dragEl,putSortable=_ref4.putSortable,parentSortable=putSortable||this.sortable;parentSortable.captureAnimationState(),dragEl.parentNode&&dragEl.parentNode.removeChild(dragEl),parentSortable.animateAll()},drop:drop},_extends(Remove,{pluginName:"removeOnSpill"});var lastSwapEl,lastMultiDragSelect,multiDragSortable,dragEl$1,clonesFromRect,clonesHidden,multiDragElements=[],multiDragClones=[],initialFolding=!1,folding=!1,dragStarted=!1;return Sortable.mount(new AutoScrollPlugin),Sortable.mount(Remove,Revert),Sortable.mount(new SwapPlugin),Sortable.mount(new MultiDragPlugin),Sortable}),function(){var q=null;window.PR_SHOULD_USE_CONTINUATION=!0,function(){function S(a){function d(e){var b=e.charCodeAt(0);if(92!==b)return b;var a=e.charAt(1);return(b=r[a])?b:"0"<=a&&a<="7"?parseInt(e.substring(1),8):"u"===a||"x"===a?parseInt(e.substring(2),16):e.charCodeAt(1)}function g(e){return e<32?(e<16?"\\x0":"\\x")+e.toString(16):(e=String.fromCharCode(e),"\\"===e||"-"===e||"]"===e||"^"===e?"\\"+e:e)}function b(e){var b=e.substring(1,e.length-1).match(/\\u[\dA-Fa-f]{4}|\\x[\dA-Fa-f]{2}|\\[0-3][0-7]{0,2}|\\[0-7]{1,2}|\\[\S\s]|[^\\]/g),e=[],a="^"===b[0],c=["["];a&&c.push("^");for(var a=a?1:0,f=b.length;a<f;++a){var h=b[a];if(/\\[bdsw]/i.test(h))c.push(h);else{var l,h=d(h);a+2<f&&"-"===b[a+1]?(l=d(b[a+2]),a+=2):l=h,e.push([h,l]),l<65||h>122||(l<65||h>90||e.push([32|Math.max(65,h),32|Math.min(l,90)]),l<97||h>122||e.push([-33&Math.max(97,h),-33&Math.min(l,122)]))}}for(e.sort(function(e,a){return e[0]-a[0]||a[1]-e[1]}),b=[],f=[],a=0;a<e.length;++a)h=e[a],h[0]<=f[1]+1?f[1]=Math.max(f[1],h[1]):b.push(f=h);for(a=0;a<b.length;++a)h=b[a],c.push(g(h[0])),h[1]>h[0]&&(h[1]+1>h[0]&&c.push("-"),c.push(g(h[1])));return c.push("]"),c.join("")}function s(e){for(var a=e.source.match(/\[(?:[^\\\]]|\\[\S\s])*]|\\u[\dA-Fa-f]{4}|\\x[\dA-Fa-f]{2}|\\\d+|\\[^\dux]|\(\?[!:=]|[()^]|[^()[\\^]+/g),c=a.length,d=[],f=0,h=0;f<c;++f){var l=a[f];"("===l?++h:"\\"===l.charAt(0)&&(l=+l.substring(1))&&(l<=h?d[l]=-1:a[f]=g(l))}for(f=1;f<d.length;++f)-1===d[f]&&(d[f]=++x);for(h=f=0;f<c;++f)l=a[f],"("===l?(++h,d[h]||(a[f]="(?:")):"\\"===l.charAt(0)&&(l=+l.substring(1))&&l<=h&&(a[f]="\\"+d[l]);for(f=0;f<c;++f)"^"===a[f]&&"^"!==a[f+1]&&(a[f]="");if(e.ignoreCase&&m)for(f=0;f<c;++f)l=a[f],e=l.charAt(0),l.length>=2&&"["===e?a[f]=b(l):"\\"!==e&&(a[f]=l.replace(/[A-Za-z]/g,function(a){return a=a.charCodeAt(0),"["+String.fromCharCode(-33&a,32|a)+"]"}));return a.join("")}for(var x=0,m=!1,j=!1,k=0,c=a.length;k<c;++k){var i=a[k];if(i.ignoreCase)j=!0;else if(/[a-z]/i.test(i.source.replace(/\\u[\da-f]{4}|\\x[\da-f]{2}|\\[^UXux]/gi,""))){m=!0,j=!1;break}}for(var r={b:8,t:9,n:10,v:11,f:12,r:13},n=[],k=0,c=a.length;k<c;++k){if(i=a[k],i.global||i.multiline)throw Error(""+i);n.push("(?:"+s(i)+")")}return RegExp(n.join("|"),j?"gi":"g")}function T(a,d){function g(a){var c=a.nodeType;if(1==c){if(!b.test(a.className)){for(c=a.firstChild;c;c=c.nextSibling)g(c);c=a.nodeName.toLowerCase(),"br"!==c&&"li"!==c||(s[j]="\n",m[j<<1]=x++,m[j++<<1|1]=a)}}else 3!=c&&4!=c||(c=a.nodeValue,c.length&&(c=d?c.replace(/\r\n?/g,"\n"):c.replace(/[\t\n\r ]+/g," "),s[j]=c,m[j<<1]=x,x+=c.length,m[j++<<1|1]=a))}var b=/(?:^|\s)nocode(?:\s|$)/,s=[],x=0,m=[],j=0;return g(a),{a:s.join("").replace(/\n$/,""),d:m}}function H(a,d,g,b){d&&(a={a:d,e:a},g(a),b.push.apply(b,a.g))}function U(a){for(var d=void 0,g=a.firstChild;g;g=g.nextSibling)var b=g.nodeType,d=1===b?d?a:g:3===b&&V.test(g.nodeValue)?a:d;return d===a?void 0:d}function C(a,d){function g(a){for(var j=a.e,k=[j,"pln"],c=0,i=a.a.match(s)||[],r={},n=0,e=i.length;n<e;++n){var f,z=i[n],w=r[z],t=void 0;if("string"==typeof w)f=!1;else{var h=b[z.charAt(0)];if(h)t=z.match(h[1]),w=h[0];else{for(f=0;f<x;++f)if(h=d[f],t=z.match(h[1])){w=h[0];break}t||(w="pln")}!(f=w.length>=5&&"lang-"===w.substring(0,5))||t&&"string"==typeof t[1]||(f=!1,w="src"),f||(r[z]=w)}if(h=c,c+=z.length,f){f=t[1];var l=z.indexOf(f),B=l+f.length;t[2]&&(B=z.length-t[2].length,l=B-f.length),w=w.substring(5),H(j+h,z.substring(0,l),g,k),H(j+h+l,f,I(w,f),k),H(j+h+B,z.substring(B),g,k)}else k.push(j+h,w)}a.g=k}var s,b={};!function(){for(var g=a.concat(d),j=[],k={},c=0,i=g.length;c<i;++c){var r=g[c],n=r[3];if(n)for(var e=n.length;--e>=0;)b[n.charAt(e)]=r;r=r[1],n=""+r,k.hasOwnProperty(n)||(j.push(r),k[n]=q)}j.push(/[\S\s]/),s=S(j)}();var x=d.length;return g}function v(a){var d=[],g=[];a.tripleQuotedStrings?d.push(["str",/^(?:'''(?:[^'\\]|\\[\S\s]|''?(?=[^']))*(?:'''|$)|"""(?:[^"\\]|\\[\S\s]|""?(?=[^"]))*(?:"""|$)|'(?:[^'\\]|\\[\S\s])*(?:'|$)|"(?:[^"\\]|\\[\S\s])*(?:"|$))/,q,"'\""]):a.multiLineStrings?d.push(["str",/^(?:'(?:[^'\\]|\\[\S\s])*(?:'|$)|"(?:[^"\\]|\\[\S\s])*(?:"|$)|`(?:[^\\`]|\\[\S\s])*(?:`|$))/,q,"'\"`"]):d.push(["str",/^(?:'(?:[^\n\r'\\]|\\.)*(?:'|$)|"(?:[^\n\r"\\]|\\.)*(?:"|$))/,q,"\"'"]),a.verbatimStrings&&g.push(["str",/^@"(?:[^"]|"")*(?:"|$)/,q]);var b=a.hashComments;if(b&&(a.cStyleComments?(b>1?d.push(["com",/^#(?:##(?:[^#]|#(?!##))*(?:###|$)|.*)/,q,"#"]):d.push(["com",/^#(?:(?:define|e(?:l|nd)if|else|error|ifn?def|include|line|pragma|undef|warning)\b|[^\n\r]*)/,q,"#"]),g.push(["str",/^<(?:(?:(?:\.\.\/)*|\/?)(?:[\w-]+(?:\/[\w-]+)+)?[\w-]+\.h(?:h|pp|\+\+)?|[a-z]\w*)>/,q])):d.push(["com",/^#[^\n\r]*/,q,"#"])),a.cStyleComments&&(g.push(["com",/^\/\/[^\n\r]*/,q]),g.push(["com",/^\/\*[\S\s]*?(?:\*\/|$)/,q])),b=a.regexLiterals){var s=(b=b>1?"":"\n\r")?".":"[\\S\\s]";g.push(["lang-regex",RegExp("^(?:^^\\.?|[+-]|[!=]=?=?|\\#|%=?|&&?=?|\\(|\\*=?|[+\\-]=|->|\\/=?|::?|<<?=?|>>?>?=?|,|;|\\?|@|\\[|~|{|\\^\\^?=?|\\|\\|?=?|break|case|continue|delete|do|else|finally|instanceof|return|throw|try|typeof)\\s*(/(?=[^/*"+b+"])(?:[^/\\x5B\\x5C"+b+"]|\\x5C"+s+"|\\x5B(?:[^\\x5C\\x5D"+b+"]|\\x5C"+s+")*(?:\\x5D|$))+/)")])}return(b=a.types)&&g.push(["typ",b]),b=(""+a.keywords).replace(/^ | $/g,""),b.length&&g.push(["kwd",RegExp("^(?:"+b.replace(/[\s,]+/g,"|")+")\\b"),q]),d.push(["pln",/^\s+/,q," \r\n\t"]),b="^.[^\\s\\w.$@'\"`/\\\\]*",a.regexLiterals&&(b+="(?!s*/)"),g.push(["lit",/^@[$_a-z][\w$@]*/i,q],["typ",/^(?:[@_]?[A-Z]+[a-z][\w$@]*|\w+_t\b)/,q],["pln",/^[$_a-z][\w$@]*/i,q],["lit",/^(?:0x[\da-f]+|(?:\d(?:_\d+)*\d*(?:\.\d*)?|\.\d\+)(?:e[+-]?\d+)?)[a-z]*/i,q,"0123456789"],["pln",/^\\[\S\s]?/,q],["pun",RegExp(b),q]),C(d,g)}function J(a,d,g){function b(a){var c=a.nodeType;if(1!=c||x.test(a.className)){if((3==c||4==c)&&g){var d=a.nodeValue,i=d.match(m);i&&(c=d.substring(0,i.index),a.nodeValue=c,(d=d.substring(i.index+i[0].length))&&a.parentNode.insertBefore(j.createTextNode(d),a.nextSibling),s(a),c||a.parentNode.removeChild(a))}}else if("br"===a.nodeName)s(a),a.parentNode&&a.parentNode.removeChild(a);else for(a=a.firstChild;a;a=a.nextSibling)b(a)}function s(a){function b(a,c){var d=c?a.cloneNode(!1):a,e=a.parentNode;if(e){var e=b(e,1),g=a.nextSibling;e.appendChild(d);for(var i=g;i;i=g)g=i.nextSibling,e.appendChild(i)}return d}for(;!a.nextSibling;)if(!(a=a.parentNode))return;for(var d,a=b(a.nextSibling,0);(d=a.parentNode)&&1===d.nodeType;)a=d;c.push(a)}for(var x=/(?:^|\s)nocode(?:\s|$)/,m=/\r\n?|\n/,j=a.ownerDocument,k=j.createElement("li");a.firstChild;)k.appendChild(a.firstChild);for(var c=[k],i=0;i<c.length;++i)b(c[i]);d===(0|d)&&c[0].setAttribute("value",d);var r=j.createElement("ol");r.className="linenums";for(var d=Math.max(0,d-1|0)||0,i=0,n=c.length;i<n;++i)k=c[i],k.className="L"+(i+d)%10,k.firstChild||k.appendChild(j.createTextNode("")),r.appendChild(k);a.appendChild(r)}function p(a,d){for(var g=d.length;--g>=0;){var b=d[g];F.hasOwnProperty(b)?D.console&&console.warn("cannot override language handler %s",b):F[b]=a}}function I(a,d){return a&&F.hasOwnProperty(a)||(a=/^\s*</.test(d)?"default-markup":"default-code"),F[a]}function K(a){var d=a.h;try{var g=T(a.c,a.i),b=g.a;a.a=b,a.d=g.d,a.e=0,I(d,b)(a);var s=/\bMSIE\s(\d+)/.exec(navigator.userAgent),s=s&&+s[1]<=8,d=/\n/g,x=a.a,m=x.length,g=0,j=a.d,k=j.length,b=0,c=a.g,i=c.length,r=0;c[i]=m;var n,e;for(e=n=0;e<i;)c[e]!==c[e+2]?(c[n++]=c[e++],c[n++]=c[e++]):e+=2;for(i=n,e=n=0;e<i;){for(var p=c[e],w=c[e+1],t=e+2;t+2<=i&&c[t+1]===w;)t+=2;c[n++]=p,c[n++]=w,e=t}c.length=n;var h,f=a.c;f&&(h=f.style.display,f.style.display="none");try{for(;b<k;){var G,l=j[b+2]||m,B=c[r+2]||m,t=Math.min(l,B),A=j[b+1];if(1!==A.nodeType&&(G=x.substring(g,t))){s&&(G=G.replace(d,"\r")),A.nodeValue=G;var L=A.ownerDocument,o=L.createElement("span");o.className=c[r+1];var v=A.parentNode;v.replaceChild(o,A),o.appendChild(A),g<l&&(j[b+1]=A=L.createTextNode(x.substring(t,l)),v.insertBefore(A,o.nextSibling))}g=t,g>=l&&(b+=2),g>=B&&(r+=2)}}finally{f&&(f.style.display=h)}}catch(u){D.console&&console.log(u&&u.stack||u)}}var D=window,y=["break,continue,do,else,for,if,return,while"],E=[[y,"auto,case,char,const,default,double,enum,extern,float,goto,inline,int,long,register,short,signed,sizeof,static,struct,switch,typedef,union,unsigned,void,volatile"],"catch,class,delete,false,import,new,operator,private,protected,public,this,throw,true,try,typeof"],M=[E,"alignof,align_union,asm,axiom,bool,concept,concept_map,const_cast,constexpr,decltype,delegate,dynamic_cast,explicit,export,friend,generic,late_check,mutable,namespace,nullptr,property,reinterpret_cast,static_assert,static_cast,template,typeid,typename,using,virtual,where"],N=[E,"abstract,assert,boolean,byte,extends,final,finally,implements,import,instanceof,interface,null,native,package,strictfp,super,synchronized,throws,transient"],O=[N,"as,base,by,checked,decimal,delegate,descending,dynamic,event,fixed,foreach,from,group,implicit,in,internal,into,is,let,lock,object,out,override,orderby,params,partial,readonly,ref,sbyte,sealed,stackalloc,string,select,uint,ulong,unchecked,unsafe,ushort,var,virtual,where"],E=[E,"debugger,eval,export,function,get,null,set,undefined,var,with,Infinity,NaN"],P=[y,"and,as,assert,class,def,del,elif,except,exec,finally,from,global,import,in,is,lambda,nonlocal,not,or,pass,print,raise,try,with,yield,False,True,None"],Q=[y,"alias,and,begin,case,class,def,defined,elsif,end,ensure,false,in,module,next,nil,not,or,redo,rescue,retry,self,super,then,true,undef,unless,until,when,yield,BEGIN,END"],W=[y,"as,assert,const,copy,drop,enum,extern,fail,false,fn,impl,let,log,loop,match,mod,move,mut,priv,pub,pure,ref,self,static,struct,true,trait,type,unsafe,use"],y=[y,"case,done,elif,esac,eval,fi,function,in,local,set,then,until"],R=/^(DIR|FILE|vector|(de|priority_)?queue|list|stack|(const_)?iterator|(multi)?(set|map)|bitset|u?(int|float)\d*)\b/,V=/\S/,X=v({keywords:[M,O,E,"caller,delete,die,do,dump,elsif,eval,exit,foreach,for,goto,if,import,last,local,my,next,no,our,print,package,redo,require,sub,undef,unless,until,use,wantarray,while,BEGIN,END",P,Q,y],hashComments:!0,cStyleComments:!0,multiLineStrings:!0,regexLiterals:!0}),F={};p(X,["default-code"]),p(C([],[["pln",/^[^<?]+/],["dec",/^<!\w[^>]*(?:>|$)/],["com",/^<\!--[\S\s]*?(?:--\>|$)/],["lang-",/^<\?([\S\s]+?)(?:\?>|$)/],["lang-",/^<%([\S\s]+?)(?:%>|$)/],["pun",/^(?:<[%?]|[%?]>)/],["lang-",/^<xmp\b[^>]*>([\S\s]+?)<\/xmp\b[^>]*>/i],["lang-js",/^<script\b[^>]*>([\S\s]*?)(<\/script\b[^>]*>)/i],["lang-css",/^<style\b[^>]*>([\S\s]*?)(<\/style\b[^>]*>)/i],["lang-in.tag",/^(<\/?[a-z][^<>]*>)/i]]),["default-markup","htm","html","mxml","xhtml","xml","xsl"]),p(C([["pln",/^\s+/,q," \t\r\n"],["atv",/^(?:"[^"]*"?|'[^']*'?)/,q,"\"'"]],[["tag",/^^<\/?[a-z](?:[\w-.:]*\w)?|\/?>$/i],["atn",/^(?!style[\s=]|on)[a-z](?:[\w:-]*\w)?/i],["lang-uq.val",/^=\s*([^\s"'>]*(?:[^\s"'/>]|\/(?=\s)))/],["pun",/^[/<->]+/],["lang-js",/^on\w+\s*=\s*"([^"]+)"/i],["lang-js",/^on\w+\s*=\s*'([^']+)'/i],["lang-js",/^on\w+\s*=\s*([^\s"'>]+)/i],["lang-css",/^style\s*=\s*"([^"]+)"/i],["lang-css",/^style\s*=\s*'([^']+)'/i],["lang-css",/^style\s*=\s*([^\s"'>]+)/i]]),["in.tag"]),p(C([],[["atv",/^[\S\s]+/]]),["uq.val"]),p(v({keywords:M,hashComments:!0,cStyleComments:!0,types:R}),["c","cc","cpp","cxx","cyc","m"]),p(v({keywords:"null,true,false"}),["json"]),p(v({keywords:O,hashComments:!0,cStyleComments:!0,verbatimStrings:!0,types:R}),["cs"]),p(v({keywords:N,cStyleComments:!0}),["java"]),p(v({keywords:y,hashComments:!0,multiLineStrings:!0}),["bash","bsh","csh","sh"]),p(v({keywords:P,hashComments:!0,multiLineStrings:!0,tripleQuotedStrings:!0}),["cv","py","python"]),p(v({keywords:"caller,delete,die,do,dump,elsif,eval,exit,foreach,for,goto,if,import,last,local,my,next,no,our,print,package,redo,require,sub,undef,unless,until,use,wantarray,while,BEGIN,END",hashComments:!0,multiLineStrings:!0,regexLiterals:2}),["perl","pl","pm"]),p(v({keywords:Q,hashComments:!0,multiLineStrings:!0,regexLiterals:!0}),["rb","ruby"]),p(v({keywords:E,cStyleComments:!0,regexLiterals:!0}),["javascript","js"]),p(v({keywords:"all,and,by,catch,class,else,extends,false,finally,for,if,in,is,isnt,loop,new,no,not,null,of,off,on,or,return,super,then,throw,true,try,unless,until,when,while,yes",hashComments:3,cStyleComments:!0,multilineStrings:!0,tripleQuotedStrings:!0,regexLiterals:!0}),["coffee"]),p(v({keywords:W,cStyleComments:!0,multilineStrings:!0}),["rc","rs","rust"]),p(C([],[["str",/^[\S\s]+/]]),["regex"]);var Y=D.PR={createSimpleLexer:C,registerLangHandler:p,sourceDecorator:v,PR_ATTRIB_NAME:"atn",PR_ATTRIB_VALUE:"atv",PR_COMMENT:"com",PR_DECLARATION:"dec",PR_KEYWORD:"kwd",PR_LITERAL:"lit",PR_NOCODE:"nocode",PR_PLAIN:"pln",PR_PUNCTUATION:"pun",PR_SOURCE:"src",PR_STRING:"str",PR_TAG:"tag",PR_TYPE:"typ",prettyPrintOne:D.prettyPrintOne=function(a,d,g){var b=document.createElement("div");return b.innerHTML="<pre>"+a+"</pre>",b=b.firstChild,g&&J(b,g,!0),K({h:d,j:g,c:b,i:1}),b.innerHTML},prettyPrint:D.prettyPrint=function(a,d){function g(){for(var b=D.PR_SHOULD_USE_CONTINUATION?c.now()+250:1/0;i<p.length&&c.now()<b;i++){for(var d=p[i],j=h,k=d;k=k.previousSibling;){var m=k.nodeType,o=(7===m||8===m)&&k.nodeValue;if(o?!/^\??prettify\b/.test(o):3!==m||/\S/.test(k.nodeValue))break;if(o){j={},o.replace(/\b(\w+)=([\w%+\-.:]+)/g,function(a,b,c){j[b]=c});break}}if(k=d.className,(j!==h||e.test(k))&&!v.test(k)){for(m=!1,o=d.parentNode;o;o=o.parentNode)if(f.test(o.tagName)&&o.className&&e.test(o.className)){m=!0;break}if(!m){if(d.className+=" prettyprinted",!(m=j.lang)){var y,m=k.match(n);!m&&(y=U(d))&&t.test(y.tagName)&&(m=y.className.match(n)),m&&(m=m[1])}if(w.test(d.tagName))o=1;else var o=d.currentStyle,u=s.defaultView,o=(o=o?o.whiteSpace:u&&u.getComputedStyle?u.getComputedStyle(d,q).getPropertyValue("white-space"):0)&&"pre"===o.substring(0,3);u=j.linenums,(u="true"===u||+u)||(u=!!(u=k.match(/\blinenums\b(?::(\d+))?/))&&(!u[1]||!u[1].length||+u[1])),u&&J(d,u,o),r={h:m,c:d,j:u,i:o},K(r)}}}i<p.length?setTimeout(g,250):"function"==typeof a&&a()}for(var b=d||document.body,s=b.ownerDocument||document,b=[b.getElementsByTagName("pre"),b.getElementsByTagName("code"),b.getElementsByTagName("xmp")],p=[],m=0;m<b.length;++m)for(var j=0,k=b[m].length;j<k;++j)p.push(b[m][j]);var b=q,c=Date;c.now||(c={now:function(){return+new Date}});var r,i=0,n=/\blang(?:uage)?-([\w.]+)(?!\S)/,e=/\bprettyprint\b/,v=/\bprettyprinted\b/,w=/pre|xmp/i,t=/^code$/i,f=/^(?:pre|code|xmp)$/i,h={};g()}};"function"==typeof define&&define.amd&&define("google-code-prettify",[],function(){return Y})}()}(),void 0===$.oc&&($.oc={}),void 0===$.oc.langMessages&&($.oc.langMessages={}),$.oc.lang=function(lang,messages){return lang.load=function(locale){void 0===messages[locale]&&(messages[locale]={}),lang.loadedMessages=messages[locale]},lang.get=function(name,defaultValue){if(name){var result=lang.loadedMessages;return defaultValue||(defaultValue=name),$.each(name.split("."),function(index,value){if(void 0===result[value])return result=defaultValue,!1;result=result[value]}),result}},void 0===lang.locale&&(lang.locale=$("html").attr("lang")||"en"),void 0===lang.loadedMessages&&lang.load(lang.locale),lang}($.oc.lang||{},$.oc.langMessages),function($){void 0===$.oc&&($.oc={}),$.oc.alert=function(message,title){var messageTitle="string"!=typeof title?$.oc.lang.get("alert.error"):title;$.oc.vueComponentHelpers.modalUtils.showAlert(messageTitle,message,{buttonText:$.oc.lang.get("alert.dismiss")})},$.oc.confirm=function(message,callback,title){"string"!=typeof title&&$.oc.lang.get("alert.confirm");$.oc.confirmPromise(message,title).then(function(){callback(!0)},function(){})},$.oc.confirmPromise=function(message,title){var messageTitle="string"!=typeof title?$.oc.lang.get("alert.confirm"):title;return $.oc.vueComponentHelpers.modalUtils.showConfirm(messageTitle,message,{})}}(jQuery),$(window).on("ajaxErrorMessage",function(event,message){message&&($.oc.alert(message),event.preventDefault())}),$(window).on("ajaxConfirmMessage",function(event,message){if(message)return $.oc.confirm(message,function(isConfirm){isConfirm?event.promise.resolve():event.promise.reject()}),event.preventDefault(),!0}),$(document).on("ajaxPromise","[data-request]",function(){var $target=$(this);void 0!==$target.data("attach-loading")&&$target.addClass("oc-loading").prop("disabled",!0),$target.is("form")&&$("[data-attach-loading]",$target).addClass("oc-loading").prop("disabled",!0)}).on("ajaxFail ajaxDone","[data-request]",function(){var $target=$(this);void 0!==$target.data("attach-loading")&&$target.removeClass("oc-loading").prop("disabled",!1),$target.is("form")&&$("[data-attach-loading]",$target).removeClass("oc-loading").prop("disabled",!1)}),function($){void 0===$.oc&&($.oc={});var Snackbar=function(){function validateOptions(options){if(void 0!==options){if("object"!=typeof options)throw new Error("Snackbar options must be an object");if(void 0!==options.replace&&"number"!=typeof options.replace)throw new Error("Snackbar options.replace must be a number");if(void 0!==options.timeout){if("number"!=typeof options.timeout)throw new Error("Snackbar options.timeout must be a number");if(options.timeout<2e3)throw new Error("Snackbar options.timeout cannot be lower than 2000");if(options.timeout>8e3)throw new Error("Snackbar options.timeout cannot be higher than 8000")}if(void 0!==options.action){if("object"!=typeof options.action)throw new Error("Snackbar options.action must be an object");if("string"!=typeof options.action.label)throw new Error("Snackbar options.action.label must be a string");if("function"!=typeof options.action.callback)throw new Error("Snackbar options.action.callback must be a function")}}}function runQueue(){if(null===displayedMessage){var parameters=queue.shift();void 0!==parameters&&buildSnackbar(parameters)}}function makeUniqueId(){return++lastUniqueId}function buildSnackbar(parameters){displayedMessage={uniqueId:parameters.uniqueId};var $element=$('                    <div class="october-snackbar">                         <div class="snackbar-label"></div>                         <button class="snackbar-dismiss" aria-title="Dismiss">X</button>                     </div>'),$label=$element.find(".snackbar-label");if($label.text(parameters.message),$element.find(".snackbar-dismiss").one("click.snackbar",function(){hideSnackbar($element,parameters.options)}),parameters.options&&parameters.options.action){var $actionButton=$('<button class="snackbar-action"></button>');$actionButton.text(parameters.options.action.label),$actionButton.one("click.snackbar",function(){parameters.options.action.callback(),hideSnackbar($element,parameters.options)}),$actionButton.insertAfter($label)}$(document.body).append($element),displayedMessage.element=$element,displayedMessage.uniqueId=parameters.uniqueId,displayedMessage.options=parameters.options,setTimeout(function(){$element.addClass("enter"),setTimeout(function(){$element.addClass("show-snackbar"),startHideTimeout($element,parameters.options)},20)},1)}function startHideTimeout($element,options){var timeout=2e3;options&&options.timeout&&(timeout=options.timeout),options.timeoutId=setTimeout(function(){hideSnackbar($element,options)},timeout)}function hideSnackbar($element,options){$element.find("button").off(".snackbar"),$element.removeClass("show-snackbar"),clearTimeout(options.timeoutId),setTimeout(function(){displayedMessage=null,$element.remove(),runQueue()},210)}function forceHideSnackbar($element,options){clearTimeout(options.timeoutId),options.timeoutId=setTimeout(function(){hideSnackbar($element,options)},200)}function removeFromQueue(uniqueId){for(var index=0;index<queue.length;index++)if(queue[index].uniqueId==uniqueId)return void queue.splice(index,1)}var queue=[],lastUniqueId=0,displayedMessage=null;this.show=function(message,options){validateOptions(options),options&&options.replace&&(displayedMessage&&options.replace===displayedMessage.uniqueId?forceHideSnackbar(displayedMessage.element,displayedMessage.options):removeFromQueue(options.replace));var uniqueId=makeUniqueId();return queue.push({message:message,options:options||{},uniqueId:uniqueId}),runQueue(),uniqueId},this.hide=function(uniqueId){displayedMessage&&uniqueId===displayedMessage.uniqueId&&forceHideSnackbar(displayedMessage.element,displayedMessage.options)}};$.oc.snackbar=new Snackbar}(window.jQuery),function($){var Base=$.oc.foundation.base,BaseProto=Base.prototype,Scrollpad=function(element,options){this.$el=$(element),this.scrollbarElement=null,this.dragHandleElement=null,this.scrollContentElement=null,this.contentElement=null,this.options=options,this.scrollbarSize=null,this.updateScrollbarTimer=null,this.dragOffset=null,Base.call(this),this.init(),$.oc.foundation.controlUtils.markDisposable(element)};Scrollpad.prototype=Object.create(BaseProto),Scrollpad.prototype.constructor=Scrollpad,Scrollpad.prototype.dispose=function(){this.unregisterHandlers(),this.$el.get(0).removeChild(this.scrollbarElement),this.$el.removeData("oc.scrollpad"),this.$el=null,this.scrollbarElement=null,this.dragHandleElement=null,this.scrollContentElement=null,this.contentElement=null,BaseProto.dispose.call(this)},Scrollpad.prototype.scrollToStart=function(){var scrollAttr="vertical"==this.options.direction?"scrollTop":"scrollLeft";this.scrollContentElement[scrollAttr]=0},Scrollpad.prototype.update=function(){this.updateScrollbarSize()},Scrollpad.prototype.init=function(){this.build(),this.setScrollContentSize(),this.registerHandlers()},Scrollpad.prototype.build=function(){var el=this.$el.get(0);this.scrollContentElement=el.children[0],this.contentElement=this.scrollContentElement.children[0],this.$el.prepend('<div class="scrollpad-scrollbar"><div class="drag-handle"></div></div>'),this.scrollbarElement=el.querySelector(".scrollpad-scrollbar"),this.dragHandleElement=el.querySelector(".scrollpad-scrollbar > .drag-handle")},Scrollpad.prototype.registerHandlers=function(){this.$el.on("mouseenter",this.proxy(this.onMouseEnter)),this.$el.on("mouseleave",this.proxy(this.onMouseLeave)),this.$el.one("dispose-control",this.proxy(this.dispose)),this.scrollContentElement.addEventListener("scroll",this.proxy(this.onScroll)),this.dragHandleElement.addEventListener("mousedown",this.proxy(this.onStartDrag))},Scrollpad.prototype.unregisterHandlers=function(){this.$el.off("mouseenter",this.proxy(this.onMouseEnter)),this.$el.off("mouseleave",this.proxy(this.onMouseLeave)),this.$el.off("dispose-control",this.proxy(this.dispose)),this.scrollContentElement.removeEventListener("scroll",this.proxy(this.onScroll)),this.dragHandleElement.removeEventListener("mousedown",this.proxy(this.onStartDrag)),document.removeEventListener("mousemove",this.proxy(this.onMouseMove)),document.removeEventListener("mouseup",this.proxy(this.onEndDrag))},Scrollpad.prototype.setScrollContentSize=function(){var scrollbarSize=this.getScrollbarSize();"vertical"==this.options.direction?this.scrollContentElement.setAttribute("style","margin-right: -"+scrollbarSize+"px"):this.scrollContentElement.setAttribute("style","margin-bottom: -"+scrollbarSize+"px")},Scrollpad.prototype.getScrollbarSize=function(){if(null!==this.scrollbarSize)return this.scrollbarSize;var testerElement=document.createElement("div");testerElement.setAttribute("class","scrollpad-scrollbar-size-tester"),testerElement.appendChild(document.createElement("div")),document.body.appendChild(testerElement);var width=testerElement.offsetWidth,innerWidth=testerElement.querySelector("div").offsetWidth;return document.body.removeChild(testerElement),width===innerWidth&&navigator.userAgent.toLowerCase().indexOf("firefox")>-1?this.scrollbarSize=17:this.scrollbarSize=width-innerWidth},Scrollpad.prototype.updateScrollbarSize=function(){this.scrollbarElement.removeAttribute("data-hidden");var contentSize="vertical"==this.options.direction?this.contentElement.scrollHeight:this.contentElement.scrollWidth,scrollOffset="vertical"==this.options.direction?this.scrollContentElement.scrollTop:this.scrollContentElement.scrollLeft,scrollbarSize="vertical"==this.options.direction?this.scrollbarElement.offsetHeight:this.scrollbarElement.offsetWidth,scrollbarRatio=scrollbarSize/contentSize,handleOffset=Math.round(scrollbarRatio*scrollOffset)+2,handleSize=Math.floor(scrollbarRatio*(scrollbarSize-2))-2;scrollbarSize<contentSize?("vertical"==this.options.direction?this.dragHandleElement.setAttribute("style","top: "+handleOffset+"px; height: "+handleSize+"px"):this.dragHandleElement.setAttribute("style","left: "+handleOffset+"px; width: "+handleSize+"px"),this.scrollbarElement.removeAttribute("data-hidden")):this.scrollbarElement.setAttribute("data-hidden",!0)},Scrollpad.prototype.displayScrollbar=function(){this.clearUpdateScrollbarTimer(),this.updateScrollbarSize(),this.scrollbarElement.setAttribute("data-visible","true")},Scrollpad.prototype.hideScrollbar=function(){this.scrollbarElement.removeAttribute("data-visible")},Scrollpad.prototype.clearUpdateScrollbarTimer=function(){null!==this.updateScrollbarTimer&&(clearTimeout(this.updateScrollbarTimer),this.updateScrollbarTimer=null)},Scrollpad.prototype.onMouseEnter=function(){this.displayScrollbar()},Scrollpad.prototype.onMouseLeave=function(){this.hideScrollbar()},Scrollpad.prototype.onScroll=function(){null===this.updateScrollbarTimer&&(this.updateScrollbarTimer=setTimeout(this.proxy(this.displayScrollbar),10))},Scrollpad.prototype.onStartDrag=function(ev){$.oc.foundation.event.stop(ev);var pageCoords=$.oc.foundation.event.pageCoordinates(ev),eventOffset="vertical"==this.options.direction?pageCoords.y:pageCoords.x,handleCoords=$.oc.foundation.element.absolutePosition(this.dragHandleElement),handleOffset="vertical"==this.options.direction?handleCoords.top:handleCoords.left;this.dragOffset=eventOffset-handleOffset,document.addEventListener("mousemove",this.proxy(this.onMouseMove)),document.addEventListener("mouseup",this.proxy(this.onEndDrag))},Scrollpad.prototype.onMouseMove=function(ev){$.oc.foundation.event.stop(ev);var eventCoordsAttr="vertical"==this.options.direction?"y":"x",elementCoordsAttr="vertical"==this.options.direction?"top":"left",offsetAttr="vertical"==this.options.direction?"offsetHeight":"offsetWidth",scrollAttr="vertical"==this.options.direction?"scrollTop":"scrollLeft",eventOffset=$.oc.foundation.event.pageCoordinates(ev)[eventCoordsAttr],scrollbarOffset=$.oc.foundation.element.absolutePosition(this.scrollbarElement)[elementCoordsAttr],dragPos=eventOffset-scrollbarOffset-this.dragOffset,scrollbarSize=this.scrollbarElement[offsetAttr],contentSize=this.contentElement[offsetAttr],dragPerc=dragPos/scrollbarSize;dragPerc>1&&(dragPerc=1);var scrollPos=dragPerc*contentSize;this.scrollContentElement[scrollAttr]=scrollPos},Scrollpad.prototype.onEndDrag=function(ev){document.removeEventListener("mousemove",this.proxy(this.onMouseMove)),document.removeEventListener("mouseup",this.proxy(this.onEndDrag))},Scrollpad.DEFAULTS={direction:"vertical"};var old=$.fn.scrollpad;$.fn.scrollpad=function(option){var args=Array.prototype.slice.call(arguments,1),result=void 0;return this.each(function(){var $this=$(this),data=$this.data("oc.scrollpad"),options=$.extend({},Scrollpad.DEFAULTS,$this.data(),"object"==typeof option&&option);if(data||$this.data("oc.scrollpad",data=new Scrollpad(this,options)),"string"==typeof option&&(result=data[option].apply(data,args)),void 0!==result)return!1}),result||this},$.fn.scrollpad.Constructor=Scrollpad,$.fn.scrollpad.noConflict=function(){return $.fn.scrollpad=old,this},$(document).on("render",function(){$("div[data-control=scrollpad]").scrollpad()})}(window.jQuery),function($){function setCounterValue($counter,value){$counter.toggleClass("empty",0==value),$counter.text(value)}function setCountersValue(itemId,$el,value){setCounterValue($('span.counter[data-menu-id="'+itemId+'"]',$el),value),setCounterValue($('span.counter[data-menu-id="'+itemId+'"]',"#layout-sidenav-responsive"),value),setCounterValue($('span.counter[data-menu-id="'+itemId+'"]',"#layout-mainmenu"),value)}void 0===$.oc&&($.oc={});var SideNav=function(element,options){this.options=options,this.$el=$(element),this.$list=$("ul",this.$el),this.$items=$("li",this.$list),this.init(),this.initResponsive()};SideNav.DEFAULTS={activeClass:"active"},SideNav.prototype.init=function(){var self=this;this.$list.dragScroll({vertical:!0,useNative:!1,useDrag:!0,start:function(){self.$list.addClass("drag")},stop:function(){self.$list.removeClass("drag")},scrollClassContainer:self.$el,scrollMarkerContainer:self.$el}),this.$list.on("click",function(){if(self.$list.hasClass("drag"))return!1})},SideNav.prototype.initResponsive=function(){var $sideNav=$("#layout-sidenav-responsive"),$items=$("ul li",$sideNav),self=this;$items.click(function(){var itemId=$(this).data("menu-item");itemId&&($(this).data("no-side-panel")||($items.removeClass(self.options.activeClass).filter("[data-menu-item="+itemId+"]").addClass(self.options.activeClass),$("[data-menu-item="+itemId+"]:first",self.$list).trigger("click")))})},SideNav.prototype.unsetActiveItem=function(itemId){this.$items.removeClass(this.options.activeClass)},SideNav.prototype.setActiveItem=function(itemId){itemId&&this.$items.removeClass(this.options.activeClass).filter("[data-menu-item="+itemId+"]").addClass(this.options.activeClass)},SideNav.prototype.setCounter=function(itemId,value){return setCountersValue(itemId,this.$el,value),this},SideNav.prototype.increaseCounter=function(itemId,value){var $counter=$('span.counter[data-menu-id="'+itemId+'"]',this.$el),originalValue=parseInt($counter.text());isNaN(originalValue)&&(originalValue=0);var newValue=value+originalValue;return setCountersValue(itemId,this.$el,newValue),this},SideNav.prototype.dropCounter=function(itemId){return this.setCounter(itemId,0),this};var old=$.fn.sideNav;$.fn.sideNav=function(option){var result,args=Array.prototype.slice.call(arguments,1);return this.each(function(){var $this=$(this),data=$this.data("oc.sideNav"),options=$.extend({},SideNav.DEFAULTS,$this.data(),"object"==typeof option&&option);if(data||$this.data("oc.sideNav",data=new SideNav(this,options)),"string"==typeof option&&(result=data[option].apply(data,args)),void 0!==result)return!1;void 0===$.oc.sideNav&&($.oc.sideNav=data)}),result||this},$.fn.sideNav.Constructor=SideNav,$.fn.sideNav.noConflict=function(){return $.fn.sideNav=old,this},$(document).ready(function(){$('[data-control="sidenav"]').sideNav()})}(window.jQuery),function($){var Base=$.oc.foundation.base,BaseProto=Base.prototype,Scrollbar=function(element,options){function startDrag(event){$("body").addClass("drag-noselect"),$el.trigger("oc.scrollStart"),dragStart=event[eventElementName],startOffset=self.options.vertical?$el.scrollTop():$el.scrollLeft(),isTouch?($(window).on("touchmove.scrollbar",function(event){moveDrag(event.originalEvent.touches[0])&&event.preventDefault()}),$el.on("touchend.scrollbar",stopDrag)):($(window).on("mousemove.scrollbar",function(event){return moveDrag(event),!1}),$(window).on("mouseup.scrollbar",function(){return stopDrag(),!1}))}function moveDrag(event){self.isLocked=!0;var offset,dragTo=event[eventElementName];if(self.isTouch)offset=dragStart-dragTo;else{var ratio=self.getCanvasSize()/self.getViewportSize();offset=(dragTo-dragStart)*ratio}return self.options.vertical?$el.scrollTop(startOffset+offset):$el.scrollLeft(startOffset+offset),self.setThumbPosition(),self.options.vertical?el.scrollTop!=startOffset:el.scrollLeft!=startOffset}function stopDrag(){$("body").removeClass("drag-noselect"),$el.trigger("oc.scrollEnd"),$(window).off(".scrollbar")}function scrollWheel(offset){startOffset=self.options.vertical?el.scrollTop:el.scrollLeft,$el.trigger("oc.scrollStart"),self.options.vertical?$el.scrollTop(startOffset+offset):$el.scrollLeft(startOffset+offset);var scrolled=self.options.vertical?el.scrollTop!=startOffset:el.scrollLeft!=startOffset;return self.setThumbPosition(),isWebkit?$el.trigger("oc.scrollEnd"):(void 0!==self.endScrollTimeout&&(clearTimeout(self.endScrollTimeout),self.endScrollTimeout=void 0),self.endScrollTimeout=setTimeout(function(){$el.trigger("oc.scrollEnd"),self.endScrollTimeout=void 0},50)),scrolled}var $el=this.$el=$(element),el=$el.get(0),self=this,options=this.options=options||{},isNative=(this.sizeName=options.vertical?"height":"width",$("html").hasClass("mobile")),isTouch=this.isTouch=Modernizr.touchevents,eventElementName=(this.isScrollable=!1,this.isLocked=!1,options.vertical?"pageY":"pageX"),dragStart=0,startOffset=0;if($.oc.foundation.controlUtils.markDisposable(element),Base.call(this),this.$el.one("dispose-control",this.proxy(this.dispose)),!isNative){this.$scrollbar=$("<div />").addClass("scrollbar-scrollbar"),this.$track=$("<div />").addClass("scrollbar-track").appendTo(this.$scrollbar),this.$thumb=$("<div />").addClass("scrollbar-thumb").appendTo(this.$track),$el.addClass("drag-scrollbar").addClass(options.vertical?"vertical":"horizontal").prepend(this.$scrollbar),isTouch?this.$el.on("touchstart",function(event){var touchEvent=event.originalEvent;1==touchEvent.touches.length&&(startDrag(touchEvent.touches[0]),event.stopPropagation())}):(this.$thumb.on("mousedown",function(event){startDrag(event)}),this.$track.on("mouseup",function(event){moveDrag(event)})),$el.mousewheel(function(event){return!scrollWheel((self.options.vertical?event.deltaFactor*event.deltaY*-1:event.deltaFactor*event.deltaX)*self.options.scrollSpeed)}),$el.on("oc.scrollbar.gotoStart",function(event){self.options.vertical?$el.scrollTop(0):$el.scrollLeft(0),self.update(),event.stopPropagation()}),$(window).on("resize",$.proxy(this.update,this)),$(window).on("oc.updateUi",$.proxy(this.update,this));var isWebkit=$(document.documentElement).hasClass("webkit");setTimeout(function(){self.update()},1)}};Scrollbar.prototype=Object.create(BaseProto),Scrollbar.prototype.constructor=Scrollbar,Scrollbar.prototype.dispose=function(){this.unregisterHandlers(),BaseProto.dispose.call(this)},Scrollbar.prototype.unregisterHandlers=function(){},Scrollbar.DEFAULTS={vertical:!0,scrollSpeed:2,animation:!0,start:function(){},drag:function(){},stop:function(){}},Scrollbar.prototype.update=function(){this.$scrollbar&&(this.$scrollbar.hide(),this.setThumbSize(),this.setThumbPosition(),this.$scrollbar.show())},Scrollbar.prototype.setThumbSize=function(){var properties=this.calculateProperties();this.isScrollable=!(properties.thumbSizeRatio>=1),this.$scrollbar.toggleClass("disabled",!this.isScrollable),this.options.vertical?(this.$track.height(properties.canvasSize),this.$thumb.height(properties.thumbSize)):(this.$track.width(properties.canvasSize),this.$thumb.width(properties.thumbSize))},Scrollbar.prototype.setThumbPosition=function(){var properties=this.calculateProperties();this.options.vertical?this.$thumb.css({top:properties.thumbPosition}):this.$thumb.css({left:properties.thumbPosition})},Scrollbar.prototype.calculateProperties=function(){var $el=this.$el,properties={};return properties.viewportSize=this.getViewportSize(),properties.canvasSize=this.getCanvasSize(),properties.scrollAmount=this.options.vertical?$el.scrollTop():$el.scrollLeft(),properties.thumbSizeRatio=properties.viewportSize/(properties.canvasSize-1),properties.thumbSize=properties.viewportSize*properties.thumbSizeRatio,properties.thumbPositionRatio=properties.scrollAmount/(properties.canvasSize-properties.viewportSize),properties.thumbPosition=(properties.viewportSize-properties.thumbSize)*properties.thumbPositionRatio+properties.scrollAmount,isNaN(properties.thumbPosition)&&(properties.thumbPosition=0),properties},Scrollbar.prototype.getViewportSize=function(){return this.options.vertical?this.$el.height():this.$el.width()},Scrollbar.prototype.getCanvasSize=function(){return this.options.vertical?this.$el.get(0).scrollHeight:this.$el.get(0).scrollWidth},Scrollbar.prototype.gotoElement=function(element,callback){var $el=$(element);if($el.length){var offset=0,animated=!1,params={duration:300,queue:!1,complete:function(){void 0!==callback&&callback()}};return this.options.vertical?(offset=$el.get(0).offsetTop-this.$el.scrollTop(),this.options.animation?offset<0?(this.$el.animate({scrollTop:$el.get(0).offsetTop},params),animated=!0):(offset=$el.get(0).offsetTop-(this.$el.scrollTop()+this.$el.outerHeight()))>0&&(this.$el.animate({scrollTop:$el.get(0).offsetTop+$el.outerHeight()-this.$el.outerHeight()},params),animated=!0):offset<0?this.$el.scrollTop($el.get(0).offsetTop):(offset=$el.get(0).offsetTop-(this.$el.scrollTop()+this.$el.outerHeight()))>0&&this.$el.scrollTop($el.get(0).offsetTop+$el.outerHeight()-this.$el.outerHeight())):(offset=$el.get(0).offsetLeft-this.$el.scrollLeft(),offset<0?(this.$el.animate({scrollLeft:$el.get(0).offsetLeft},params),animated=!0):(offset=$el.get(0).offsetLeft+$el.outerWidth()-(this.$el.scrollLeft()+this.$el.outerWidth()))>0&&(this.$el.animate({scrollLeft:$el.get(0).offsetLeft+$el.outerWidth()-this.$el.outerWidth()},params),animated=!0)),animated||void 0===callback||callback(),this}},Scrollbar.prototype.dispose=function(){this.$el=null,this.$scrollbar=null,this.$track=null,this.$thumb=null};var old=$.fn.scrollbar;$.fn.scrollbar=function(option){return this.each(function(){var $this=$(this),data=$this.data("oc.scrollbar"),options=$.extend({},Scrollbar.DEFAULTS,$this.data(),"object"==typeof option&&option);data||$this.data("oc.scrollbar",data=new Scrollbar(this,options)),"string"==typeof option&&data[option].call($this)})},$.fn.scrollbar.Constructor=Scrollbar,$.fn.scrollbar.noConflict=function(){return $.fn.scrollbar=old,this},$(document).render(function(){$("[data-control=scrollbar]").scrollbar()})}(window.jQuery),function($){var FileList=function(element,options){this.options=options,this.$el=$(element),this.init()};FileList.DEFAULTS={ignoreItemClick:!1},FileList.prototype.init=function(){var self=this;this.$el.on("click","li.group > h4 > a, li.group > div.group",function(){return self.toggleGroup($(this).closest("li")),!1}),this.options.ignoreItemClick||this.$el.on("click","li.item > a",function(event){var e=$.Event("open.oc.list",{relatedTarget:$(this).parent().get(0),clickEvent:event});return self.$el.trigger(e,this),!1}),this.$el.on("ajaxUpdate",$.proxy(this.update,this))},FileList.prototype.toggleGroup=function(group){var $group=$(group);"expanded"==$group.attr("data-status")?this.collapseGroup($group):this.expandGroup($group)},FileList.prototype.collapseGroup=function(group){var $list=$("> ul, > div.subitems",group);$list.css("overflow","hidden"),$list.animate({height:0},{duration:100,queue:!1,complete:function(){$list.css({overflow:"visible",display:"none"}),$(group).attr("data-status","collapsed"),$(window).trigger("resize")}}),this.sendGroupStatusRequest(group,0)},FileList.prototype.expandGroup=function(group){var $list=$("> ul, > div.subitems",group);$list.css({overflow:"hidden",display:"block",height:0}),$list.animate({height:$list[0].scrollHeight},{duration:100,queue:!1,complete:function(){$list.css({overflow:"visible",height:"auto"}),$(group).attr("data-status","expanded"),$(window).trigger("resize")}}),this.sendGroupStatusRequest(group,1)},FileList.prototype.sendGroupStatusRequest=function(group,status){if(void 0!==this.options.groupStatusHandler){var groupId=$(group).data("group-id");void 0===groupId&&(groupId=$("> h4 a",group).text()),$(group).request(this.options.groupStatusHandler,{data:{group:groupId,status:status}})}},FileList.prototype.markActive=function(dataId){$("li.item",this.$el).removeClass("active"),dataId&&$('li.item[data-id="'+dataId+'"]',this.$el).addClass("active"),this.dataId=dataId},FileList.prototype.update=function(){void 0!==this.dataId&&this.markActive(this.dataId)};var old=$.fn.fileList;$.fn.fileList=function(option){var args=arguments;return this.each(function(){var $this=$(this),data=$this.data("oc.fileList"),options=$.extend({},FileList.DEFAULTS,$this.data(),"object"==typeof option&&option);if(data||$this.data("oc.fileList",data=new FileList(this,options)),"string"==typeof option){for(var methodArgs=[],i=1;i<args.length;i++)methodArgs.push(args[i]);data[option].apply(data,methodArgs)}})},$.fn.fileList.Constructor=FileList,$.fn.fileList.noConflict=function(){return $.fn.fileList=old,this},$(document).ready(function(){$("[data-control=filelist]").fileList()})}(window.jQuery),function($){var OctoberLayout=function(){};OctoberLayout.prototype.setPageTitle=function(title){var $title=$("title");void 0===this.pageTitleTemplate&&(this.pageTitleTemplate=$title.data("titleTemplate")),$title.text(this.pageTitleTemplate.replace("%s",title))},OctoberLayout.prototype.updateLayout=function(title){var $children,$el,fixedWidth,margin;$("[data-calculate-width]").each(function(){$children=$(this).children(),$children.length>0&&(fixedWidth=0,$children.each(function(){$el=$(this),margin=$el.data("oc.layoutMargin"),void 0===margin&&(margin=parseInt($el.css("marginRight"))+parseInt($el.css("marginLeft")),$el.data("oc.layoutMargin",margin)),fixedWidth+=$el.get(0).offsetWidth+margin}),$(this).width(fixedWidth),$(this).trigger("oc.widthFixed"))})},void 0===$.oc&&($.oc={}),$.oc.layout=new OctoberLayout,$(document).ready(function(){$.oc.layout.updateLayout(),window.setTimeout($.oc.layout.updateLayout,100)}),$(window).on("resize",function(){$.oc.layout.updateLayout()}),$(window).on("oc.updateUi",function(){$.oc.layout.updateLayout()})}(jQuery),function($){var SidePanelTab=function(element,options){this.options=options,this.$el=$(element),this.init()};SidePanelTab.prototype.init=function(){var self=this;this.tabOpenDelay=200,this.tabOpenTimeout=void 0,this.panelOpenTimeout=void 0,this.$sideNav=$("#layout-sidenav"),this.$sideNavRes=$("#layout-sidenav-responsive"),this.$sideNavItems=$("ul li",this.$sideNav),this.$sidePanelItems=$("[data-content-id]",this.$el),this.sideNavWidth=$("#layout-sidenav").outerWidth(),this.mainNavHeight=$.oc.backendCalculateTopContainerOffset(),this.panelVisible=!1,this.visibleItemId=!1,this.$sideNavItems.click(function(){if(!$(this).data("no-side-panel")){if($(window).width()<self.options.breakpoint){if($(this).data("menu-item")==self.visibleItemId&&self.panelVisible)return void self.hideSidePanel();self.displaySidePanel()}return self.displayTab(this),!1}}),$("#layout-body").click(function(){if(self.panelVisible)return self.hideSidePanel(),!1}),self.$el.on("close.oc.sidePanel",function(){self.hideSidePanel()}),this.updateActiveTab()},SidePanelTab.prototype.displayTab=function(menuItem){var menuItemId=$(menuItem).data("menu-item");this.visibleItemId=menuItemId,$.oc.sideNav.setActiveItem(menuItemId),this.$sidePanelItems.each(function(){var $el=$(this);$el.toggleClass("hide",$el.data("content-id")!=menuItemId)}),$(window).trigger("resize")},SidePanelTab.prototype.displaySidePanel=function(){$(document.body).addClass("display-side-panel"),this.$sideNavRes.is(":visible")&&(this.mainNavHeight=$.oc.backendCalculateTopContainerOffset()+this.$sideNavRes.outerHeight()),$("#layout-sidenav").is(":visible")?this.sideNavWidth=$("#layout-sidenav").outerWidth():this.sideNavWidth=0,this.$el.appendTo("#layout-canvas"),this.panelVisible=!0,this.$el.css({left:this.sideNavWidth,top:this.mainNavHeight}),this.updatePanelPosition(),$(window).trigger("resize")},SidePanelTab.prototype.hideSidePanel=function(){$(document.body).removeClass("display-side-panel"),0==this.$el.next("#layout-body").length&&$("#layout-body").before(this.$el),this.panelVisible=!1,this.updateActiveTab()},SidePanelTab.prototype.updatePanelPosition=function(){this.$el.height($(document).height()-this.mainNavHeight),this.panelVisible&&$(window).width()>this.options.breakpoint&&this.hideSidePanel()},SidePanelTab.prototype.updateActiveTab=function(){!this.panelVisible&&$(window).width()<this.options.breakpoint?$.oc.sideNav.unsetActiveItem():$.oc.sideNav.setActiveItem(this.visibleItemId)},SidePanelTab.DEFAULTS={breakpoint:769};var old=$.fn.sidePanelTab;$.fn.sidePanelTab=function(option){return this.each(function(){var $this=$(this),data=$this.data("oc.sidePanelTab"),options=$.extend({},SidePanelTab.DEFAULTS,$this.data(),"object"==typeof option&&option);data||$this.data("oc.sidePanelTab",data=new SidePanelTab(this,options)),"string"==typeof option&&data[option].call(data)})},$.fn.sidePanelTab.Constructor=SidePanelTab,$.fn.sidePanelTab.noConflict=function(){return $.fn.sidePanelTab=old,this},$(document).ready(function(){$("[data-control=layout-sidepanel]").sidePanelTab()})}(window.jQuery),function($){var SimpleList=function(element,options){var $el=this.$el=$(element);if(this.options=options||{},$el.hasClass("is-sortable")){var sortableOptions={distance:10};this.options.sortableHandle&&(sortableOptions.handle=this.options.sortableHandle),$el.find(".drag-handle").length>0&&(sortableOptions.handle=".drag-handle"),$el.find("> ul, > ol").sortable(sortableOptions)}if($el.hasClass("is-scrollable")){$el.wrapInner($("<div />").addClass("control-scrollbar"));$el.find(">.control-scrollbar:first").scrollbar()}};SimpleList.DEFAULTS={sortableHandle:null};var old=$.fn.simplelist;$.fn.simplelist=function(option){return this.each(function(){var $this=$(this),data=$this.data("oc.simplelist"),options=$.extend({},SimpleList.DEFAULTS,$this.data(),"object"==typeof option&&option);data||$this.data("oc.simplelist",data=new SimpleList(this,options))})},$.fn.simplelist.Constructor=SimpleList,$.fn.simplelist.noConflict=function(){return $.fn.simplelist=old,this},$(document).render(function(){$('[data-control="simplelist"]').simplelist()})}(window.jQuery),function($){var Base=$.oc.foundation.base,BaseProto=Base.prototype,TreeListWidget=function(element,options){this.$el=$(element),this.options=options||{},Base.call(this),$.oc.foundation.controlUtils.markDisposable(element),this.init()};TreeListWidget.prototype=Object.create(BaseProto),TreeListWidget.prototype.constructor=TreeListWidget,TreeListWidget.prototype.init=function(){var sortableOptions={handle:this.options.handle,nested:this.options.nested,onDrop:this.proxy(this.onDrop),afterMove:this.proxy(this.onAfterMove)};this.$el.find("> ol").sortable($.extend(sortableOptions,this.options)),this.options.nested||this.$el.find("> ol ol").sortable($.extend(sortableOptions,this.options)),this.$el.one("dispose-control",this.proxy(this.dispose))},TreeListWidget.prototype.dispose=function(){this.unbind(),BaseProto.dispose.call(this)},TreeListWidget.prototype.unbind=function(){this.$el.off("dispose-control",this.proxy(this.dispose)),this.$el.find("> ol").sortable("destroy"),this.options.nested||this.$el.find("> ol ol").sortable("destroy"),this.$el.removeData("oc.treelist"),this.$el=null,this.options=null},TreeListWidget.DEFAULTS={handle:null,nested:!0},TreeListWidget.prototype.onDrop=function($item,container,_super){this.$el&&(this.$el.trigger("move.oc.treelist",{item:$item,container:container}),_super($item,container))},TreeListWidget.prototype.onAfterMove=function($placeholder,container,$closestEl){this.$el&&this.$el.trigger("aftermove.oc.treelist",{placeholder:$placeholder,container:container,closestEl:$closestEl})};var old=$.fn.treeListWidget;$.fn.treeListWidget=function(option){var result;return this.each(function(){var $this=$(this),data=$this.data("oc.treelist"),options=$.extend({},TreeListWidget.DEFAULTS,$this.data(),"object"==typeof option&&option);if(data||$this.data("oc.treelist",data=new TreeListWidget(this,options)),"string"==typeof option&&(result=data[option].call(data)),void 0!==result)return!1}),result||this},$.fn.treeListWidget.Constructor=TreeListWidget,$.fn.treeListWidget.noConflict=function(){return $.fn.treeListWidget=old,this},$(document).render(function(){$('[data-control="treelist"]').treeListWidget()})}(window.jQuery),function($){var SidenavTree=function(element,options){this.options=options,this.$el=$(element),this.init()};SidenavTree.DEFAULTS={treeName:"sidenav_tree",rememberSearch:!1},SidenavTree.prototype.init=function(){var self=this;if($(document.body).addClass("has-sidenav-tree"),this.statusCookieName=this.options.treeName+"groupStatus",this.searchCookieName=this.options.treeName+"search",this.$searchInput=$(this.options.searchInput),this.$el.on("click","li > div.group",function(){return self.toggleGroup($(this).closest("li")),!1}),this.$searchInput.on("input",function(){self.handleSearchChange()}),this.options.rememberSearch){var searchTerm=$.cookie(this.searchCookieName);void 0!==searchTerm&&searchTerm.length>0&&(this.$searchInput.val(searchTerm),this.applySearch())}var scrollbar=$("[data-control=scrollbar]",this.$el).data("oc.scrollbar"),active=$("li.active",this.$el);active.length>0&&scrollbar.gotoElement(active)},SidenavTree.prototype.toggleGroup=function(group){var $group=$(group),status=$group.attr("data-status");void 0===status||"expanded"==status?this.collapseGroup($group):this.expandGroup($group)},SidenavTree.prototype.collapseGroup=function(group){var $list=$("> ul",group),self=this;$list.css("overflow","hidden"),$list.animate({height:0},{duration:100,queue:!1,complete:function(){$list.css({overflow:"visible",display:"none"}),$(group).attr("data-status","collapsed"),$(window).trigger("oc.updateUi"),self.saveGroupStatus($(group).data("group-code"),!0)}})},SidenavTree.prototype.expandGroup=function(group,duration){var $list=$("> ul",group),self=this;duration=void 0===duration?100:duration,$list.css({overflow:"hidden",height:0}),$list.animate({height:$list[0].scrollHeight},{duration:duration,queue:!1,complete:function(){$list.css({overflow:"visible",height:"auto",display:""}),$(group).attr("data-status","expanded"),$(window).trigger("oc.updateUi"),self.saveGroupStatus($(group).data("group-code"),!1)}})},SidenavTree.prototype.saveGroupStatus=function(groupCode,collapsed){var collapsedGroups=$.cookie(this.statusCookieName),updatedGroups=[];void 0===collapsedGroups&&(collapsedGroups=""),collapsedGroups=collapsedGroups.split("|"),$.each(collapsedGroups,function(){groupCode!=this&&updatedGroups.push(this)}),collapsed&&updatedGroups.push(groupCode),$.cookie(this.statusCookieName,updatedGroups.join("|"),{expires:30,path:"/"})},SidenavTree.prototype.handleSearchChange=function(){var lastValue=this.$searchInput.data("oc.lastvalue");if(void 0===lastValue||lastValue!=this.$searchInput.val()){this.$searchInput.data("oc.lastvalue",this.$searchInput.val()),void 0!==this.dataTrackInputTimer&&window.clearTimeout(this.dataTrackInputTimer);var self=this;this.dataTrackInputTimer=window.setTimeout(function(){self.applySearch()},300),$.cookie(this.searchCookieName,$.trim(this.$searchInput.val()),{expires:30,path:"/"})}},SidenavTree.prototype.applySearch=function(){var query=$.trim(this.$searchInput.val()),words=query.toLowerCase().split(" "),visibleGroups=[],visibleItems=[],self=this;return 0==query.length?($("li",this.$el).removeClass("hidden"),void this.$el.removeClass("is-searching")):(this.$el.addClass("is-searching"),$("ul.top-level > li",this.$el).each(function(){var $li=$(this);self.textContainsWords($("div.group h3",$li).text(),words)?(visibleGroups.push($li.get(0)),$("ul li",$li).each(function(){visibleItems.push(this)})):$("ul li",$li).each(function(){(self.textContainsWords($(this).text(),words)||self.textContainsWords($(this).data("keywords"),words))&&(visibleGroups.push($li.get(0)),visibleItems.push(this))})}),$("ul.top-level > li",this.$el).each(function(){var $li=$(this),groupIsVisible=-1!==$.inArray(this,visibleGroups);$li.toggleClass("hidden",!groupIsVisible),groupIsVisible&&self.expandGroup($li,0),$("ul li",$li).each(function(){$(this).toggleClass("hidden",-1==$.inArray(this,visibleItems))})}),$(window).trigger("resize"),!1)},SidenavTree.prototype.textContainsWords=function(text,words){text=text.toLowerCase();for(var i=0;i<words.length;i++)if(-1===text.indexOf(words[i]))return!1;return!0};var old=$.fn.sidenavTree;$.fn.sidenavTree=function(option){var args=arguments;return this.each(function(){var $this=$(this),data=$this.data("oc.sidenavTree"),options=$.extend({},SidenavTree.DEFAULTS,$this.data(),"object"==typeof option&&option);if(data||$this.data("oc.sidenavTree",data=new SidenavTree(this,options)),"string"==typeof option){for(var methodArgs=[],i=1;i<args.length;i++)methodArgs.push(args[i]);data[option].apply(data,methodArgs)}})},$.fn.sidenavTree.Constructor=SidenavTree,$.fn.sidenavTree.noConflict=function(){return $.fn.sidenavTree=old,this},$(document).ready(function(){$("[data-control=sidenav-tree]").sidenavTree()})}(window.jQuery),function($){var Base=$.oc.foundation.base,BaseProto=Base.prototype,DateTimeConverter=function(element,options){this.$el=$(element),this.options=options||{},$.oc.foundation.controlUtils.markDisposable(element),Base.call(this),this.init()};DateTimeConverter.prototype=Object.create(BaseProto),DateTimeConverter.prototype.constructor=DateTimeConverter,DateTimeConverter.prototype.init=function(){this.initDefaults(),this.$el.text(this.getDateTimeValue()),this.$el.one("dispose-control",this.proxy(this.dispose))},DateTimeConverter.prototype.dispose=function(){this.$el.off("dispose-control",this.proxy(this.dispose)),this.$el.removeData("oc.dateTimeConverter"),this.$el=null,this.options=null,BaseProto.dispose.call(this)},DateTimeConverter.prototype.initDefaults=function(){this.options.timezone||(this.options.timezone=$('meta[name="backend-timezone"]').attr("content")),this.options.locale||(this.options.locale=$('meta[name="backend-locale"]').attr("content")),this.options.format||(this.options.format="llll"),this.options.formatAlias&&(this.options.format=this.getFormatFromAlias(this.options.formatAlias)),this.appTimezone=$('meta[name="app-timezone"]').attr("content"),this.appTimezone||(this.appTimezone="UTC")},DateTimeConverter.prototype.getDateTimeValue=function(){this.datetime=this.$el.attr("datetime"),this.$el.get(0).hasAttribute("data-ignore-timezone")&&(this.appTimezone="UTC",this.options.timezone="UTC");var momentObj=moment.tz(this.datetime,this.appTimezone);return this.options.locale&&(momentObj=momentObj.locale(this.options.locale)),this.options.timezone&&(momentObj=momentObj.tz(this.options.timezone)),this.options.timeSince?momentObj.fromNow():this.options.timeTense?momentObj.calendar():momentObj.format(this.options.format)},DateTimeConverter.prototype.getFormatFromAlias=function(alias){var map={time:"LT",timeLong:"LTS",date:"L",dateMin:"l",dateLong:"LL",dateLongMin:"ll",dateTime:"LLL",dateTimeMin:"lll",dateTimeLong:"LLLL",dateTimeLongMin:"llll"};return map[alias]?map[alias]:"llll"},DateTimeConverter.DEFAULTS={format:null,formatAlias:null,timezone:null,locale:null,timeTense:!1,timeSince:!1};var old=$.fn.dateTimeConverter;$.fn.dateTimeConverter=function(option){var items,result,args=Array.prototype.slice.call(arguments,1);return items=this.each(function(){var $this=$(this),data=$this.data("oc.dateTimeConverter"),options=$.extend({},DateTimeConverter.DEFAULTS,$this.data(),"object"==typeof option&&option);if(data||$this.data("oc.dateTimeConverter",data=new DateTimeConverter(this,options)),"string"==typeof option&&(result=data[option].apply(data,args)),void 0!==result)return!1}),result||items},$.fn.dateTimeConverter.Constructor=DateTimeConverter,$.fn.dateTimeConverter.noConflict=function(){return $.fn.dateTimeConverter=old,this},$(document).render(function(){$("time[data-datetime-control]").dateTimeConverter()})}(window.jQuery),function($){function ResponsiveMenu(closeCallback){function init(){$mainMenuElement.length&&(setupResponsiveMenu(),initListeners())}function updateScrollIndicator(el){$(el.parentElement).toggleClass("scrolled",el.scrollTop>0)}function initScrollablePanel(el){el.addEventListener("scroll",function(evt){updateScrollIndicator(evt.target)},{capture:!0,passive:!0})}function initListeners(){initScrollablePanel($responsiveMainMenu.get(0)),initScrollablePanel($responsiveSubMenu.get(0)),$responsiveMainMenuPane.on("click",".mainmenu-item",onMainMenuItemClick),$responsiveSubMenuPane.on("click","a.go-back-link",onCloseSubmenuClick),$responsiveMainMenuPane.on("click","a.close-link",onMenuMenuCloseClick)}function initMenuScroll($menu){$menu.dragScroll({vertical:!0,useNative:!1,useDrag:!0})}function setupResponsiveMenu(){initMenuScroll($responsiveMainMenu),initMenuScroll($responsiveSubMenu),$(document.body).on("click",".mainmenu-items",function(){if($(document.body).hasClass("drag"))return!1})}function onMainMenuItemClick(ev){var $menuItem=$(ev.currentTarget),$item=$menuItem.closest(".mainmenu-item");if($item.hasClass("has-subitems")){var submenuIndex=$item.data("submenuIndex"),$submenu=$menuContainer.find(".mainmenu-submenu-dropdown[data-submenu-index="+submenuIndex+"]");$responsiveSubMenu.html($submenu.html()),$subMenuHeaderMenuItem.html($menuItem.html()),$subMenuHeader.attr("data-submenu-index",submenuIndex),$(document.body).addClass("responsive-submenu-displayed"),ev.preventDefault()}}function onCloseSubmenuClick(ev){$(document.body).removeClass("responsive-submenu-displayed"),ev.preventDefault()}function onMenuMenuCloseClick(){closeCallback()}var $mainMenuElement=$("#layout-mainmenu .navbar ul.mainmenu-items"),$menuContainer=$mainMenuElement.closest(".layout-row"),$responsiveMenuContainer=$("#layout-mainmenu-responsive-container"),$responsiveMainMenuPane=$responsiveMenuContainer.find(".mainmenu-pane"),$responsiveSubMenuPane=$responsiveMenuContainer.find(".submenu-pane"),$responsiveMainMenu=$responsiveMainMenuPane.find("ul.mainmenu-items"),$responsiveSubMenu=$responsiveSubMenuPane.find("ul.mainmenu-items"),$subMenuHeader=$responsiveSubMenuPane.find(".menu-header"),$subMenuHeaderMenuItem=$subMenuHeader.find(".mainmenu-item");this.show=function(){$responsiveMainMenu.dragScroll("goToStart"),$responsiveSubMenu.dragScroll("goToStart"),$(document.body).addClass("responsive-menu-displayed")},this.hide=function(){$(document.body).removeClass("responsive-menu-displayed"),window.setTimeout(function(){$(document.body).removeClass("responsive-submenu-displayed")},250)},init()}$.oc.responsiveMenu=ResponsiveMenu}(window.jQuery),function($){function MainMenu(){function init(){$leftMenuElement.find("li a").on("touchstart",onLeftMenuTouch).on("click",onLeftMenuItemClick),$mainMenuElement.on("click","li.has-subitems",onItemClick),$mainMenuElement.on("click",".mainmenu-toggle",onShowResponsiveMenuClick),$leftMenuElement.on("mouseenter",onLeftMenuMouseEnter),$leftMenuElement.on("mouseleave",onLeftMenuMouseLeave),$mainMenuToolbar.each(function(){var dragScroll=$(this).data("oc.dragScroll");dragScroll&&dragScroll.goToElement($(this).find("ul.mainmenu-items > li.active"),void 0,{duration:0,alignBottom:!0})})}function displaySubmenu($li){var submenuIndex=$li.data("submenuIndex"),$submenu=$menuContainer.find(".mainmenu-submenu-dropdown[data-submenu-index="+submenuIndex+"]"),isLeftSideMenu=$li.closest("#layout-mainmenu-left").length>0;if(getOverlay().addClass("show"),isLeftSideMenu){$(document.body).addClass("left-menu-submenu-displayed");var menuTop=$li.offset().top;$submenu.css({top:menuTop,left:$leftMenuElement.outerWidth()})}else{var menuLeft=$li.offset().left;$submenu.css({top:menuHeight,left:menuLeft})}if($submenu.addClass("invisible"),$submenu.addClass("show"),isLeftSideMenu){var submenuPosition=$submenu.position(),menuBottom=$submenu.height()+submenuPosition.top,windowHeight=window.scrollY+$(document.body).height();menuBottom>windowHeight-20&&$submenu.css({top:submenuPosition.top-(menuBottom-windowHeight)-20})}else{var menuRight=menuLeft+$submenu.width(),windowWidth=$(window).width();menuRight>windowWidth-20&&$submenu.css({left:menuLeft-(menuRight-windowWidth)-20})}$submenu.removeClass("invisible"),addKeyListener()}function onKeyDown(ev){27==ev.keyCode&&hideMenus(null,!0)}function onLeftMenuTouch(ev){isTouch=!0}function onLeftMenuItemClick(ev){if(isTouch&&!$(document.body).hasClass("reveal-left-side-menu"))return onLeftMenuMouseEnter(),ev.stopPropagation(),ev.preventDefault(),!1}function onLeftMenuMouseEnter(){leftMenuLeaveDebounceTimer&&(window.clearTimeout(leftMenuLeaveDebounceTimer),leftMenuLeaveDebounceTimer=null),$(document.body).hasClass("reveal-left-side-menu")||(leftMenuDebounceTimer&&window.clearTimeout(leftMenuDebounceTimer),leftMenuDebounceTimer=window.setTimeout(showLeftMenu,100))}function onLeftMenuMouseLeave(){$(document.body).hasClass("left-menu-submenu-displayed")||(leftMenuDebounceTimer&&(window.clearTimeout(leftMenuDebounceTimer),leftMenuDebounceTimer=null),leftMenuLeaveDebounceTimer&&window.clearTimeout(leftMenuLeaveDebounceTimer),leftMenuLeaveDebounceTimer=window.setTimeout(hideLeftMenu,300))}function getLeftMenuWidth(){if(null!==leftMenuWidth)return leftMenuWidth;var leftMenuContainer=$leftMenuElement.closest(".left-side-menu-container");leftMenuContainer.addClass("width-check");var extrasWidth=0;return $leftMenuExtrasMenu.find(".nav-label").each(function(){var labelTotalWidth=$(this).offset().left+$(this).outerWidth(!0)+20;extrasWidth=Math.max(extrasWidth,labelTotalWidth)}),leftMenuWidth=Math.max($leftMenuMainMenu.outerWidth(),extrasWidth),leftMenuContainer.removeClass("width-check"),leftMenuWidth}function showLeftMenu(){$(document.body).addClass("reveal-left-side-menu"),$leftMenuElement.data("original-width")||$leftMenuElement.data("original-width",$leftMenuElement.width()),addKeyListener(),getLeftMenuOverlay().addClass("show"),$leftMenuElement.width(getLeftMenuWidth())}function hideLeftMenu(){leftMenuLeaveDebounceTimer&&(window.clearTimeout(leftMenuLeaveDebounceTimer),leftMenuLeaveDebounceTimer=null),$leftMenuElement.width($leftMenuElement.data("original-width")),getLeftMenuOverlay().removeClass("show"),$(document.body).removeClass("reveal-left-side-menu")}function addKeyListener(){$(document).on("keydown.mainmenusubmenu",onKeyDown)}function removeKeyListener(){$(document).off(".mainmenusubmenu")}function hideSubmenu(){$menuContainer.find(".mainmenu-submenu-dropdown.show").removeClass("show"),$(document.body).removeClass("left-menu-submenu-displayed")}function hideMenus(ev,hideAll){var isSubmenuDisplayed=$(document.body).hasClass("left-menu-submenu-displayed");getOverlay().removeClass("show"),hideSubmenu(),removeKeyListener(),isSubmenuDisplayed&&!hideAll||(hideLeftMenu(),responsiveMenu.hide())}function getOverlay(){return $overlay||($overlay=$('<div class="mainmenu-submenu-overlay"></div>').appendTo(document.body),$overlay.on("click",function(ev){hideMenus(null,ev.pageX>$leftMenuElement.outerWidth())}),$overlay)}function getLeftMenuOverlay(){return $leftMenuOverlay||($leftMenuOverlay=$('<div class="mainmenu-leftmenu-overlay"></div>').appendTo(document.body),$leftMenuOverlay.on("click",hideMenus),$leftMenuOverlay)}function onItemClick(ev){var $li=$(ev.currentTarget).closest("li");return ev.preventDefault(),!$(document.body).hasClass("drag")&&(displaySubmenu($li),!1)}function onShowResponsiveMenuClick(ev){return ev.preventDefault(),addKeyListener(),getOverlay().addClass("show"),responsiveMenu.show(),!1}var $mainMenuElement=$(".layout-mainmenu .navbar ul.mainmenu-items"),$leftMenuElement=$("#layout-mainmenu-left"),$leftMenuMainMenu=$leftMenuElement.find("[data-control=toolbar]"),$leftMenuExtrasMenu=$leftMenuElement.find(".mainmenu-extras"),$mainMenuToolbar=$(".layout-mainmenu [data-control=toolbar]"),$menuContainer=$("#layout-mainmenu").closest(".layout-row"),menuHeight=$.oc.backendCalculateTopContainerOffset(),responsiveMenu=new $.oc.responsiveMenu(hideMenus),leftMenuDebounceTimer=null,leftMenuWidth=null,leftMenuLeaveDebounceTimer=null,$overlay=null,isTouch=!1,$leftMenuOverlay=null;init()}$(document).ready(function(){$.oc.mainMenu=new MainMenu})}(window.jQuery),function($){var ModalFocusManager=function(){function addEventAndCall(callback){$(document).on("focusin.octoberfocusmanager",callback),callback(null)}function removeCallbacks(){$(document).off(".octoberfocusmanager")}function findIndexByUid(uid){for(var index=0;index<modalStack.length;index++)if(modalStack[index].uid==uid)return index;return null}var modalStack=[];this.push=function(focusInCallback,type,uid,isHotkeyBlocking){removeCallbacks(),addEventAndCall(focusInCallback),modalStack.push({focusInCallback:focusInCallback,type:type,uid:uid,isHotkeyBlocking:isHotkeyBlocking})},this.hasHotkeyBlockingAbove=function(uid){for(var uidIndex=findIndexByUid(uid),startIndex=null!==uidIndex?uidIndex:0,index=startIndex;index<modalStack.length;index++)if(modalStack[index].isHotkeyBlocking)return!0;return!1},this.getTop=function(){return modalStack.length>0?modalStack[modalStack.length-1]:null},this.isUidTop=function(uid){var top=this.getTop();return null!==top&&void 0!==top.uid&&top.uid===uid},this.getNumberOfType=function(type){for(var result=0,index=0;index<modalStack.length;index++)modalStack[index].type==type&&result++;return result},this.pop=function(){if(modalStack.pop(),removeCallbacks(),modalStack.length>0){addEventAndCall(modalStack[modalStack.length-1].focusInCallback)}}};$.oc.modalFocusManager=new ModalFocusManager}(window.jQuery),function($){var DomIdManager=function(){var indexes=1;this.generate=function(prefix){var result="id-"+indexes++;return"string"==typeof prefix&&(result=prefix+"-"+result),result}};$.oc.domIdManager=new DomIdManager}(window.jQuery),function($){var VueUtils=function(){function findTraverseObjects(objectArray,currentKey,keyProperty){for(var index=0;index<objectArray.length;index++)if(objectArray[index][keyProperty]===currentKey)return objectArray[index];return null}this.getObjectProperty=function(obj,propertyPath){for(var pathParts=propertyPath.split("."),currentObject=obj,index=0;index<pathParts.length;index++){var currentProperty=pathParts[index];if(void 0===currentObject[currentProperty])return;currentObject=currentObject[currentProperty]}return currentObject},this.getCleanObject=function(obj){return JSON.parse(JSON.stringify(obj))},this.findObjectByKeyPath=function(objectArray,keyPathArray,childrenListProperty,keyProperty){for(var keyPathCopy=keyPathArray.slice(),currentKey=keyPathCopy.shift(),obj=null;void 0!==currentKey;){if(!objectArray)return null;if(null===(obj=findTraverseObjects(objectArray,currentKey,keyProperty)))return obj;objectArray=this.getObjectProperty(obj,childrenListProperty),void 0===objectArray&&(objectArray=[]),currentKey=keyPathCopy.shift()}return obj},this.findObjectsByProperty=function(objectArray,childrenListProperty,propertyName,propertyValue,path){function traverse(objects){for(var index=0;index<objects.length;index++){var object=objects[index];object[propertyName]===propertyValue&&result.push(object),traverse(object[childrenListProperty]||[])}}var result=[];return traverse(objectArray),result},this.getObjectPathByProperty=function(objectArray,childrenListProperty,propertyName,propertyValue){function traverse(objects,path){for(var index=0;index<objects.length;index++){var object=objects[index],currentPropertyValue=object[propertyName];if(currentPropertyValue===propertyValue)return path.concat(currentPropertyValue);var childPath=traverse(object[childrenListProperty]||[],path.concat(currentPropertyValue));if(childPath)return childPath}}return traverse(objectArray,[])},this.findObjectParentInfoByProperty=function(objectArray,childrenListProperty,propertyName,propertyValue){function traverse(objects){for(var index=0;index<objects.length;index++){var object=objects[index];if(object[propertyName]===propertyValue)return{parentArray:objects,index:index,object:object};var subtreeResult=traverse(object[childrenListProperty]||[]);if(subtreeResult)return subtreeResult}}return traverse(objectArray)},this.getFlattenNodes=function(objectArray,childrenListProperty){function traverse(objects){for(var index=0;index<objects.length;index++){var object=objects[index];traverse(object[childrenListProperty]||[]),result.push(object)}}var result=[];return traverse(objectArray),result},this.stringHashCode=function(value){var i,chr,hash=0;for(i=0;i<value.length;i++)chr=value.charCodeAt(i),hash=(hash<<5)-hash+chr,hash|=0;return hash},this.syncObjectProperties=function(srcObj,destObj){for(var srcProp in srcObj)srcObj.hasOwnProperty(srcProp)&&(destObj[srcProp]=srcObj[srcProp]);for(var destProp in destObj)destObj.hasOwnProperty(destProp)&&(srcObj.hasOwnProperty(destProp)||delete destObj[destProp])},this.stringFuzzySearch=function(query,str){for(var queryArray=query.split(" "),wordsFound=0,index=0;index<queryArray.length;index++)-1!==str.indexOf(queryArray[index])&&wordsFound++;return wordsFound==queryArray.length},this.getRelativeOffset=function(element1,element2){var offset1=$(element1).offset(),offset2=$(element2).offset();return{left:offset1.left-offset2.left,top:offset1.top-offset2.top}}};$.oc.vueUtils=new VueUtils}(window.jQuery),function($){var Tooltips=function(){function init(){addListeners()}function addListeners(){document.addEventListener("mouseenter",onMouseEnter,!0),document.addEventListener("mouseleave",onMouseLeave,!0),document.addEventListener("mousedown",onMouseDown),document.addEventListener("click",onMouseDown),document.addEventListener("keydown",onKeyDown)}function clearTooltipTimeout(){null!==tooltipTimeout&&clearTimeout(tooltipTimeout),tooltipTimeout=null}function createTooltip(element){$tooltipElement||($tooltipElement=$('<div class="october-tooltip tooltip-hidden tooltip-invisible"><span class="tooltip-text"></span><span class="tooltip-hotkey"></span></div>'),$(document.body).append($tooltipElement)),$tooltipElement.find(".tooltip-text").text(element.getAttribute("data-tooltip-text"));var tooltipHotkey=element.getAttribute("data-tooltip-hotkey"),hotkeySpan=$tooltipElement.find(".tooltip-hotkey").html("");tooltipHotkey&&tooltipHotkey.split(",").forEach(function(hotkeys){hotkeySpan.append($("<i>").text(hotkeys.trim()))}),$tooltipElement.removeClass("tooltip-hidden"),$tooltipElement.css("left",0);var $element=$(element),elementOffset=$element.offset(),elementWidth=$element.outerWidth(),elementHeight=$element.height(),tooltipWidth=$tooltipElement.outerWidth(),bodyWidth=$(document.body).width(),left=Math.round(elementOffset.left+elementWidth/2-tooltipWidth/2);left<0&&(left=15);var rightDiff=left+tooltipWidth-bodyWidth;rightDiff>0&&(left-=rightDiff+15),$tooltipElement.css({left:left,top:elementOffset.top+elementHeight+5}),$tooltipElement.removeClass("tooltip-invisible")}function destroyTooltip(){$tooltipElement&&($tooltipElement.addClass("tooltip-invisible"),setTimeout(function(){$tooltipElement.addClass("tooltip-hidden")},150))}function onMouseEnter(ev){ev.target&&ev.target.getAttribute&&ev.target.dataset&&ev.target.getAttribute("data-tooltip-text")&&(clearTooltipTimeout(),destroyTooltip(),tooltipTimeout=setTimeout(function(){createTooltip(ev.target)},300))}function onMouseLeave(ev){ev.target&&ev.target.getAttribute&&ev.target.dataset&&ev.target.getAttribute("data-tooltip-text")&&(clearTooltipTimeout(),destroyTooltip())}function onMouseDown(ev){destroyTooltip()}function onKeyDown(ev){destroyTooltip()}var $tooltipElement=null,tooltipTimeout=null;init(),this.clear=function(){clearTooltipTimeout(),destroyTooltip()}},tooltips=new Tooltips;$.oc.octoberTooltips={clear:function(){tooltips.clear()}}}(window.jQuery),function($){function OctoberModuleRegistry(){this.modules=new Map,this.register=function(namespace,registrationFn){if(this.modules.has(namespace))return void console.info("Module namespace is already registered: "+namespace);this.modules.set(namespace,registrationFn())},this.import=function(namespace){if(!this.exists(namespace))throw new Error("Module namespace is not registered: "+namespace);return this.modules.get(namespace)},this.exists=function(namespace){return this.modules.has(namespace)}}$.oc.module=new OctoberModuleRegistry}($),$.oc.module.register("backend.october.vueapp",function(){return function(){function VueApp(){var _this=this;babelHelpers.classCallCheck(this,VueApp),this.methods={},this.containers={},this.state={processing:!1,lang:{}},this.registerMethods(),document.addEventListener("DOMContentLoaded",function(){_this.loadInitialState(),_this.initListeners(),_this.initContainers()},!1)}return babelHelpers.createClass(VueApp,[{key:"registerMethod",value:function(name,fn){this.methods[name]=fn}},{key:"registerMethods",value:function(){var _this2=this;this.registerMethod("onCommand",function(command,isHotkey,ev,targetElement,customData){return _this2.onCommand(command,isHotkey,ev,targetElement,customData)})}},{key:"getLangString",value:function(key){return this.state.lang[key]}},{key:"loadInitialState",value:function(){var _this3=this;document.querySelectorAll("[data-vue-state]").forEach(function(element){var stateIndex=element.getAttribute("data-vue-state");_this3.state[stateIndex]=JSON.parse(element.innerHTML)})}},{key:"onBeforeContainersInit",value:function(){}},{key:"onCommand",value:function(){function onCommand(_x,_x2,_x3,_x4,_x5){return _ref.apply(this,arguments)}var _ref=babelHelpers.asyncToGenerator(regeneratorRuntime.mark(function _callee(command,isHotkey,ev,targetElement,customData){var parts,requestData,customDataOptions,_this4=this;return regeneratorRuntime.wrap(function(_context){for(;;)switch(_context.prev=_context.next){case 0:if(parts=command.split(":"),2!=parts.length||"form"===parts[0]){_context.next=3;break}throw new Error("Unknown command: "+command);case 3:if(requestData={},customDataOptions=customData||{},customDataOptions.request&&(requestData=customData.request),!customDataOptions.confirm){_context.next=15;break}return _context.prev=7,_context.next=10,$.oc.confirmPromise(customDataOptions.confirm);case 10:_context.next=15;break;case 12:return _context.prev=12,_context.t0=_context.catch(7),_context.abrupt("return",Promise.reject());case 15:return this.state.processing=!0,_context.abrupt("return",this.ajaxRequest(targetElement,parts[1],requestData).finally(function(){_this4.state.processing=!1}));case 17:case"end":return _context.stop()}},_callee,this,[[7,12]])}));return onCommand}()},{key:"isFormCommand",value:function(command){var parts=command.split(":");return 2===parts.length&&"form"===parts[0]}},{key:"ajaxRequest",value:function(element,handler,requestData){return new Promise(function(resolve,reject,onCancel){var request=$(element).request(handler,requestData);request.fail&&request.fail(function(data){reject(data)}),request.done&&request.done(function(data){resolve(data)}),onCancel(function(){request.abort()})})}},{key:"initContainers",value:function(){var _this5=this;document.querySelectorAll("[data-vue-container]").forEach(function(element){_this5.initContainerLang(element)}),this.onBeforeContainersInit(),document.querySelectorAll("[data-vue-container]").forEach(function(element){var containerName=element.getAttribute("data-vue-container"),vm=new Vue({data:{state:_this5.state},el:element,methods:_this5.methods});containerName&&(_this5.containers[containerName]=vm)})}},{key:"initContainerLang",value:function(element){var _this6=this,dataElements=Object.assign({},element.dataset);Object.keys(dataElements).forEach(function(key,index){key.startsWith("lang")&&(_this6.state.lang[key.substring(4)]=dataElements[key])})}},{key:"initListeners",value:function(){}}]),VueApp}()}),$.ajaxPrefilter(function(options){var token=$('meta[name="csrf-token"]').attr("content");token&&(options.headers||(options.headers={}),options.headers["X-CSRF-TOKEN"]=token)}),void 0===$.oc&&($.oc={}),$.oc.backendUrl=function(url){var backendBasePath=$('meta[name="backend-base-path"]').attr("content");return backendBasePath?("/"==url.substr(0,1)&&(url=url.substr(1)),backendBasePath+"/"+url):url},$.oc.backendCalculateTopContainerOffset=function(){var height=$("#layout-mainmenu > .main-menu-container").outerHeight();return $("#layout-banner-area").length&&(height+=$("#layout-banner-area").outerHeight()),height};var AssetManager=function(){var o={load:function(collection,callback){function checkLoaded(){return!!imgLoaded&&(!!jsLoaded&&(!(cssCounter<cssList.length)&&void(callback&&callback())))}var jsList=collection.js?collection.js:[],cssList=collection.css?collection.css:[],imgList=collection.img?collection.img:[];jsList=$.grep(jsList,function(item){return 0==$('head script[src="'+item+'"]').length}),cssList=$.grep(cssList,function(item){return 0==$('head link[href="'+item+'"]').length});var cssCounter=0,jsLoaded=!1,imgLoaded=!1;if(0===jsList.length&&0===cssList.length&&0===imgList.length)return void(callback&&callback());o.loadJavaScript(jsList,function(){jsLoaded=!0,checkLoaded()}),$.each(cssList,function(index,source){o.loadStyleSheet(source,function(){cssCounter++,checkLoaded()})}),o.loadImage(imgList,function(){imgLoaded=!0,checkLoaded()})},loadStyleSheet:function(source,callback){var cssElement=document.createElement("link");return cssElement.setAttribute("rel","stylesheet"),cssElement.setAttribute("type","text/css"),cssElement.setAttribute("href",source),cssElement.addEventListener("load",callback,!1),void 0!==cssElement&&document.getElementsByTagName("head")[0].appendChild(cssElement),cssElement},loadJavaScript:function(sources,callback){if(sources.length<=0)return callback();var source=sources.shift(),jsElement=document.createElement("script");jsElement.setAttribute("type","text/javascript"),jsElement.setAttribute("src",source),jsElement.addEventListener("load",function(){o.loadJavaScript(sources,callback)},!1),void 0!==jsElement&&document.getElementsByTagName("head")[0].appendChild(jsElement)},loadImage:function(sources,callback){if(sources.length<=0)return callback();var loaded=0;$.each(sources,function(index,source){var img=new Image;img.onload=function(){++loaded==sources.length&&callback&&callback()},img.src=source})}};return o},assetManager=new AssetManager;void 0===$.oc&&($.oc={}),$.oc.escapeHtmlString=function(string){var htmlEscapes={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","/":"&#x2F;"};return(""+string).replace(/[&<>"'\/]/g,function(match){return htmlEscapes[match]})},window.addEventListener("touchstart",function onFirstTouch(){window.removeEventListener("touchstart",onFirstTouch,!1),$.cookie("oc-user-touch",1,{expires:365,path:"/"}),$(document.documentElement).addClass("user-touch")},!1),window.MSInputMethodContext&&document.documentMode&&$(window).on("resize",function(){fixMediaManager(),fixSidebar()}),/Firefox\/\d+[\d\.]*/.test(navigator.userAgent)&&"function"==typeof window.DragEvent&&"function"==typeof window.addEventListener&&function(){function update(e){cx=e.clientX,cy=e.clientY,px=e.pageX,py=e.pageY,ox=e.offsetX,oy=e.offsetY,sx=e.screenX,sy=e.screenY,lx=e.layerX,ly=e.layerY}function assign(e){e._ffix_cx=cx,e._ffix_cy=cy,e._ffix_px=px,e._ffix_py=py,e._ffix_ox=ox,e._ffix_oy=oy,e._ffix_sx=sx,e._ffix_sy=sy,e._ffix_lx=lx,e._ffix_ly=ly}function getter(prop,repl){return function(){return me[prop]&&me[prop].get.call(this)||Number(this[repl])||0}}function layerGetter(prop,repl){return function(){return"dragover"===this.type&&ue[prop]?ue[prop].get.call(this):Number(this[repl])||0}}var cx,cy,px,py,ox,oy,sx,sy,lx,ly;window.addEventListener("mousemove",update,!0),window.addEventListener("dragover",update,!0),window.addEventListener("dragstart",assign,!0),window.addEventListener("drag",assign,!0),window.addEventListener("dragend",assign,!0);var me=Object.getOwnPropertyDescriptors(window.MouseEvent.prototype),ue=Object.getOwnPropertyDescriptors(window.UIEvent.prototype);Object.defineProperties(window.DragEvent.prototype,{clientX:{get:getter("clientX","_ffix_cx")},clientY:{get:getter("clientY","_ffix_cy")},pageX:{get:getter("pageX","_ffix_px")},pageY:{get:getter("pageY","_ffix_py")},offsetX:{get:getter("offsetX","_ffix_ox")},offsetY:{get:getter("offsetY","_ffix_oy")},screenX:{get:getter("screenX","_ffix_sx")},screenY:{get:getter("screenY","_ffix_sy")},x:{get:getter("x","_ffix_cx")},y:{get:getter("y","_ffix_cy")},layerX:{get:layerGetter("layerX","_ffix_lx")},layerY:{get:layerGetter("layerY","_ffix_ly")}})}();